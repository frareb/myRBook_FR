<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title> 14 Manipuler des dates et des heures | R pour les scientifiques : Mise en œuvre de projets et valorisation des résultats</title>
  <meta name="description" content="Un guide pour acquérir les bases de la programmation avec R et conduire efficacement la gestion et l’analyse de ses données." />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content=" 14 Manipuler des dates et des heures | R pour les scientifiques : Mise en œuvre de projets et valorisation des résultats" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="myFigures/cover.png" />
  <meta property="og:description" content="Un guide pour acquérir les bases de la programmation avec R et conduire efficacement la gestion et l’analyse de ses données." />
  <meta name="github-repo" content="frareb/myRBook_FR" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content=" 14 Manipuler des dates et des heures | R pour les scientifiques : Mise en œuvre de projets et valorisation des résultats" />
  
  <meta name="twitter:description" content="Un guide pour acquérir les bases de la programmation avec R et conduire efficacement la gestion et l’analyse de ses données." />
  <meta name="twitter:image" content="myFigures/cover.png" />

<meta name="author" content="François Rebaudo" />


<meta name="date" content="2020-05-01" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="graph4.html"/>
<link rel="next" href="studyCase002.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.9.2.1/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.1.0.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.0.1/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.52.2/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.52.2/plotly-latest.min.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-124666641-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-124666641-2');
</script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="myStyle.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R pour les scientifiques</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Préambule</a><ul>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#remerciements"><i class="fa fa-check"></i><b>0.1</b> Remerciements</a></li>
<li class="chapter" data-level="0.2" data-path="index.html"><a href="index.html#licence"><i class="fa fa-check"></i><b>0.2</b> Licence</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#pourquoi-se-former-à-r"><i class="fa fa-check"></i><b>1.1</b> Pourquoi se former à R</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#ce-livre"><i class="fa fa-check"></i><b>1.2</b> Ce livre</a></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#lectures-complémentaires-en-français"><i class="fa fa-check"></i><b>1.3</b> Lectures complémentaires en français</a></li>
</ul></li>
<li class="part"><span><b>I Concepts de base</b></span></li>
<li class="chapter" data-level="2" data-path="premiersPas.html"><a href="premiersPas.html"><i class="fa fa-check"></i><b>2</b> Premiers pas</a><ul>
<li class="chapter" data-level="2.1" data-path="premiersPas.html"><a href="premiersPas.html#installation-de-r"><i class="fa fa-check"></i><b>2.1</b> Installation de R</a></li>
<li class="chapter" data-level="2.2" data-path="premiersPas.html"><a href="premiersPas.html#r-comme-calculatrice"><i class="fa fa-check"></i><b>2.2</b> R comme calculatrice</a><ul>
<li class="chapter" data-level="2.2.1" data-path="premiersPas.html"><a href="premiersPas.html#l011opari"><i class="fa fa-check"></i><b>2.2.1</b> Les opérateurs arithmétiques</a></li>
<li class="chapter" data-level="2.2.2" data-path="premiersPas.html"><a href="premiersPas.html#l011opcomp"><i class="fa fa-check"></i><b>2.2.2</b> Les opérateurs de comparaison</a></li>
<li class="chapter" data-level="2.2.3" data-path="premiersPas.html"><a href="premiersPas.html#l011oplog"><i class="fa fa-check"></i><b>2.2.3</b> Les opérateurs logiques</a></li>
<li class="chapter" data-level="2.2.4" data-path="premiersPas.html"><a href="premiersPas.html#aide-sur-les-opérateurs"><i class="fa fa-check"></i><b>2.2.4</b> Aide sur les opérateurs</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="premiersPas.html"><a href="premiersPas.html#l011object"><i class="fa fa-check"></i><b>2.3</b> La notion d’objet</a></li>
<li class="chapter" data-level="2.4" data-path="premiersPas.html"><a href="premiersPas.html#les-scripts"><i class="fa fa-check"></i><b>2.4</b> Les scripts</a><ul>
<li class="chapter" data-level="2.4.1" data-path="premiersPas.html"><a href="premiersPas.html#créer-un-script-et-le-documenter"><i class="fa fa-check"></i><b>2.4.1</b> Créer un script et le documenter</a></li>
<li class="chapter" data-level="2.4.2" data-path="premiersPas.html"><a href="premiersPas.html#exécuter-un-script"><i class="fa fa-check"></i><b>2.4.2</b> Exécuter un script</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="premiersPas.html"><a href="premiersPas.html#conclusion"><i class="fa fa-check"></i><b>2.5</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="IDE.html"><a href="IDE.html"><i class="fa fa-check"></i><b>3</b> Choisir un environnement de développement</a><ul>
<li class="chapter" data-level="3.1" data-path="IDE.html"><a href="IDE.html#editeurs-de-texte-et-environnement-de-développement"><i class="fa fa-check"></i><b>3.1</b> Editeurs de texte et environnement de développement</a></li>
<li class="chapter" data-level="3.2" data-path="IDE.html"><a href="IDE.html#rstudio"><i class="fa fa-check"></i><b>3.2</b> RStudio</a><ul>
<li class="chapter" data-level="3.2.1" data-path="IDE.html"><a href="IDE.html#installer-rstudio"><i class="fa fa-check"></i><b>3.2.1</b> Installer RStudio</a></li>
<li class="chapter" data-level="3.2.2" data-path="IDE.html"><a href="IDE.html#un-script-avec-rstudio"><i class="fa fa-check"></i><b>3.2.2</b> Un script avec RStudio</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="IDE.html"><a href="IDE.html#notepad-avec-npp2r"><i class="fa fa-check"></i><b>3.3</b> Notepad++ avec Npp2R</a><ul>
<li class="chapter" data-level="3.3.1" data-path="IDE.html"><a href="IDE.html#installer-notepad-pour-windows-uniquement"><i class="fa fa-check"></i><b>3.3.1</b> Installer Notepad++ (pour Windows uniquement)</a></li>
<li class="chapter" data-level="3.3.2" data-path="IDE.html"><a href="IDE.html#installer-npp2r"><i class="fa fa-check"></i><b>3.3.2</b> Installer Npp2R</a></li>
<li class="chapter" data-level="3.3.3" data-path="IDE.html"><a href="IDE.html#un-script-avec-notepad"><i class="fa fa-check"></i><b>3.3.3</b> Un script avec Notepad++</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="IDE.html"><a href="IDE.html#geany"><i class="fa fa-check"></i><b>3.4</b> Geany</a><ul>
<li class="chapter" data-level="3.4.1" data-path="IDE.html"><a href="IDE.html#installer-geany"><i class="fa fa-check"></i><b>3.4.1</b> Installer Geany</a></li>
<li class="chapter" data-level="3.4.2" data-path="IDE.html"><a href="IDE.html#un-script-avec-geany"><i class="fa fa-check"></i><b>3.4.2</b> Un script avec Geany</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="IDE.html"><a href="IDE.html#autres-solutions"><i class="fa fa-check"></i><b>3.5</b> Autres solutions</a></li>
<li class="chapter" data-level="3.6" data-path="IDE.html"><a href="IDE.html#conclusion-1"><i class="fa fa-check"></i><b>3.6</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="dataType1.html"><a href="dataType1.html"><i class="fa fa-check"></i><b>4</b> Les types de données</a><ul>
<li class="chapter" data-level="4.1" data-path="dataType1.html"><a href="dataType1.html#le-type-numeric"><i class="fa fa-check"></i><b>4.1</b> Le type <code>numeric</code></a></li>
<li class="chapter" data-level="4.2" data-path="dataType1.html"><a href="dataType1.html#le-type-character"><i class="fa fa-check"></i><b>4.2</b> Le type <code>character</code></a></li>
<li class="chapter" data-level="4.3" data-path="dataType1.html"><a href="dataType1.html#le-type-factor"><i class="fa fa-check"></i><b>4.3</b> Le type <code>factor</code></a></li>
<li class="chapter" data-level="4.4" data-path="dataType1.html"><a href="dataType1.html#l013logi"><i class="fa fa-check"></i><b>4.4</b> Le type <code>logical</code></a></li>
<li class="chapter" data-level="4.5" data-path="dataType1.html"><a href="dataType1.html#a-propos-de-na"><i class="fa fa-check"></i><b>4.5</b> A propos de <code>NA</code></a></li>
<li class="chapter" data-level="4.6" data-path="dataType1.html"><a href="dataType1.html#conclusion-2"><i class="fa fa-check"></i><b>4.6</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="dataType2.html"><a href="dataType2.html"><i class="fa fa-check"></i><b>5</b> Les conteneurs de données</a><ul>
<li class="chapter" data-level="5.1" data-path="dataType2.html"><a href="dataType2.html#l014vector"><i class="fa fa-check"></i><b>5.1</b> Le conteneur <code>vector</code></a><ul>
<li class="chapter" data-level="5.1.1" data-path="dataType2.html"><a href="dataType2.html#créer-un-vector"><i class="fa fa-check"></i><b>5.1.1</b> Créer un <code>vector</code></a></li>
<li class="chapter" data-level="5.1.2" data-path="dataType2.html"><a href="dataType2.html#opérations-sur-un-vector"><i class="fa fa-check"></i><b>5.1.2</b> Opérations sur un <code>vector</code></a></li>
<li class="chapter" data-level="5.1.3" data-path="dataType2.html"><a href="dataType2.html#accéder-aux-valeurs-dun-vector"><i class="fa fa-check"></i><b>5.1.3</b> Accéder aux valeurs d’un <code>vector</code></a></li>
<li class="chapter" data-level="5.1.4" data-path="dataType2.html"><a href="dataType2.html#nommer-les-éléments-dun-vector"><i class="fa fa-check"></i><b>5.1.4</b> Nommer les éléments d’un <code>vector</code></a></li>
<li class="chapter" data-level="5.1.5" data-path="dataType2.html"><a href="dataType2.html#modifier-les-éléments-dun-vector"><i class="fa fa-check"></i><b>5.1.5</b> Modifier les éléments d’un <code>vector</code></a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="dataType2.html"><a href="dataType2.html#l014list"><i class="fa fa-check"></i><b>5.2</b> Le conteneur <code>list</code></a><ul>
<li class="chapter" data-level="5.2.1" data-path="dataType2.html"><a href="dataType2.html#créer-une-list"><i class="fa fa-check"></i><b>5.2.1</b> Créer une <code>list</code></a></li>
<li class="chapter" data-level="5.2.2" data-path="dataType2.html"><a href="dataType2.html#accéder-aux-valeurs-dune-list"><i class="fa fa-check"></i><b>5.2.2</b> Accéder aux valeurs d’une <code>list</code></a></li>
<li class="chapter" data-level="5.2.3" data-path="dataType2.html"><a href="dataType2.html#modification-dune-list"><i class="fa fa-check"></i><b>5.2.3</b> Modification d’une <code>list</code></a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="dataType2.html"><a href="dataType2.html#l014dataframe"><i class="fa fa-check"></i><b>5.3</b> Le conteneur <code>data.frame</code></a><ul>
<li class="chapter" data-level="5.3.1" data-path="dataType2.html"><a href="dataType2.html#créer-un-data.frame"><i class="fa fa-check"></i><b>5.3.1</b> Créer un <code>data.frame</code></a></li>
<li class="chapter" data-level="5.3.2" data-path="dataType2.html"><a href="dataType2.html#accéder-aux-valeurs-dun-data.frame"><i class="fa fa-check"></i><b>5.3.2</b> Accéder aux valeurs d’un <code>data.frame</code></a></li>
<li class="chapter" data-level="5.3.3" data-path="dataType2.html"><a href="dataType2.html#modifier-un-data.frame"><i class="fa fa-check"></i><b>5.3.3</b> Modifier un <code>data.frame</code></a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="dataType2.html"><a href="dataType2.html#l014matrix"><i class="fa fa-check"></i><b>5.4</b> Le conteneur <code>matrix</code></a><ul>
<li class="chapter" data-level="5.4.1" data-path="dataType2.html"><a href="dataType2.html#créer-une-matrix"><i class="fa fa-check"></i><b>5.4.1</b> Créer une <code>matrix</code></a></li>
<li class="chapter" data-level="5.4.2" data-path="dataType2.html"><a href="dataType2.html#manipuler-et-faire-des-opérations-sur-une-matrix"><i class="fa fa-check"></i><b>5.4.2</b> Manipuler et faire des opérations sur une <code>matrix</code></a></li>
<li class="chapter" data-level="5.4.3" data-path="dataType2.html"><a href="dataType2.html#accéder-aux-éléments-dune-matrix"><i class="fa fa-check"></i><b>5.4.3</b> Accéder aux éléments d’une <code>matrix</code></a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="dataType2.html"><a href="dataType2.html#l014array"><i class="fa fa-check"></i><b>5.5</b> Le conteneur <code>array</code></a><ul>
<li class="chapter" data-level="5.5.1" data-path="dataType2.html"><a href="dataType2.html#créer-un-array"><i class="fa fa-check"></i><b>5.5.1</b> Créer un <code>array</code></a></li>
<li class="chapter" data-level="5.5.2" data-path="dataType2.html"><a href="dataType2.html#manipuler-un-array"><i class="fa fa-check"></i><b>5.5.2</b> Manipuler un <code>array</code></a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="dataType2.html"><a href="dataType2.html#conclusion-3"><i class="fa fa-check"></i><b>5.6</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="fonctions.html"><a href="fonctions.html"><i class="fa fa-check"></i><b>6</b> Les fonctions</a><ul>
<li class="chapter" data-level="6.1" data-path="fonctions.html"><a href="fonctions.html#quest-ce-quune-fonction"><i class="fa fa-check"></i><b>6.1</b> Qu’est-ce qu’une fonction</a></li>
<li class="chapter" data-level="6.2" data-path="fonctions.html"><a href="fonctions.html#l015mainfun"><i class="fa fa-check"></i><b>6.2</b> Les fonctions les plus courantes</a><ul>
<li class="chapter" data-level="6.2.1" data-path="fonctions.html"><a href="fonctions.html#laccès-à-la-documentation"><i class="fa fa-check"></i><b>6.2.1</b> L’accès à la documentation</a></li>
<li class="chapter" data-level="6.2.2" data-path="fonctions.html"><a href="fonctions.html#visualiser-les-données"><i class="fa fa-check"></i><b>6.2.2</b> Visualiser les données</a></li>
<li class="chapter" data-level="6.2.3" data-path="fonctions.html"><a href="fonctions.html#manipuler-les-données"><i class="fa fa-check"></i><b>6.2.3</b> Manipuler les données</a></li>
<li class="chapter" data-level="6.2.4" data-path="fonctions.html"><a href="fonctions.html#fonctions-mathématiques"><i class="fa fa-check"></i><b>6.2.4</b> Fonctions mathématiques</a></li>
<li class="chapter" data-level="6.2.5" data-path="fonctions.html"><a href="fonctions.html#statistiques-descriptives"><i class="fa fa-check"></i><b>6.2.5</b> Statistiques descriptives</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="fonctions.html"><a href="fonctions.html#autres-fonctions-utiles"><i class="fa fa-check"></i><b>6.3</b> Autres fonctions utiles</a><ul>
<li class="chapter" data-level="6.3.1" data-path="fonctions.html"><a href="fonctions.html#l015seqalong"><i class="fa fa-check"></i><b>6.3.1</b> <code>seq_along()</code></a></li>
<li class="chapter" data-level="6.3.2" data-path="fonctions.html"><a href="fonctions.html#l0152points"><i class="fa fa-check"></i><b>6.3.2</b> <code>:</code></a></li>
<li class="chapter" data-level="6.3.3" data-path="fonctions.html"><a href="fonctions.html#l015rep"><i class="fa fa-check"></i><b>6.3.3</b> <code>rep()</code></a></li>
<li class="chapter" data-level="6.3.4" data-path="fonctions.html"><a href="fonctions.html#l015seq"><i class="fa fa-check"></i><b>6.3.4</b> <code>seq()</code></a></li>
<li class="chapter" data-level="6.3.5" data-path="fonctions.html"><a href="fonctions.html#l015getwd"><i class="fa fa-check"></i><b>6.3.5</b> <code>getwd()</code></a></li>
<li class="chapter" data-level="6.3.6" data-path="fonctions.html"><a href="fonctions.html#l015setwd"><i class="fa fa-check"></i><b>6.3.6</b> <code>setwd()</code></a></li>
<li class="chapter" data-level="6.3.7" data-path="fonctions.html"><a href="fonctions.html#l015listfiles"><i class="fa fa-check"></i><b>6.3.7</b> <code>list.files()</code></a></li>
<li class="chapter" data-level="6.3.8" data-path="fonctions.html"><a href="fonctions.html#l015ls"><i class="fa fa-check"></i><b>6.3.8</b> <code>ls()</code></a></li>
<li class="chapter" data-level="6.3.9" data-path="fonctions.html"><a href="fonctions.html#l015rm"><i class="fa fa-check"></i><b>6.3.9</b> <code>rm()</code></a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="fonctions.html"><a href="fonctions.html#quelques-exercices"><i class="fa fa-check"></i><b>6.4</b> Quelques exercices</a><ul>
<li class="chapter" data-level="6.4.1" data-path="fonctions.html"><a href="fonctions.html#séquences"><i class="fa fa-check"></i><b>6.4.1</b> Séquences</a></li>
<li class="chapter" data-level="6.4.2" data-path="fonctions.html"><a href="fonctions.html#statistiques-descriptives-1"><i class="fa fa-check"></i><b>6.4.2</b> Statistiques descriptives</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="fonctions.html"><a href="fonctions.html#l015function"><i class="fa fa-check"></i><b>6.5</b> Ecrire une fonction</a></li>
<li class="chapter" data-level="6.6" data-path="fonctions.html"><a href="fonctions.html#les-packages"><i class="fa fa-check"></i><b>6.6</b> Les packages</a><ul>
<li class="chapter" data-level="6.6.1" data-path="fonctions.html"><a href="fonctions.html#installer-un-package"><i class="fa fa-check"></i><b>6.6.1</b> Installer un package</a></li>
<li class="chapter" data-level="6.6.2" data-path="fonctions.html"><a href="fonctions.html#charger-un-package"><i class="fa fa-check"></i><b>6.6.2</b> Charger un package</a></li>
<li class="chapter" data-level="6.6.3" data-path="fonctions.html"><a href="fonctions.html#portabilité-du-code"><i class="fa fa-check"></i><b>6.6.3</b> Portabilité du code</a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="fonctions.html"><a href="fonctions.html#conclusion-4"><i class="fa fa-check"></i><b>6.7</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="import.html"><a href="import.html"><i class="fa fa-check"></i><b>7</b> Importer et exporter des données</a><ul>
<li class="chapter" data-level="7.1" data-path="import.html"><a href="import.html#l016read"><i class="fa fa-check"></i><b>7.1</b> Lire des données depuis un fichier</a><ul>
<li class="chapter" data-level="7.1.1" data-path="import.html"><a href="import.html#l016transfo"><i class="fa fa-check"></i><b>7.1.1</b> Transformer ses données au format TXT ou CSV</a></li>
<li class="chapter" data-level="7.1.2" data-path="import.html"><a href="import.html#l016readCSV"><i class="fa fa-check"></i><b>7.1.2</b> Lire un fichier CSV</a></li>
<li class="chapter" data-level="7.1.3" data-path="import.html"><a href="import.html#l016readTXT"><i class="fa fa-check"></i><b>7.1.3</b> Lire un fichier texte</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="import.html"><a href="import.html#l016save"><i class="fa fa-check"></i><b>7.2</b> Exporter ou charger des données pour R</a></li>
<li class="chapter" data-level="7.3" data-path="import.html"><a href="import.html#l016write"><i class="fa fa-check"></i><b>7.3</b> Exporter des données</a></li>
<li class="chapter" data-level="7.4" data-path="import.html"><a href="import.html#conclusion-5"><i class="fa fa-check"></i><b>7.4</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="algo.html"><a href="algo.html"><i class="fa fa-check"></i><b>8</b> Algorithmique</a><ul>
<li class="chapter" data-level="8.1" data-path="algo.html"><a href="algo.html#l17if"><i class="fa fa-check"></i><b>8.1</b> Tests logiques avec <code>if</code></a></li>
<li class="chapter" data-level="8.2" data-path="algo.html"><a href="algo.html#l17switch"><i class="fa fa-check"></i><b>8.2</b> Tests logiques avec <code>switch</code></a></li>
<li class="chapter" data-level="8.3" data-path="algo.html"><a href="algo.html#l17for"><i class="fa fa-check"></i><b>8.3</b> La boucle <code>for</code></a></li>
<li class="chapter" data-level="8.4" data-path="algo.html"><a href="algo.html#l17while"><i class="fa fa-check"></i><b>8.4</b> La boucle <code>while</code></a></li>
<li class="chapter" data-level="8.5" data-path="algo.html"><a href="algo.html#l17repeat"><i class="fa fa-check"></i><b>8.5</b> La boucle <code>repeat</code></a></li>
<li class="chapter" data-level="8.6" data-path="algo.html"><a href="algo.html#l17spe"><i class="fa fa-check"></i><b>8.6</b> <code>next</code> et <code>break</code></a></li>
<li class="chapter" data-level="8.7" data-path="algo.html"><a href="algo.html#l17applyfamily"><i class="fa fa-check"></i><b>8.7</b> Les boucles de la famille <code>apply</code></a><ul>
<li class="chapter" data-level="8.7.1" data-path="algo.html"><a href="algo.html#l17apply"><i class="fa fa-check"></i><b>8.7.1</b> <code>apply</code></a></li>
<li class="chapter" data-level="8.7.2" data-path="algo.html"><a href="algo.html#l17sapply"><i class="fa fa-check"></i><b>8.7.2</b> <code>lapply</code></a></li>
<li class="chapter" data-level="8.7.3" data-path="algo.html"><a href="algo.html#l17lapply"><i class="fa fa-check"></i><b>8.7.3</b> <code>sapply</code></a></li>
<li class="chapter" data-level="8.7.4" data-path="algo.html"><a href="algo.html#l17tapply"><i class="fa fa-check"></i><b>8.7.4</b> <code>tapply</code></a></li>
<li class="chapter" data-level="8.7.5" data-path="algo.html"><a href="algo.html#l17mapply"><i class="fa fa-check"></i><b>8.7.5</b> <code>mapply</code></a></li>
</ul></li>
<li class="chapter" data-level="8.8" data-path="algo.html"><a href="algo.html#conclusion-6"><i class="fa fa-check"></i><b>8.8</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="project.html"><a href="project.html"><i class="fa fa-check"></i><b>9</b> Gestion d’un projet avec R</a><ul>
<li class="chapter" data-level="9.1" data-path="project.html"><a href="project.html#gestion-des-fichiers-et-des-répertoires-de-travail"><i class="fa fa-check"></i><b>9.1</b> Gestion des fichiers et des répertoires de travail</a></li>
<li class="chapter" data-level="9.2" data-path="project.html"><a href="project.html#gestion-des-versions-de-script"><i class="fa fa-check"></i><b>9.2</b> Gestion des versions de script</a></li>
<li class="chapter" data-level="9.3" data-path="project.html"><a href="project.html#gestion-de-la-documentation"><i class="fa fa-check"></i><b>9.3</b> Gestion de la documentation</a></li>
<li class="chapter" data-level="9.4" data-path="project.html"><a href="project.html#communiquer-avec-rmarkdown"><i class="fa fa-check"></i><b>9.4</b> Communiquer avec rmarkdown</a></li>
<li class="chapter" data-level="9.5" data-path="project.html"><a href="project.html#conclusion-7"><i class="fa fa-check"></i><b>9.5</b> Conclusion</a></li>
</ul></li>
<li class="part"><span><b>II Les graphiques</b></span></li>
<li class="chapter" data-level="10" data-path="graph1.html"><a href="graph1.html"><i class="fa fa-check"></i><b>10</b> Graphiques simples</a><ul>
<li class="chapter" data-level="10.1" data-path="graph1.html"><a href="graph1.html#graph1plot"><i class="fa fa-check"></i><b>10.1</b> <code>plot</code></a></li>
<li class="chapter" data-level="10.2" data-path="graph1.html"><a href="graph1.html#graph1hist"><i class="fa fa-check"></i><b>10.2</b> <code>hist</code></a></li>
<li class="chapter" data-level="10.3" data-path="graph1.html"><a href="graph1.html#graph1barplot"><i class="fa fa-check"></i><b>10.3</b> <code>barplot</code></a></li>
<li class="chapter" data-level="10.4" data-path="graph1.html"><a href="graph1.html#graph1boxplot"><i class="fa fa-check"></i><b>10.4</b> <code>boxplot</code></a></li>
<li class="chapter" data-level="10.5" data-path="graph1.html"><a href="graph1.html#autres-graphiques"><i class="fa fa-check"></i><b>10.5</b> Autres graphiques</a></li>
<li class="chapter" data-level="10.6" data-path="graph1.html"><a href="graph1.html#conclusion-8"><i class="fa fa-check"></i><b>10.6</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="graph2.html"><a href="graph2.html"><i class="fa fa-check"></i><b>11</b> La gestion des couleurs</a><ul>
<li class="chapter" data-level="11.1" data-path="graph2.html"><a href="graph2.html#colors"><i class="fa fa-check"></i><b>11.1</b> <code>colors()</code></a></li>
<li class="chapter" data-level="11.2" data-path="graph2.html"><a href="graph2.html#rgb"><i class="fa fa-check"></i><b>11.2</b> <code>rgb()</code></a></li>
<li class="chapter" data-level="11.3" data-path="graph2.html"><a href="graph2.html#palettes"><i class="fa fa-check"></i><b>11.3</b> Palettes</a></li>
<li class="chapter" data-level="11.4" data-path="graph2.html"><a href="graph2.html#conclusion-9"><i class="fa fa-check"></i><b>11.4</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="graph3.html"><a href="graph3.html"><i class="fa fa-check"></i><b>12</b> Les packages graphiques</a><ul>
<li class="chapter" data-level="12.1" data-path="graph3.html"><a href="graph3.html#les-packages-de-palettes"><i class="fa fa-check"></i><b>12.1</b> les packages de palettes</a><ul>
<li class="chapter" data-level="12.1.1" data-path="graph3.html"><a href="graph3.html#rcolorbrewer"><i class="fa fa-check"></i><b>12.1.1</b> <code>RColorBrewer</code></a></li>
<li class="chapter" data-level="12.1.2" data-path="graph3.html"><a href="graph3.html#palettesforr"><i class="fa fa-check"></i><b>12.1.2</b> <code>palettesForR</code></a></li>
<li class="chapter" data-level="12.1.3" data-path="graph3.html"><a href="graph3.html#les-autres-packages"><i class="fa fa-check"></i><b>12.1.3</b> Les autres packages</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="graph3.html"><a href="graph3.html#ggplot2-package"><i class="fa fa-check"></i><b>12.2</b> ggplot2 package</a></li>
<li class="chapter" data-level="12.3" data-path="graph3.html"><a href="graph3.html#les-graphiques-interactifs-et-dynamiques-avec-plotly"><i class="fa fa-check"></i><b>12.3</b> Les graphiques interactifs et dynamiques avec <code>Plotly</code></a></li>
<li class="chapter" data-level="12.4" data-path="graph3.html"><a href="graph3.html#conclusion-10"><i class="fa fa-check"></i><b>12.4</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="graph4.html"><a href="graph4.html"><i class="fa fa-check"></i><b>13</b> Du graphique à la figure dans un article scientifique</a><ul>
<li class="chapter" data-level="13.1" data-path="graph4.html"><a href="graph4.html#inkscape"><i class="fa fa-check"></i><b>13.1</b> Inkscape</a></li>
<li class="chapter" data-level="13.2" data-path="graph4.html"><a href="graph4.html#the-gimp"><i class="fa fa-check"></i><b>13.2</b> The Gimp</a></li>
<li class="chapter" data-level="13.3" data-path="graph4.html"><a href="graph4.html#table-de-référence"><i class="fa fa-check"></i><b>13.3</b> Table de référence</a></li>
<li class="chapter" data-level="13.4" data-path="graph4.html"><a href="graph4.html#conclusion-11"><i class="fa fa-check"></i><b>13.4</b> Conclusion</a></li>
</ul></li>
<li class="part"><span><b>III Annexes</b></span></li>
<li class="chapter" data-level="14" data-path="studyCase001.html"><a href="studyCase001.html"><i class="fa fa-check"></i><b>14</b> Manipuler des dates et des heures</a></li>
<li class="chapter" data-level="15" data-path="studyCase002.html"><a href="studyCase002.html"><i class="fa fa-check"></i><b>15</b> Internet, manipuler des URLs</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R pour les scientifiques : Mise en œuvre de projets et valorisation des résultats</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="studyCase001" class="section level1">
<h1><span class="header-section-number"> 14</span> Manipuler des dates et des heures</h1>
<p>Dans les études de biologie, d’écologie ou d’agronomie, nous utilisons fréquemment des données de température provenant de dataloggers. Dans cette étude de cas, nous verrons comment analyser ces données en utilisant les données de température de l’altiplano bolivien près de la ville de El Alto. La première étape consiste à transformer les données du datalogger en un format facile à lire pour R. Nous utiliserons un fichier CSV et la fonction <a href="import.html#import"><code>read.table()</code></a>. Le fichier peut être téléchargé à partir du site Web du livre sur GitHub (<a href="https://github.com/frareb/myRBook_FR/blob/master/myFiles/E05C13.csv" class="uri">https://github.com/frareb/myRBook_FR/blob/master/myFiles/E05C13.csv</a>), ou alors lu directement par R depuis sa source (<a href="https://raw.githubusercontent.com/frareb/myRBook_FR/master/myFiles/E05C13.csv" class="uri">https://raw.githubusercontent.com/frareb/myRBook_FR/master/myFiles/E05C13.csv</a>).</p>
<div class="sourceCode" id="cb1197"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1197-1" title="1"><span class="co"># Lecture du fichier en local après téléchargement : </span></a>
<a class="sourceLine" id="cb1197-2" title="2">bdd &lt;-<span class="st"> </span><span class="kw">read.table</span>(</a>
<a class="sourceLine" id="cb1197-3" title="3">  <span class="st">&quot;myFiles/E05C13.csv&quot;</span>, </a>
<a class="sourceLine" id="cb1197-4" title="4">  <span class="dt">skip =</span> <span class="dv">1</span>, <span class="dt">header =</span> <span class="ot">TRUE</span>, </a>
<a class="sourceLine" id="cb1197-5" title="5">  <span class="dt">sep =</span> <span class="st">&quot;,&quot;</span>, <span class="dt">dec =</span> <span class="st">&quot;.&quot;</span>, </a>
<a class="sourceLine" id="cb1197-6" title="6">  <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb1197-7" title="7"><span class="co"># Lecture du fichier depuis GitHub : </span></a>
<a class="sourceLine" id="cb1197-8" title="8"><span class="co"># URL &lt;- paste0(&quot;https://raw.githubusercontent.com/&quot;,</span></a>
<a class="sourceLine" id="cb1197-9" title="9"><span class="co">#   &quot;frareb/myRBook_FR/master/myFiles/E05C13.csv&quot;)</span></a>
<a class="sourceLine" id="cb1197-10" title="10"><span class="co"># bdd &lt;- read.table(</span></a>
<a class="sourceLine" id="cb1197-11" title="11"><span class="co">#   URL, </span></a>
<a class="sourceLine" id="cb1197-12" title="12"><span class="co">#   skip = 1, </span></a>
<a class="sourceLine" id="cb1197-13" title="13"><span class="co">#   header = TRUE,</span></a>
<a class="sourceLine" id="cb1197-14" title="14"><span class="co">#   sep = &quot;,&quot;,</span></a>
<a class="sourceLine" id="cb1197-15" title="15"><span class="co">#   dec = &quot;.&quot;,</span></a>
<a class="sourceLine" id="cb1197-16" title="16"><span class="co">#   stringsAsFactors = FALSE)</span></a>
<a class="sourceLine" id="cb1197-17" title="17"><span class="kw">colnames</span>(bdd) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;id&quot;</span>, <span class="st">&quot;date&quot;</span>, <span class="st">&quot;temp&quot;</span>)</a>
<a class="sourceLine" id="cb1197-18" title="18"><span class="kw">head</span>(bdd)</a></code></pre></div>
<pre><code>##   id              date  temp
## 1  1 11/12/15 23:00:00 4.973
## 2  2 11/12/15 23:30:00 4.766
## 3  3 11/13/15 00:00:00 4.844
## 4  4 11/13/15 00:30:00 4.844
## 5  5 11/13/15 01:00:00 5.076
## 6  6 11/13/15 01:30:00 5.282</code></pre>
<div class="sourceCode" id="cb1199"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1199-1" title="1"><span class="kw">tail</span>(bdd)</a></code></pre></div>
<pre><code>##          id              date  temp
## 32781 32781 09/25/17 21:00:00 7.091
## 32782 32782 09/25/17 21:30:00 6.914
## 32783 32783 09/25/17 22:00:00 6.813
## 32784 32784 09/25/17 22:30:00 6.611
## 32785 32785 09/25/17 23:00:00 6.331
## 32786 32786 09/25/17 23:30:00 5.385</code></pre>
<div class="sourceCode" id="cb1201"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1201-1" title="1"><span class="kw">str</span>(bdd)</a></code></pre></div>
<pre><code>## &#39;data.frame&#39;: 32786 obs. of 3 variables:
## $ id : int 1 2 3 4 5 6 7 8 9 10 ...
## $ date: chr &quot;11/12/15 23:00:00&quot; &quot;11/12/15 23:30:00&quot; &quot;11/13/15
00:00:00&quot; &quot;11/13/15 00:30:00&quot; ...
## $ temp: num 4.97 4.77 4.84 4.84 5.08 ...</code></pre>
<p>Nous pouvons voir que la date est au format <code>character</code> et qu’elle contient la date avec le mois, le jour et l’année séparés par <code>/</code>, puis vient un espace et l’heure avec des heures de 0 à 24, minutes et secondes, séparés par <code>:</code> (exemple: <code>11/12/15 23:00:00</code> pour le 12 novembre 2015 à 11 heures du soir). Nous allons séparer les informations en plusieurs objets. Séparons d’abord la date de l’heure. Pour cela, nous utiliserons la fonction <code>strsplit()</code> en utilisant l’espace entre la date et l’heure comme séparateur.</p>
<div class="sourceCode" id="cb1203"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1203-1" title="1"><span class="kw">strsplit</span>(<span class="st">&quot;11/12/15 23:00:00&quot;</span>, <span class="dt">split =</span> <span class="st">&quot; &quot;</span>)</a></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;11/12/15&quot; &quot;23:00:00&quot;</code></pre>
<p>Comme l’indiquent les doubles crochets, la fonction <code>strsplit()</code> renvoie un objet au format <code>list</code>. Nous voulons le vecteur qui correspond au premier élément de la liste, donc nous allons ajouter <code>[[1]]</code>.</p>
<div class="sourceCode" id="cb1205"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1205-1" title="1"><span class="kw">strsplit</span>(<span class="st">&quot;11/12/15 23:00:00&quot;</span>, <span class="dt">split =</span> <span class="st">&quot; &quot;</span>)[[<span class="dv">1</span>]]</a></code></pre></div>
<pre><code>## [1] &quot;11/12/15&quot; &quot;23:00:00&quot;</code></pre>
<p>Le premier élément du <code>vector</code> est la date. Pour avoir toutes les dates, nous allons faire une boucle avec la fonction <code>sapply()</code>.</p>
<div class="sourceCode" id="cb1207"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1207-1" title="1">bddDay &lt;-<span class="st"> </span><span class="kw">sapply</span>(</a>
<a class="sourceLine" id="cb1207-2" title="2">  <span class="kw">strsplit</span>(</a>
<a class="sourceLine" id="cb1207-3" title="3">    bdd[, <span class="dv">2</span>], </a>
<a class="sourceLine" id="cb1207-4" title="4">    <span class="dt">split =</span> <span class="st">&quot; &quot;</span>), </a>
<a class="sourceLine" id="cb1207-5" title="5">  <span class="st">&quot;[[&quot;</span>, <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb1207-6" title="6"><span class="kw">head</span>(bddDay)</a></code></pre></div>
<pre><code>## [1] &quot;11/12/15&quot; &quot;11/12/15&quot; &quot;11/13/15&quot; &quot;11/13/15&quot; &quot;11/13/15&quot;
## [6] &quot;11/13/15&quot;</code></pre>
<p>Ensuite, nous aurons besoin des dates dans le format <code>Date</code>. pour cela nous allons transformer l’objet au format <code>Date</code> avec la fonction <code>as.Date()</code>.</p>
<div class="sourceCode" id="cb1209"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1209-1" title="1">bddDay &lt;-<span class="st"> </span><span class="kw">as.Date</span>(</a>
<a class="sourceLine" id="cb1209-2" title="2">  <span class="kw">sapply</span>(</a>
<a class="sourceLine" id="cb1209-3" title="3">    <span class="kw">strsplit</span>(</a>
<a class="sourceLine" id="cb1209-4" title="4">      bdd[, <span class="dv">2</span>], </a>
<a class="sourceLine" id="cb1209-5" title="5">      <span class="dt">split =</span> <span class="st">&quot; &quot;</span>), </a>
<a class="sourceLine" id="cb1209-6" title="6">    <span class="st">&quot;[[&quot;</span>, <span class="dv">1</span>), </a>
<a class="sourceLine" id="cb1209-7" title="7">  <span class="dt">format =</span> <span class="st">&quot;%m/%d/%y&quot;</span>)</a>
<a class="sourceLine" id="cb1209-8" title="8"><span class="kw">head</span>(bddDay)</a></code></pre></div>
<pre><code>## [1] &quot;2015-11-12&quot; &quot;2015-11-12&quot; &quot;2015-11-13&quot; &quot;2015-11-13&quot;
## [5] &quot;2015-11-13&quot; &quot;2015-11-13&quot;</code></pre>
<p>Nous allons maintenant ajouter l’objet <code>bddDay</code> à notre <code>data.frame</code> <code>bdd</code>. Ensuite, nous allons vérifier que cette nouvelle colonne dans notre <code>data.frame</code> est bien au format <code>Date</code> avec la fonction <code>str()</code></p>
<div class="sourceCode" id="cb1211"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1211-1" title="1">bdd<span class="op">$</span>day &lt;-<span class="st"> </span>bddDay</a>
<a class="sourceLine" id="cb1211-2" title="2"><span class="kw">str</span>(bdd)</a></code></pre></div>
<pre><code>## &#39;data.frame&#39;: 32786 obs. of 4 variables:
## $ id : int 1 2 3 4 5 6 7 8 9 10 ...
## $ date: chr &quot;11/12/15 23:00:00&quot; &quot;11/12/15 23:30:00&quot; &quot;11/13/15
00:00:00&quot; &quot;11/13/15 00:30:00&quot; ...
## $ temp: num 4.97 4.77 4.84 4.84 5.08 ...
## $ day : Date, format: &quot;2015-11-12&quot; ...</code></pre>
<p>Si l’information concernant la date n’est pas suffisante, nous pouvons ajouter l’heure. Dans ce cas c’est le format <code>POSIX</code> qu’il faudra utiliser avec la fonction <code>as.POSIXct()</code>. De la même manière nous allons ajouter l’information dans notre objet <code>bdd</code> et vérifier le format avec la fonction <code>str()</code>.</p>
<div class="sourceCode" id="cb1213"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1213-1" title="1">bddPosix &lt;-<span class="st"> </span><span class="kw">as.POSIXct</span>(</a>
<a class="sourceLine" id="cb1213-2" title="2">  bdd<span class="op">$</span>date, </a>
<a class="sourceLine" id="cb1213-3" title="3">  <span class="dt">format =</span> <span class="st">&quot;%m/%d/%y %H:%M:%S&quot;</span>)</a>
<a class="sourceLine" id="cb1213-4" title="4"><span class="kw">head</span>(bddPosix)</a></code></pre></div>
<pre><code>## [1] &quot;2015-11-12 23:00:00 CET&quot; &quot;2015-11-12 23:30:00 CET&quot;
## [3] &quot;2015-11-13 00:00:00 CET&quot; &quot;2015-11-13 00:30:00 CET&quot;
## [5] &quot;2015-11-13 01:00:00 CET&quot; &quot;2015-11-13 01:30:00 CET&quot;</code></pre>
<div class="sourceCode" id="cb1215"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1215-1" title="1">bdd<span class="op">$</span>posix &lt;-<span class="st"> </span>bddPosix</a>
<a class="sourceLine" id="cb1215-2" title="2"><span class="kw">str</span>(bdd)</a></code></pre></div>
<pre><code>## &#39;data.frame&#39;: 32786 obs. of 5 variables:
## $ id : int 1 2 3 4 5 6 7 8 9 10 ...
## $ date : chr &quot;11/12/15 23:00:00&quot; &quot;11/12/15 23:30:00&quot;
&quot;11/13/15 00:00:00&quot; &quot;11/13/15 00:30:00&quot; ...
## $ temp : num 4.97 4.77 4.84 4.84 5.08 ...
## $ day : Date, format: &quot;2015-11-12&quot; ...
## $ posix: POSIXct, format: &quot;2015-11-12 23:00:00&quot; ...</code></pre>
<p>Dans les fonctions <code>as.Date()</code> et <code>as.POSIXct()</code>, nous avons utilisé l’argument <code>format</code> qui correspond au format dans lequel l’information sur la date est codée. Voici les éléments les plus courants pour le formatage de la date :</p>
<table>
<thead>
<tr class="header">
<th>code</th>
<th>Valeur</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>%a</td>
<td>jour de la semaine (abréviation)</td>
</tr>
<tr class="even">
<td>%A</td>
<td>jour de la semaine</td>
</tr>
<tr class="odd">
<td>%b</td>
<td>mois (abréviation)</td>
</tr>
<tr class="even">
<td>%B</td>
<td>mois</td>
</tr>
<tr class="odd">
<td>%d</td>
<td>jour du mois (decimal)</td>
</tr>
<tr class="even">
<td>%j</td>
<td>jour de l’année (decimal)</td>
</tr>
<tr class="odd">
<td>%m</td>
<td>mois (decimal)</td>
</tr>
<tr class="even">
<td>%y</td>
<td>année avec deux chiffres</td>
</tr>
<tr class="odd">
<td>%Y</td>
<td>année</td>
</tr>
<tr class="even">
<td>%U</td>
<td>semaine de l’année en commençant par dimanche (decimal)</td>
</tr>
<tr class="odd">
<td>%W</td>
<td>semaine de l’année en commençant par lundi (decimal)</td>
</tr>
<tr class="even">
<td>%H</td>
<td>heure 24</td>
</tr>
<tr class="odd">
<td>%I</td>
<td>heure 12</td>
</tr>
<tr class="even">
<td>%M</td>
<td>minute</td>
</tr>
<tr class="odd">
<td>%S</td>
<td>seconde</td>
</tr>
</tbody>
</table>
<p>Nous pouvons visualiser les données avec la fonction <code>plot()</code>.</p>
<div class="sourceCode" id="cb1217"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1217-1" title="1"><span class="kw">par</span>(<span class="dt">mar =</span> <span class="kw">c</span>(<span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">1</span>)) <span class="co"># réduction des marges</span></a>
<a class="sourceLine" id="cb1217-2" title="2"><span class="kw">plot</span>(<span class="dt">x =</span> bdd<span class="op">$</span>day, <span class="dt">y =</span> bdd<span class="op">$</span>temp, </a>
<a class="sourceLine" id="cb1217-3" title="3">    <span class="dt">type =</span> <span class="st">&#39;l&#39;</span>, <span class="dt">ylim =</span> <span class="kw">c</span>(<span class="op">-</span><span class="dv">15</span>, <span class="dv">40</span>), </a>
<a class="sourceLine" id="cb1217-4" title="4">    <span class="dt">xlab =</span> <span class="st">&quot;Temps&quot;</span>, <span class="dt">ylab =</span> <span class="st">&quot;Température (°C)&quot;</span>)</a></code></pre></div>
<p><img src="myRBook_FR_files/figure-html/041-studyCase-8-1.png" width="960" /></p>
<p>Nous pouvons simplifier les informations en ne calculant que les températures minimales, moyennes et maximales avec la fonction <code>tapply()</code>.</p>
<div class="sourceCode" id="cb1218"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1218-1" title="1">tempDayMean &lt;-<span class="st"> </span><span class="kw">tapply</span>(bdd<span class="op">$</span>temp, <span class="dt">INDEX =</span> bdd<span class="op">$</span>day, <span class="dt">FUN =</span> mean)</a>
<a class="sourceLine" id="cb1218-2" title="2">tempDayMin &lt;-<span class="st"> </span><span class="kw">tapply</span>(bdd<span class="op">$</span>temp, <span class="dt">INDEX =</span> bdd<span class="op">$</span>day, <span class="dt">FUN =</span> min)</a>
<a class="sourceLine" id="cb1218-3" title="3">tempDayMax &lt;-<span class="st"> </span><span class="kw">tapply</span>(bdd<span class="op">$</span>temp, <span class="dt">INDEX =</span> bdd<span class="op">$</span>day, <span class="dt">FUN =</span> max)</a>
<a class="sourceLine" id="cb1218-4" title="4"><span class="kw">par</span>(<span class="dt">mar =</span> <span class="kw">c</span>(<span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">1</span>)) <span class="co"># réduction des marges</span></a>
<a class="sourceLine" id="cb1218-5" title="5"><span class="kw">plot</span>(<span class="dt">x =</span> <span class="kw">as.Date</span>(<span class="kw">names</span>(tempDayMean), <span class="dt">format =</span> <span class="st">&quot;%Y-%m-%d&quot;</span>), </a>
<a class="sourceLine" id="cb1218-6" title="6">    <span class="dt">y =</span> tempDayMean, <span class="dt">type =</span> <span class="st">&#39;l&#39;</span>, <span class="dt">ylim =</span> <span class="kw">c</span>(<span class="op">-</span><span class="dv">15</span>, <span class="dv">40</span>), </a>
<a class="sourceLine" id="cb1218-7" title="7">    <span class="dt">xlab =</span> <span class="st">&quot;Temps&quot;</span>, <span class="dt">ylab =</span> <span class="st">&quot;Température (°C)&quot;</span>)</a>
<a class="sourceLine" id="cb1218-8" title="8"><span class="kw">points</span>(<span class="kw">as.Date</span>(<span class="kw">names</span>(tempDayMin), <span class="dt">format =</span> <span class="st">&quot;%Y-%m-%d&quot;</span>), </a>
<a class="sourceLine" id="cb1218-9" title="9">    <span class="dt">y =</span> tempDayMin, <span class="dt">type =</span> <span class="st">&#39;l&#39;</span>, <span class="dt">col =</span> <span class="dv">4</span>)</a>
<a class="sourceLine" id="cb1218-10" title="10"><span class="kw">points</span>(<span class="kw">as.Date</span>(<span class="kw">names</span>(tempDayMax), <span class="dt">format =</span> <span class="st">&quot;%Y-%m-%d&quot;</span>), </a>
<a class="sourceLine" id="cb1218-11" title="11">    <span class="dt">y =</span> tempDayMax, <span class="dt">type =</span> <span class="st">&#39;l&#39;</span>, <span class="dt">col =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb1218-12" title="12"><span class="kw">legend</span>(<span class="st">&quot;topright&quot;</span>, <span class="dt">legend =</span> <span class="kw">c</span>(<span class="st">&quot;min&quot;</span>, <span class="st">&quot;max&quot;</span>, <span class="st">&quot;mean&quot;</span>), </a>
<a class="sourceLine" id="cb1218-13" title="13">  <span class="dt">lty =</span> <span class="dv">1</span>, <span class="dt">lwd =</span> <span class="dv">2</span>, <span class="dt">col =</span> <span class="kw">c</span>(<span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">1</span>))</a></code></pre></div>
<p><img src="myRBook_FR_files/figure-html/041-studyCase-9-1.png" width="960" /></p>
<p>Nous pouvons très facilement représenter le même information par semaine. Il suffit de changer l’argument <code>INDEX</code> pour une date en semaine. Voici un exemple de format par semaine :</p>
<div class="sourceCode" id="cb1219"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1219-1" title="1">anoSem &lt;-<span class="st"> </span><span class="kw">format</span>(bdd<span class="op">$</span>posix, <span class="dt">format =</span> <span class="st">&quot;%Y-%W&quot;</span>)</a>
<a class="sourceLine" id="cb1219-2" title="2"><span class="kw">head</span>(anoSem)</a></code></pre></div>
<pre><code>## [1] &quot;2015-45&quot; &quot;2015-45&quot; &quot;2015-45&quot; &quot;2015-45&quot; &quot;2015-45&quot;
## [6] &quot;2015-45&quot;</code></pre>
<p>Et voici le graphique par semaine :</p>
<div class="sourceCode" id="cb1221"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1221-1" title="1">tempWeekMean &lt;-<span class="st"> </span><span class="kw">tapply</span>(bdd<span class="op">$</span>temp, </a>
<a class="sourceLine" id="cb1221-2" title="2">  <span class="dt">INDEX =</span> <span class="kw">format</span>(bdd<span class="op">$</span>posix, <span class="dt">format =</span> <span class="st">&quot;%Y-%W-1&quot;</span>), <span class="dt">FUN =</span> mean)</a>
<a class="sourceLine" id="cb1221-3" title="3">tempWeekMin &lt;-<span class="st"> </span><span class="kw">tapply</span>(bdd<span class="op">$</span>temp, </a>
<a class="sourceLine" id="cb1221-4" title="4">  <span class="dt">INDEX =</span> <span class="kw">format</span>(bdd<span class="op">$</span>posix, <span class="dt">format =</span> <span class="st">&quot;%Y-%W-1&quot;</span>), <span class="dt">FUN =</span> min)</a>
<a class="sourceLine" id="cb1221-5" title="5">tempWeekMax &lt;-<span class="st"> </span><span class="kw">tapply</span>(bdd<span class="op">$</span>temp, </a>
<a class="sourceLine" id="cb1221-6" title="6">  <span class="dt">INDEX =</span> <span class="kw">format</span>(bdd<span class="op">$</span>posix, <span class="dt">format =</span> <span class="st">&quot;%Y-%W-1&quot;</span>), <span class="dt">FUN =</span> max)</a>
<a class="sourceLine" id="cb1221-7" title="7"><span class="kw">par</span>(<span class="dt">mar =</span> <span class="kw">c</span>(<span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">1</span>)) <span class="co"># réduction des marges</span></a>
<a class="sourceLine" id="cb1221-8" title="8"><span class="kw">plot</span>(<span class="dt">x =</span> <span class="kw">as.Date</span>(<span class="kw">names</span>(tempWeekMean), <span class="dt">format =</span> <span class="st">&quot;%Y-%W-%u&quot;</span>), </a>
<a class="sourceLine" id="cb1221-9" title="9">    <span class="dt">y =</span> tempWeekMean, <span class="dt">type =</span> <span class="st">&#39;l&#39;</span>, <span class="dt">ylim =</span> <span class="kw">c</span>(<span class="op">-</span><span class="dv">15</span>, <span class="dv">40</span>), </a>
<a class="sourceLine" id="cb1221-10" title="10">    <span class="dt">xlab =</span> <span class="st">&quot;Fecha&quot;</span>, <span class="dt">ylab =</span> <span class="st">&quot;Temperatura (°C)&quot;</span>)</a>
<a class="sourceLine" id="cb1221-11" title="11"><span class="kw">points</span>(<span class="dt">x =</span> <span class="kw">as.Date</span>(<span class="kw">names</span>(tempWeekMin), <span class="dt">format =</span> <span class="st">&quot;%Y-%W-%u&quot;</span>), </a>
<a class="sourceLine" id="cb1221-12" title="12">    <span class="dt">y =</span> tempWeekMin, <span class="dt">type =</span> <span class="st">&#39;l&#39;</span>, <span class="dt">col =</span> <span class="dv">4</span>)</a>
<a class="sourceLine" id="cb1221-13" title="13"><span class="kw">points</span>(<span class="dt">x =</span> <span class="kw">as.Date</span>(<span class="kw">names</span>(tempWeekMax), <span class="dt">format =</span> <span class="st">&quot;%Y-%W-%u&quot;</span>), </a>
<a class="sourceLine" id="cb1221-14" title="14">    <span class="dt">y =</span> tempWeekMax, <span class="dt">type =</span> <span class="st">&#39;l&#39;</span>, <span class="dt">col =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb1221-15" title="15"><span class="kw">legend</span>(<span class="st">&quot;topright&quot;</span>, <span class="dt">legend =</span> <span class="kw">c</span>(<span class="st">&quot;min&quot;</span>, <span class="st">&quot;max&quot;</span>, <span class="st">&quot;promedio&quot;</span>), </a>
<a class="sourceLine" id="cb1221-16" title="16">  <span class="dt">lty =</span> <span class="dv">1</span>, <span class="dt">lwd =</span> <span class="dv">2</span>, <span class="dt">col =</span> <span class="kw">c</span>(<span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">1</span>))</a></code></pre></div>
<p><img src="myRBook_FR_files/figure-html/041-studyCase-11-1.png" width="960" /></p>
<p>Dans ce type de représentation nous perdons l’information sur la variabilité des températures par semaine. En focntion des objectifs il pourra être intéressant de préférer une représentation sous forme de <code>boxplot</code> (ici un boxplot par mois en formattant la date avec <code>"%Y-%m"</code>).</p>
<div class="sourceCode" id="cb1222"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1222-1" title="1"><span class="kw">par</span>(<span class="dt">mar =</span> <span class="kw">c</span>(<span class="dv">5</span>, <span class="dv">4</span>, <span class="dv">0</span>, <span class="dv">0</span>))</a>
<a class="sourceLine" id="cb1222-2" title="2"><span class="kw">boxplot</span>(</a>
<a class="sourceLine" id="cb1222-3" title="3">  bdd<span class="op">$</span>temp <span class="op">~</span><span class="st"> </span><span class="kw">format</span>(bdd<span class="op">$</span>posix, <span class="dt">format =</span> <span class="st">&quot;%Y-%m&quot;</span>), </a>
<a class="sourceLine" id="cb1222-4" title="4">  <span class="dt">las =</span> <span class="dv">3</span>,</a>
<a class="sourceLine" id="cb1222-5" title="5">  <span class="dt">xlab =</span> <span class="st">&quot;&quot;</span>, <span class="dt">ylab =</span> <span class="st">&quot;Température (°C)&quot;</span>)</a></code></pre></div>
<p><img src="myRBook_FR_files/figure-html/041-studyCase-12-1.png" width="960" /></p>
<p>Pour comparer les différentes valeurs de température, il peut être utile d’attribuer une couleur à chaque boxplot. Par exemple, nous pouvons utiliser un gradient de couleur du bleu au rouge en utilisant la valeur de la température moyenne.</p>
<div class="sourceCode" id="cb1223"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1223-1" title="1">tempMonthMean &lt;-<span class="st"> </span><span class="kw">tapply</span>(bdd<span class="op">$</span>temp, </a>
<a class="sourceLine" id="cb1223-2" title="2">  <span class="dt">INDEX =</span> <span class="kw">format</span>(bdd<span class="op">$</span>posix, <span class="dt">format =</span> <span class="st">&quot;%Y-%m&quot;</span>), <span class="dt">FUN =</span> mean)</a>
<a class="sourceLine" id="cb1223-3" title="3">myCol &lt;-<span class="st"> </span><span class="kw">colorRampPalette</span>(<span class="kw">c</span>(<span class="st">&quot;blue&quot;</span>, <span class="st">&quot;red&quot;</span>))(<span class="dv">101</span>)</a>
<a class="sourceLine" id="cb1223-4" title="4">tempMeanDayPos &lt;-<span class="st"> </span><span class="kw">round</span>(</a>
<a class="sourceLine" id="cb1223-5" title="5">  (tempMonthMean <span class="op">-</span><span class="st"> </span><span class="kw">min</span>(tempMonthMean)) <span class="op">/</span><span class="st"> </span></a>
<a class="sourceLine" id="cb1223-6" title="6"><span class="st">    </span>(<span class="kw">max</span>(tempMonthMean) <span class="op">-</span><span class="st"> </span><span class="kw">min</span>(tempMonthMean))<span class="op">*</span><span class="dv">100</span>) <span class="op">+</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb1223-7" title="7"><span class="kw">par</span>(<span class="dt">mar =</span> <span class="kw">c</span>(<span class="dv">5</span>, <span class="dv">4</span>, <span class="dv">0</span>, <span class="dv">0</span>)) </a>
<a class="sourceLine" id="cb1223-8" title="8"><span class="kw">boxplot</span>(</a>
<a class="sourceLine" id="cb1223-9" title="9">  bdd<span class="op">$</span>temp <span class="op">~</span><span class="st"> </span><span class="kw">format</span>(bdd<span class="op">$</span>posix, <span class="dt">format =</span> <span class="st">&quot;%Y-%m&quot;</span>), </a>
<a class="sourceLine" id="cb1223-10" title="10">  <span class="dt">las =</span> <span class="dv">3</span>, </a>
<a class="sourceLine" id="cb1223-11" title="11">  <span class="dt">col =</span> myCol[tempMeanDayPos],</a>
<a class="sourceLine" id="cb1223-12" title="12">  <span class="dt">xlab =</span> <span class="st">&quot;&quot;</span>, <span class="dt">ylab =</span> <span class="st">&quot;Température (°C)&quot;</span>)</a></code></pre></div>
<p><img src="myRBook_FR_files/figure-html/041-studyCase-13-1.png" width="960" /></p>
<p>Et pour celles et ceux qui utilisent <code>ggplot2</code> :</p>
<div class="sourceCode" id="cb1224"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1224-1" title="1">pkgCheck &lt;-<span class="st"> </span><span class="cf">function</span>(x){ </a>
<a class="sourceLine" id="cb1224-2" title="2">    <span class="cf">if</span> (<span class="op">!</span><span class="kw">require</span>(x, <span class="dt">character.only =</span> <span class="ot">TRUE</span>)){</a>
<a class="sourceLine" id="cb1224-3" title="3">        <span class="kw">install.packages</span>(x, <span class="dt">dependencies =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb1224-4" title="4">        <span class="cf">if</span>(<span class="op">!</span><span class="kw">require</span>(x, <span class="dt">character.only =</span> <span class="ot">TRUE</span>)) {</a>
<a class="sourceLine" id="cb1224-5" title="5">            <span class="kw">stop</span>()</a>
<a class="sourceLine" id="cb1224-6" title="6">        }</a>
<a class="sourceLine" id="cb1224-7" title="7">    }</a>
<a class="sourceLine" id="cb1224-8" title="8">}</a>
<a class="sourceLine" id="cb1224-9" title="9"><span class="kw">pkgCheck</span>(<span class="st">&quot;ggplot2&quot;</span>)</a>
<a class="sourceLine" id="cb1224-10" title="10"></a>
<a class="sourceLine" id="cb1224-11" title="11">tempMonthMean &lt;-<span class="st"> </span><span class="kw">tapply</span>(bdd<span class="op">$</span>temp, </a>
<a class="sourceLine" id="cb1224-12" title="12">  <span class="dt">INDEX =</span> <span class="kw">format</span>(bdd<span class="op">$</span>posix, <span class="dt">format =</span> <span class="st">&quot;%Y-%m&quot;</span>), <span class="dt">FUN =</span> mean)</a>
<a class="sourceLine" id="cb1224-13" title="13">myCol &lt;-<span class="st"> </span><span class="kw">colorRampPalette</span>(<span class="kw">c</span>(<span class="st">&quot;blue&quot;</span>, <span class="st">&quot;red&quot;</span>))(<span class="dv">101</span>)</a>
<a class="sourceLine" id="cb1224-14" title="14">tempMeanDayPos &lt;-<span class="st"> </span><span class="kw">round</span>(</a>
<a class="sourceLine" id="cb1224-15" title="15">  (tempMonthMean <span class="op">-</span><span class="st"> </span><span class="kw">min</span>(tempMonthMean)) <span class="op">/</span><span class="st"> </span></a>
<a class="sourceLine" id="cb1224-16" title="16"><span class="st">    </span>(<span class="kw">max</span>(tempMonthMean) <span class="op">-</span><span class="st"> </span><span class="kw">min</span>(tempMonthMean))<span class="op">*</span><span class="dv">100</span>) <span class="op">+</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb1224-17" title="17">p01 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data =</span> bdd, </a>
<a class="sourceLine" id="cb1224-18" title="18">  <span class="kw">aes</span>(</a>
<a class="sourceLine" id="cb1224-19" title="19">    <span class="dt">x =</span> posix, </a>
<a class="sourceLine" id="cb1224-20" title="20">    <span class="dt">y =</span> temp, </a>
<a class="sourceLine" id="cb1224-21" title="21">    <span class="dt">group =</span> <span class="kw">format</span>(posix, <span class="dt">format =</span> <span class="st">&quot;%Y-%m&quot;</span>))) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb1224-22" title="22"><span class="st">    </span><span class="kw">geom_boxplot</span>(</a>
<a class="sourceLine" id="cb1224-23" title="23">      <span class="dt">outlier.colour =</span> <span class="st">&quot;black&quot;</span>, </a>
<a class="sourceLine" id="cb1224-24" title="24">      <span class="dt">fill =</span> myCol[tempMeanDayPos])</a>
<a class="sourceLine" id="cb1224-25" title="25">p01</a></code></pre></div>
<p><img src="myRBook_FR_files/figure-html/041-studyCase-14-1.png" width="960" /></p>
<p>Nous pouvons également calculer la différence entre la température maximale et la température minimale (variation de la température diurne).</p>
<div class="sourceCode" id="cb1225"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1225-1" title="1">tempDayTR &lt;-<span class="st"> </span>tempDayMax <span class="op">-</span><span class="st"> </span>tempDayMin</a>
<a class="sourceLine" id="cb1225-2" title="2"><span class="kw">par</span>(<span class="dt">mar =</span> <span class="kw">c</span>(<span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">1</span>)) <span class="co"># réduction des marges</span></a>
<a class="sourceLine" id="cb1225-3" title="3"><span class="kw">plot</span>(</a>
<a class="sourceLine" id="cb1225-4" title="4">  <span class="dt">x =</span> <span class="kw">as.Date</span>(<span class="kw">names</span>(tempDayMean), <span class="dt">format =</span> <span class="st">&quot;%Y-%m-%d&quot;</span>), </a>
<a class="sourceLine" id="cb1225-5" title="5">  <span class="dt">y =</span> tempDayTR, <span class="dt">type =</span> <span class="st">&#39;l&#39;</span>, <span class="dt">ylim =</span> <span class="kw">c</span>(<span class="dv">5</span>, <span class="dv">45</span>), </a>
<a class="sourceLine" id="cb1225-6" title="6">  <span class="dt">xlab =</span> <span class="st">&quot;Fecha&quot;</span>, </a>
<a class="sourceLine" id="cb1225-7" title="7">  <span class="dt">ylab =</span> <span class="st">&quot;Variation de température diurne (°C)&quot;</span>)</a></code></pre></div>
<p><img src="myRBook_FR_files/figure-html/041-studyCase-15-1.png" width="960" /></p>
<p>Une autre possibilité est de regrouper les données pour avoir la température moyenne des heures de la journée avec la fonction <code>aggregate()</code>.</p>
<div class="sourceCode" id="cb1226"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1226-1" title="1">tempHourMean &lt;-<span class="st"> </span><span class="kw">aggregate</span>(</a>
<a class="sourceLine" id="cb1226-2" title="2">  <span class="dt">x =</span> bdd<span class="op">$</span>temp, </a>
<a class="sourceLine" id="cb1226-3" title="3">  <span class="dt">by =</span> <span class="kw">list</span>(<span class="kw">format</span>(bdd<span class="op">$</span>posix, <span class="dt">format =</span> <span class="st">&quot;%H:%M&quot;</span>)), </a>
<a class="sourceLine" id="cb1226-4" title="4">  <span class="dt">FUN =</span> mean)</a>
<a class="sourceLine" id="cb1226-5" title="5">tempHourMin &lt;-<span class="st"> </span><span class="kw">aggregate</span>(</a>
<a class="sourceLine" id="cb1226-6" title="6">  <span class="dt">x =</span> bdd<span class="op">$</span>temp, </a>
<a class="sourceLine" id="cb1226-7" title="7">  <span class="dt">by =</span> <span class="kw">list</span>(<span class="kw">format</span>(bdd<span class="op">$</span>posix, <span class="dt">format =</span> <span class="st">&quot;%H:%M&quot;</span>)), </a>
<a class="sourceLine" id="cb1226-8" title="8">  <span class="dt">FUN =</span> min)</a>
<a class="sourceLine" id="cb1226-9" title="9">tempHourMax &lt;-<span class="st"> </span><span class="kw">aggregate</span>(</a>
<a class="sourceLine" id="cb1226-10" title="10">  <span class="dt">x =</span> bdd<span class="op">$</span>temp, </a>
<a class="sourceLine" id="cb1226-11" title="11">  <span class="dt">by =</span> <span class="kw">list</span>(<span class="kw">format</span>(bdd<span class="op">$</span>posix, <span class="dt">format =</span> <span class="st">&quot;%H:%M&quot;</span>)), </a>
<a class="sourceLine" id="cb1226-12" title="12">  <span class="dt">FUN =</span> max)</a>
<a class="sourceLine" id="cb1226-13" title="13">hours &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dt">from =</span> <span class="dv">0</span>, <span class="dt">to =</span> <span class="fl">23.5</span>, <span class="dt">by =</span> <span class="fl">0.5</span>)</a>
<a class="sourceLine" id="cb1226-14" title="14"><span class="kw">par</span>(<span class="dt">mar =</span> <span class="kw">c</span>(<span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">1</span>)) <span class="co"># réduction des marges</span></a>
<a class="sourceLine" id="cb1226-15" title="15"><span class="kw">plot</span>(<span class="dt">x =</span> hours, </a>
<a class="sourceLine" id="cb1226-16" title="16">    <span class="dt">y =</span> tempHourMean[, <span class="dv">2</span>], <span class="dt">type =</span> <span class="st">&#39;l&#39;</span>, <span class="dt">ylim =</span> <span class="kw">c</span>(<span class="op">-</span><span class="dv">15</span>, <span class="dv">40</span>), </a>
<a class="sourceLine" id="cb1226-17" title="17">    <span class="dt">xlab =</span> <span class="st">&quot;&quot;</span>, <span class="dt">ylab =</span> <span class="st">&quot;Température (°C)&quot;</span>, <span class="dt">lwd =</span> <span class="dv">2</span>, </a>
<a class="sourceLine" id="cb1226-18" title="18">    <span class="dt">xaxt =</span> <span class="st">&quot;n&quot;</span>, <span class="dt">panel.first =</span> {</a>
<a class="sourceLine" id="cb1226-19" title="19">        <span class="kw">abline</span>(<span class="dt">v =</span> hours, <span class="dt">col =</span> <span class="st">&quot;gray&quot;</span>, <span class="dt">lty =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb1226-20" title="20">        <span class="kw">abline</span>(<span class="dt">h =</span> <span class="dv">0</span>, <span class="dt">lty =</span> <span class="dv">2</span>)  </a>
<a class="sourceLine" id="cb1226-21" title="21">    })</a>
<a class="sourceLine" id="cb1226-22" title="22"><span class="kw">axis</span>(</a>
<a class="sourceLine" id="cb1226-23" title="23">  <span class="dt">side =</span> <span class="dv">1</span>, </a>
<a class="sourceLine" id="cb1226-24" title="24">  <span class="dt">at =</span> hours, </a>
<a class="sourceLine" id="cb1226-25" title="25">  <span class="dt">labels =</span> tempHourMean[, <span class="dv">1</span>], </a>
<a class="sourceLine" id="cb1226-26" title="26">  <span class="dt">las =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb1226-27" title="27"><span class="kw">points</span>(</a>
<a class="sourceLine" id="cb1226-28" title="28">  <span class="dt">x =</span> hours, </a>
<a class="sourceLine" id="cb1226-29" title="29">  <span class="dt">y =</span> tempHourMin[, <span class="dv">2</span>], </a>
<a class="sourceLine" id="cb1226-30" title="30">  <span class="dt">type =</span> <span class="st">&#39;l&#39;</span>, <span class="dt">col =</span> <span class="dv">4</span>, <span class="dt">lwd =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb1226-31" title="31"><span class="kw">points</span>(</a>
<a class="sourceLine" id="cb1226-32" title="32">  <span class="dt">x =</span> hours, </a>
<a class="sourceLine" id="cb1226-33" title="33">  <span class="dt">y =</span> tempHourMax[, <span class="dv">2</span>], </a>
<a class="sourceLine" id="cb1226-34" title="34">  <span class="dt">type =</span> <span class="st">&#39;l&#39;</span>, <span class="dt">col =</span> <span class="dv">2</span>, <span class="dt">lwd =</span> <span class="dv">2</span>)</a></code></pre></div>
<p><img src="myRBook_FR_files/figure-html/041-studyCase-16-1.png" width="960" /></p>
<p>Nous pouvons également calculer les températures des heures de la journée pour chaque mois.</p>
<div class="sourceCode" id="cb1227"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1227-1" title="1">meses &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Janvier&quot;</span>, <span class="st">&quot;Février&quot;</span>, <span class="st">&quot;Mars&quot;</span>, <span class="st">&quot;Avril&quot;</span>, <span class="st">&quot;Mai&quot;</span>, </a>
<a class="sourceLine" id="cb1227-2" title="2">  <span class="st">&quot;Juin&quot;</span>, <span class="st">&quot;Juillet&quot;</span>, <span class="st">&quot;Août&quot;</span>, <span class="st">&quot;Septembre&quot;</span>, <span class="st">&quot;Octobre&quot;</span>, </a>
<a class="sourceLine" id="cb1227-3" title="3">  <span class="st">&quot;Novembre&quot;</span>, <span class="st">&quot;Décembre&quot;</span>)</a>
<a class="sourceLine" id="cb1227-4" title="4">hours &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dt">from =</span> <span class="dv">0</span>, <span class="dt">to =</span> <span class="fl">23.5</span>, <span class="dt">by =</span> <span class="fl">0.5</span>)</a>
<a class="sourceLine" id="cb1227-5" title="5">bddMonth &lt;-<span class="st"> </span><span class="kw">format</span>(bdd<span class="op">$</span>day, <span class="dt">format =</span> <span class="st">&quot;%m&quot;</span>)</a>
<a class="sourceLine" id="cb1227-6" title="6">tempDayEachMonth &lt;-<span class="st"> </span><span class="kw">lapply</span>(</a>
<a class="sourceLine" id="cb1227-7" title="7">  <span class="kw">sort</span>(<span class="kw">unique</span>(bddMonth)), <span class="cf">function</span>(myMonth){</a>
<a class="sourceLine" id="cb1227-8" title="8">      bddX &lt;-<span class="st"> </span>bdd[bddMonth <span class="op">==</span><span class="st"> </span>myMonth, ]</a>
<a class="sourceLine" id="cb1227-9" title="9">      tempHourMean &lt;-<span class="st"> </span><span class="kw">aggregate</span>(</a>
<a class="sourceLine" id="cb1227-10" title="10">        <span class="dt">x =</span> bddX<span class="op">$</span>temp, </a>
<a class="sourceLine" id="cb1227-11" title="11">        <span class="dt">by =</span> <span class="kw">list</span>(<span class="kw">format</span>(bddX<span class="op">$</span>posix, <span class="dt">format =</span> <span class="st">&quot;%H:%M&quot;</span>)), </a>
<a class="sourceLine" id="cb1227-12" title="12">        <span class="dt">FUN =</span> mean)</a>
<a class="sourceLine" id="cb1227-13" title="13">      tempHourMin &lt;-<span class="st"> </span><span class="kw">aggregate</span>(</a>
<a class="sourceLine" id="cb1227-14" title="14">        <span class="dt">x =</span> bddX<span class="op">$</span>temp, </a>
<a class="sourceLine" id="cb1227-15" title="15">        <span class="dt">by =</span> <span class="kw">list</span>(<span class="kw">format</span>(bddX<span class="op">$</span>posix, <span class="dt">format =</span> <span class="st">&quot;%H:%M&quot;</span>)), </a>
<a class="sourceLine" id="cb1227-16" title="16">        <span class="dt">FUN =</span> min)</a>
<a class="sourceLine" id="cb1227-17" title="17">      tempHourMax &lt;-<span class="st"> </span><span class="kw">aggregate</span>(</a>
<a class="sourceLine" id="cb1227-18" title="18">        <span class="dt">x =</span> bddX<span class="op">$</span>temp, </a>
<a class="sourceLine" id="cb1227-19" title="19">        <span class="dt">by =</span> <span class="kw">list</span>(<span class="kw">format</span>(bddX<span class="op">$</span>posix, <span class="dt">format =</span> <span class="st">&quot;%H:%M&quot;</span>)), </a>
<a class="sourceLine" id="cb1227-20" title="20">        <span class="dt">FUN =</span> max)</a>
<a class="sourceLine" id="cb1227-21" title="21">    <span class="kw">return</span>(</a>
<a class="sourceLine" id="cb1227-22" title="22">      <span class="kw">data.frame</span>(</a>
<a class="sourceLine" id="cb1227-23" title="23">        tempHourMean, </a>
<a class="sourceLine" id="cb1227-24" title="24">        tempHourMin, </a>
<a class="sourceLine" id="cb1227-25" title="25">        tempHourMax))</a>
<a class="sourceLine" id="cb1227-26" title="26">})</a>
<a class="sourceLine" id="cb1227-27" title="27"><span class="kw">par</span>(<span class="dt">mar =</span> <span class="kw">c</span>(<span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">1</span>)) </a>
<a class="sourceLine" id="cb1227-28" title="28"><span class="co"># for (i in seq_along(tempDayEachMonth)){ # pour tous les mois</span></a>
<a class="sourceLine" id="cb1227-29" title="29"><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>){ <span class="co"># uniquement Janvier et Février </span></a>
<a class="sourceLine" id="cb1227-30" title="30">    <span class="kw">plot</span>(<span class="dt">x =</span> hours, <span class="dt">y =</span> tempDayEachMonth[[i]][, <span class="dv">2</span>], </a>
<a class="sourceLine" id="cb1227-31" title="31">        <span class="dt">type =</span> <span class="st">&#39;l&#39;</span>, <span class="dt">ylim =</span> <span class="kw">c</span>(<span class="op">-</span><span class="dv">15</span>, <span class="dv">40</span>), </a>
<a class="sourceLine" id="cb1227-32" title="32">        <span class="dt">xlab =</span> <span class="st">&quot;&quot;</span>, <span class="dt">ylab =</span> <span class="st">&quot;Température (°C)&quot;</span>, <span class="dt">lwd =</span> <span class="dv">2</span>, </a>
<a class="sourceLine" id="cb1227-33" title="33">        <span class="dt">main =</span> meses[i],</a>
<a class="sourceLine" id="cb1227-34" title="34">        <span class="dt">xaxt =</span> <span class="st">&quot;n&quot;</span>, <span class="dt">panel.first =</span> {</a>
<a class="sourceLine" id="cb1227-35" title="35">            <span class="kw">abline</span>(<span class="dt">v =</span> hours, <span class="dt">col =</span> <span class="st">&quot;gray&quot;</span>, <span class="dt">lty =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb1227-36" title="36">            <span class="kw">abline</span>(<span class="dt">h =</span> <span class="dv">0</span>, <span class="dt">lty =</span> <span class="dv">2</span>)  </a>
<a class="sourceLine" id="cb1227-37" title="37">        })</a>
<a class="sourceLine" id="cb1227-38" title="38">    <span class="kw">axis</span>(</a>
<a class="sourceLine" id="cb1227-39" title="39">      <span class="dt">side =</span> <span class="dv">1</span>, </a>
<a class="sourceLine" id="cb1227-40" title="40">      <span class="dt">at =</span> hours, </a>
<a class="sourceLine" id="cb1227-41" title="41">      <span class="dt">labels =</span> tempHourMean[, <span class="dv">1</span>], </a>
<a class="sourceLine" id="cb1227-42" title="42">      <span class="dt">las =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb1227-43" title="43">    <span class="kw">points</span>(</a>
<a class="sourceLine" id="cb1227-44" title="44">      <span class="dt">x =</span> hours, </a>
<a class="sourceLine" id="cb1227-45" title="45">      <span class="dt">y =</span> tempDayEachMonth[[i]][, <span class="dv">4</span>], </a>
<a class="sourceLine" id="cb1227-46" title="46">        <span class="dt">type =</span> <span class="st">&#39;l&#39;</span>, <span class="dt">col =</span> <span class="dv">4</span>, <span class="dt">lwd =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb1227-47" title="47">    <span class="kw">points</span>(</a>
<a class="sourceLine" id="cb1227-48" title="48">      <span class="dt">x =</span> hours, </a>
<a class="sourceLine" id="cb1227-49" title="49">      <span class="dt">y =</span> tempDayEachMonth[[i]][, <span class="dv">6</span>], </a>
<a class="sourceLine" id="cb1227-50" title="50">        <span class="dt">type =</span> <span class="st">&#39;l&#39;</span>, <span class="dt">col =</span> <span class="dv">2</span>, <span class="dt">lwd =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb1227-51" title="51">}</a></code></pre></div>
<p><img src="myRBook_FR_files/figure-html/041-studyCase-17-1.png" width="960" /><img src="myRBook_FR_files/figure-html/041-studyCase-17-2.png" width="960" /></p>
<p>Ou les regrouper dans un même graphique, ainsi que la variation diurne des températures pour chaque mois.</p>
<div class="sourceCode" id="cb1228"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1228-1" title="1"><span class="kw">par</span>(<span class="dt">mar =</span> <span class="kw">c</span>(<span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">1</span>)) <span class="co"># réduction des marges</span></a>
<a class="sourceLine" id="cb1228-2" title="2"><span class="kw">plot</span>(</a>
<a class="sourceLine" id="cb1228-3" title="3">  <span class="dt">x =</span> hours, </a>
<a class="sourceLine" id="cb1228-4" title="4">  <span class="dt">y =</span> tempDayEachMonth[[<span class="dv">1</span>]][, <span class="dv">2</span>], </a>
<a class="sourceLine" id="cb1228-5" title="5">  <span class="dt">type =</span> <span class="st">&#39;n&#39;</span>, </a>
<a class="sourceLine" id="cb1228-6" title="6">  <span class="dt">ylim =</span> <span class="kw">c</span>(<span class="op">-</span><span class="dv">10</span>, <span class="dv">35</span>),</a>
<a class="sourceLine" id="cb1228-7" title="7">    <span class="dt">xlab =</span> <span class="st">&quot;&quot;</span>, </a>
<a class="sourceLine" id="cb1228-8" title="8">  <span class="dt">ylab =</span> <span class="st">&quot;Température moyenne (°C)&quot;</span>,</a>
<a class="sourceLine" id="cb1228-9" title="9">    <span class="dt">xaxt =</span> <span class="st">&quot;n&quot;</span>, </a>
<a class="sourceLine" id="cb1228-10" title="10">    <span class="dt">panel.first =</span> {</a>
<a class="sourceLine" id="cb1228-11" title="11">        <span class="kw">abline</span>(<span class="dt">v =</span> hours, <span class="dt">col =</span> <span class="st">&quot;gray&quot;</span>, <span class="dt">lty =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb1228-12" title="12">        <span class="kw">abline</span>(<span class="dt">h =</span> <span class="dv">0</span>, <span class="dt">lty =</span> <span class="dv">2</span>)  </a>
<a class="sourceLine" id="cb1228-13" title="13">    })</a>
<a class="sourceLine" id="cb1228-14" title="14"><span class="kw">axis</span>(</a>
<a class="sourceLine" id="cb1228-15" title="15">  <span class="dt">side =</span> <span class="dv">1</span>, </a>
<a class="sourceLine" id="cb1228-16" title="16">  <span class="dt">at =</span> hours, </a>
<a class="sourceLine" id="cb1228-17" title="17">  <span class="dt">labels =</span> tempHourMean[, <span class="dv">1</span>], </a>
<a class="sourceLine" id="cb1228-18" title="18">  <span class="dt">las =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb1228-19" title="19">myColors &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;#A6CEE3&quot;</span>, <span class="st">&quot;#1F78B4&quot;</span>, <span class="st">&quot;#B2DF8A&quot;</span>, <span class="st">&quot;#33A02C&quot;</span>, </a>
<a class="sourceLine" id="cb1228-20" title="20">  <span class="st">&quot;#FB9A99&quot;</span>, <span class="st">&quot;#E31A1C&quot;</span>, <span class="st">&quot;#FDBF6F&quot;</span>, <span class="st">&quot;#FF7F00&quot;</span>, <span class="st">&quot;#CAB2D6&quot;</span>, </a>
<a class="sourceLine" id="cb1228-21" title="21">  <span class="st">&quot;#6A3D9A&quot;</span>, <span class="st">&quot;#FFFF99&quot;</span>, <span class="st">&quot;#B15928&quot;</span>)</a>
<a class="sourceLine" id="cb1228-22" title="22"><span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq_along</span>(tempDayEachMonth)){</a>
<a class="sourceLine" id="cb1228-23" title="23">    <span class="kw">points</span>(<span class="dt">x =</span> hours, </a>
<a class="sourceLine" id="cb1228-24" title="24">        <span class="dt">y =</span> tempDayEachMonth[[i]][, <span class="dv">2</span>], </a>
<a class="sourceLine" id="cb1228-25" title="25">        <span class="dt">type =</span> <span class="st">&#39;l&#39;</span>, <span class="dt">col =</span> myColors[i], <span class="dt">lwd =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb1228-26" title="26">}</a>
<a class="sourceLine" id="cb1228-27" title="27"><span class="kw">legend</span>(</a>
<a class="sourceLine" id="cb1228-28" title="28">  <span class="st">&quot;topright&quot;</span>, </a>
<a class="sourceLine" id="cb1228-29" title="29">  <span class="dt">ncol =</span> <span class="dv">4</span>, </a>
<a class="sourceLine" id="cb1228-30" title="30">  <span class="dt">legend =</span> meses, </a>
<a class="sourceLine" id="cb1228-31" title="31">  <span class="dt">col =</span> myColors, </a>
<a class="sourceLine" id="cb1228-32" title="32">  <span class="dt">lty =</span> <span class="dv">1</span>, <span class="dt">lwd =</span> <span class="dv">2</span>, </a>
<a class="sourceLine" id="cb1228-33" title="33">  <span class="dt">cex =</span> <span class="fl">0.8</span>, <span class="dt">bg =</span> <span class="st">&quot;white&quot;</span>)</a></code></pre></div>
<p><img src="myRBook_FR_files/figure-html/041-studyCase-18-1.png" width="960" /></p>
<div class="sourceCode" id="cb1229"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1229-1" title="1"><span class="kw">par</span>(<span class="dt">mar =</span> <span class="kw">c</span>(<span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">1</span>)) <span class="co"># réduction des marges</span></a>
<a class="sourceLine" id="cb1229-2" title="2"><span class="kw">plot</span>(</a>
<a class="sourceLine" id="cb1229-3" title="3">  <span class="dt">x =</span> hours, </a>
<a class="sourceLine" id="cb1229-4" title="4">  <span class="dt">y =</span> tempDayEachMonth[[<span class="dv">1</span>]][, <span class="dv">2</span>], </a>
<a class="sourceLine" id="cb1229-5" title="5">  <span class="dt">type =</span> <span class="st">&#39;n&#39;</span>, </a>
<a class="sourceLine" id="cb1229-6" title="6">  <span class="dt">ylim =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">30</span>),</a>
<a class="sourceLine" id="cb1229-7" title="7">    <span class="dt">xlab =</span> <span class="st">&quot;&quot;</span>, </a>
<a class="sourceLine" id="cb1229-8" title="8">  <span class="dt">ylab =</span> <span class="st">&quot;Variation de température diurne (°C)&quot;</span>,</a>
<a class="sourceLine" id="cb1229-9" title="9">    <span class="dt">xaxt =</span> <span class="st">&quot;n&quot;</span>, </a>
<a class="sourceLine" id="cb1229-10" title="10">    <span class="dt">panel.first =</span> {</a>
<a class="sourceLine" id="cb1229-11" title="11">        <span class="kw">abline</span>(<span class="dt">v =</span> hours, <span class="dt">col =</span> <span class="st">&quot;gray&quot;</span>, <span class="dt">lty =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb1229-12" title="12">        <span class="kw">abline</span>(<span class="dt">h =</span> <span class="dv">0</span>, <span class="dt">lty =</span> <span class="dv">2</span>)  </a>
<a class="sourceLine" id="cb1229-13" title="13">    })</a>
<a class="sourceLine" id="cb1229-14" title="14"><span class="kw">axis</span>(</a>
<a class="sourceLine" id="cb1229-15" title="15">  <span class="dt">side =</span> <span class="dv">1</span>, </a>
<a class="sourceLine" id="cb1229-16" title="16">  <span class="dt">at =</span> hours, </a>
<a class="sourceLine" id="cb1229-17" title="17">  <span class="dt">labels =</span> tempHourMean[, <span class="dv">1</span>], </a>
<a class="sourceLine" id="cb1229-18" title="18">  <span class="dt">las =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb1229-19" title="19">myColors &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;#A6CEE3&quot;</span>, <span class="st">&quot;#1F78B4&quot;</span>, <span class="st">&quot;#B2DF8A&quot;</span>, <span class="st">&quot;#33A02C&quot;</span>, </a>
<a class="sourceLine" id="cb1229-20" title="20">  <span class="st">&quot;#FB9A99&quot;</span>, <span class="st">&quot;#E31A1C&quot;</span>, <span class="st">&quot;#FDBF6F&quot;</span>, <span class="st">&quot;#FF7F00&quot;</span>, <span class="st">&quot;#CAB2D6&quot;</span>, </a>
<a class="sourceLine" id="cb1229-21" title="21">  <span class="st">&quot;#6A3D9A&quot;</span>, <span class="st">&quot;#FFFF99&quot;</span>, <span class="st">&quot;#B15928&quot;</span>)</a>
<a class="sourceLine" id="cb1229-22" title="22"><span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq_along</span>(tempDayEachMonth)){</a>
<a class="sourceLine" id="cb1229-23" title="23">    <span class="kw">points</span>(</a>
<a class="sourceLine" id="cb1229-24" title="24">      <span class="dt">x =</span> hours, </a>
<a class="sourceLine" id="cb1229-25" title="25">        <span class="dt">y =</span> tempDayEachMonth[[i]][, <span class="dv">6</span>] <span class="op">-</span><span class="st"> </span></a>
<a class="sourceLine" id="cb1229-26" title="26"><span class="st">          </span>tempDayEachMonth[[i]][, <span class="dv">4</span>], </a>
<a class="sourceLine" id="cb1229-27" title="27">        <span class="dt">type =</span> <span class="st">&#39;l&#39;</span>, </a>
<a class="sourceLine" id="cb1229-28" title="28">        <span class="dt">col =</span> myColors[i], </a>
<a class="sourceLine" id="cb1229-29" title="29">        <span class="dt">lwd =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb1229-30" title="30">}</a>
<a class="sourceLine" id="cb1229-31" title="31"><span class="kw">legend</span>(</a>
<a class="sourceLine" id="cb1229-32" title="32">  <span class="st">&quot;topright&quot;</span>, </a>
<a class="sourceLine" id="cb1229-33" title="33">  <span class="dt">ncol =</span> <span class="dv">4</span>, </a>
<a class="sourceLine" id="cb1229-34" title="34">  <span class="dt">legend =</span> meses, </a>
<a class="sourceLine" id="cb1229-35" title="35">  <span class="dt">col =</span> myColors,</a>
<a class="sourceLine" id="cb1229-36" title="36">  <span class="dt">lty =</span> <span class="dv">1</span>, <span class="dt">lwd =</span> <span class="dv">2</span>, </a>
<a class="sourceLine" id="cb1229-37" title="37">  <span class="dt">cex =</span> <span class="fl">0.8</span>, <span class="dt">bg =</span> <span class="st">&quot;white&quot;</span>)</a></code></pre></div>
<p><img src="myRBook_FR_files/figure-html/041-studyCase-18-2.png" width="960" /></p>
<p>Nous pouvons aussi représenter les températures journalières avec des graphiques de type “ridgeline” et le package <code>ggplot2</code> (<a href="https://www.data-to-viz.com/graph/ridgeline.html" class="uri">https://www.data-to-viz.com/graph/ridgeline.html</a>).</p>
<div class="sourceCode" id="cb1230"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1230-1" title="1">pkgCheck &lt;-<span class="st"> </span><span class="cf">function</span>(x){ </a>
<a class="sourceLine" id="cb1230-2" title="2">    <span class="cf">if</span> (<span class="op">!</span><span class="kw">require</span>(x, <span class="dt">character.only =</span> <span class="ot">TRUE</span>)){</a>
<a class="sourceLine" id="cb1230-3" title="3">        <span class="kw">install.packages</span>(x, <span class="dt">dependencies =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb1230-4" title="4">        <span class="cf">if</span>(<span class="op">!</span><span class="kw">require</span>(x, <span class="dt">character.only =</span> <span class="ot">TRUE</span>)) {</a>
<a class="sourceLine" id="cb1230-5" title="5">            <span class="kw">stop</span>()</a>
<a class="sourceLine" id="cb1230-6" title="6">        }</a>
<a class="sourceLine" id="cb1230-7" title="7">    }</a>
<a class="sourceLine" id="cb1230-8" title="8">}</a>
<a class="sourceLine" id="cb1230-9" title="9"><span class="kw">pkgCheck</span>(<span class="st">&quot;ggplot2&quot;</span>)</a>
<a class="sourceLine" id="cb1230-10" title="10"><span class="kw">pkgCheck</span>(<span class="st">&quot;ggridges&quot;</span>)</a></code></pre></div>
<pre><code>## Loading required package: ggridges</code></pre>
<div class="sourceCode" id="cb1232"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1232-1" title="1"><span class="kw">pkgCheck</span>(<span class="st">&quot;viridis&quot;</span>)</a></code></pre></div>
<pre><code>## Loading required package: viridis</code></pre>
<pre><code>## Loading required package: viridisLite</code></pre>
<div class="sourceCode" id="cb1235"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1235-1" title="1">meanTemps &lt;-<span class="st"> </span><span class="kw">unlist</span>(<span class="kw">lapply</span>(tempDayEachMonth, <span class="st">&quot;[[&quot;</span>, <span class="dv">2</span>))</a>
<a class="sourceLine" id="cb1235-2" title="2">labelMonth &lt;-<span class="st"> </span><span class="kw">rep</span>(meses, <span class="dt">each =</span> <span class="dv">48</span>)</a>
<a class="sourceLine" id="cb1235-3" title="3">dfTemps &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">month =</span> labelMonth, <span class="dt">value =</span> meanTemps, </a>
<a class="sourceLine" id="cb1235-4" title="4">  <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb1235-5" title="5">dfTemps<span class="op">$</span>month &lt;-<span class="st"> </span><span class="kw">factor</span>(dfTemps<span class="op">$</span>month, <span class="dt">levels =</span> <span class="kw">rev</span>(meses))</a>
<a class="sourceLine" id="cb1235-6" title="6">p &lt;-<span class="st"> </span><span class="kw">ggplot</span>(</a>
<a class="sourceLine" id="cb1235-7" title="7">  <span class="dt">data =</span> dfTemps, </a>
<a class="sourceLine" id="cb1235-8" title="8">  <span class="kw">aes</span>(<span class="dt">y =</span> month, <span class="dt">x =</span> value,  <span class="dt">fill =</span> ..x..))</a>
<a class="sourceLine" id="cb1235-9" title="9">p &lt;-<span class="st"> </span>p <span class="op">+</span><span class="st"> </span><span class="kw">geom_density_ridges_gradient</span>(<span class="dt">stat =</span> <span class="st">&quot;binline&quot;</span>)</a>
<a class="sourceLine" id="cb1235-10" title="10">p &lt;-<span class="st"> </span>p <span class="op">+</span><span class="st"> </span><span class="kw">scale_fill_viridis</span>(</a>
<a class="sourceLine" id="cb1235-11" title="11">  <span class="dt">name =</span> <span class="st">&quot;Temp. [°C]&quot;</span>, <span class="dt">option =</span> <span class="st">&quot;C&quot;</span>)</a>
<a class="sourceLine" id="cb1235-12" title="12">p &lt;-<span class="st"> </span>p <span class="op">+</span><span class="st"> </span><span class="kw">xlab</span>(<span class="st">&quot;Temperature&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">ylab</span>(<span class="st">&quot;&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb1235-13" title="13"><span class="st">    </span><span class="kw">theme</span>(</a>
<a class="sourceLine" id="cb1235-14" title="14">      <span class="dt">legend.position=</span><span class="st">&quot;none&quot;</span>,</a>
<a class="sourceLine" id="cb1235-15" title="15">      <span class="dt">panel.spacing =</span> <span class="kw">unit</span>(<span class="fl">0.1</span>, <span class="st">&quot;lines&quot;</span>),</a>
<a class="sourceLine" id="cb1235-16" title="16">      <span class="dt">strip.text.x =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">8</span>)</a>
<a class="sourceLine" id="cb1235-17" title="17">    ) </a>
<a class="sourceLine" id="cb1235-18" title="18">p</a></code></pre></div>
<pre><code>## `stat_binline()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="myRBook_FR_files/figure-html/041-studyCase-19-1.png" width="960" /></p>

</div>
            </section>

          </div>
        </div>
      </div>
<a href="graph4.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="studyCase002.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/frareb/myRBook_FR/edit/master/041_studyCase.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": [["myRBook_FR.pdf", "PDF"], ["myRBook_FR.epub", "EPUB"], ["myRBook_FR.docx", "DOCX"]],
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
