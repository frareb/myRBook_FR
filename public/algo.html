<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title> 9 Algorithmique | Se former au logiciel R : initiation et perfectionnement</title>
  <meta name="description" content="Un guide pour acquérir les bases de la programmation avec R et conduire efficacement la gestion et l’analyse de ses données." />
  <meta name="generator" content="bookdown 0.16 and GitBook 2.6.7" />

  <meta property="og:title" content=" 9 Algorithmique | Se former au logiciel R : initiation et perfectionnement" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="myFigures/cover.png" />
  <meta property="og:description" content="Un guide pour acquérir les bases de la programmation avec R et conduire efficacement la gestion et l’analyse de ses données." />
  <meta name="github-repo" content="frareb/myRBook_FR" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content=" 9 Algorithmique | Se former au logiciel R : initiation et perfectionnement" />
  
  <meta name="twitter:description" content="Un guide pour acquérir les bases de la programmation avec R et conduire efficacement la gestion et l’analyse de ses données." />
  <meta name="twitter:image" content="myFigures/cover.png" />

<meta name="author" content="François Rebaudo" />


<meta name="date" content="2020-01-02" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="import.html"/>
<link rel="next" href="project.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.9.1/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.49.4/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.49.4/plotly-latest.min.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-124666641-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-124666641-2');
</script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="myStyle.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Se former au logiciel R : initiation et perfectionnement</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Préambule</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#remerciements"><i class="fa fa-check"></i><b>1.1</b> Remerciements</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#licence"><i class="fa fa-check"></i><b>1.2</b> Licence</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>2</b> Introduction</a><ul>
<li class="chapter" data-level="2.1" data-path="intro.html"><a href="intro.html#pourquoi-se-former-à-r"><i class="fa fa-check"></i><b>2.1</b> Pourquoi se former à R</a></li>
<li class="chapter" data-level="2.2" data-path="intro.html"><a href="intro.html#ce-livre"><i class="fa fa-check"></i><b>2.2</b> Ce livre</a></li>
<li class="chapter" data-level="2.3" data-path="intro.html"><a href="intro.html#lectures-complémentaires-en-français"><i class="fa fa-check"></i><b>2.3</b> Lectures complémentaires en français</a></li>
</ul></li>
<li class="part"><span><b>I Concepts de base</b></span></li>
<li class="chapter" data-level="3" data-path="premiersPas.html"><a href="premiersPas.html"><i class="fa fa-check"></i><b>3</b> Premiers pas</a><ul>
<li class="chapter" data-level="3.1" data-path="premiersPas.html"><a href="premiersPas.html#installation-de-r"><i class="fa fa-check"></i><b>3.1</b> Installation de R</a></li>
<li class="chapter" data-level="3.2" data-path="premiersPas.html"><a href="premiersPas.html#r-comme-calculatrice"><i class="fa fa-check"></i><b>3.2</b> R comme calculatrice</a><ul>
<li class="chapter" data-level="3.2.1" data-path="premiersPas.html"><a href="premiersPas.html#l011opari"><i class="fa fa-check"></i><b>3.2.1</b> Les opérateurs arithmétiques</a></li>
<li class="chapter" data-level="3.2.2" data-path="premiersPas.html"><a href="premiersPas.html#l011opcomp"><i class="fa fa-check"></i><b>3.2.2</b> Les opérateurs de comparaison</a></li>
<li class="chapter" data-level="3.2.3" data-path="premiersPas.html"><a href="premiersPas.html#l011oplog"><i class="fa fa-check"></i><b>3.2.3</b> Les opérateurs logiques</a></li>
<li class="chapter" data-level="3.2.4" data-path="premiersPas.html"><a href="premiersPas.html#aide-sur-les-opérateurs"><i class="fa fa-check"></i><b>3.2.4</b> Aide sur les opérateurs</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="premiersPas.html"><a href="premiersPas.html#l011object"><i class="fa fa-check"></i><b>3.3</b> La notion d’objet</a></li>
<li class="chapter" data-level="3.4" data-path="premiersPas.html"><a href="premiersPas.html#les-scripts"><i class="fa fa-check"></i><b>3.4</b> Les scripts</a><ul>
<li class="chapter" data-level="3.4.1" data-path="premiersPas.html"><a href="premiersPas.html#créer-un-script-et-le-documenter"><i class="fa fa-check"></i><b>3.4.1</b> Créer un script et le documenter</a></li>
<li class="chapter" data-level="3.4.2" data-path="premiersPas.html"><a href="premiersPas.html#exécuter-un-script"><i class="fa fa-check"></i><b>3.4.2</b> Exécuter un script</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="premiersPas.html"><a href="premiersPas.html#conclusion"><i class="fa fa-check"></i><b>3.5</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="IDE.html"><a href="IDE.html"><i class="fa fa-check"></i><b>4</b> Choisir un environnement de développement</a><ul>
<li class="chapter" data-level="4.1" data-path="IDE.html"><a href="IDE.html#editeurs-de-texte-et-environnement-de-développement"><i class="fa fa-check"></i><b>4.1</b> Editeurs de texte et environnement de développement</a></li>
<li class="chapter" data-level="4.2" data-path="IDE.html"><a href="IDE.html#rstudio"><i class="fa fa-check"></i><b>4.2</b> RStudio</a><ul>
<li class="chapter" data-level="4.2.1" data-path="IDE.html"><a href="IDE.html#installer-rstudio"><i class="fa fa-check"></i><b>4.2.1</b> Installer RStudio</a></li>
<li class="chapter" data-level="4.2.2" data-path="IDE.html"><a href="IDE.html#un-script-avec-rstudio"><i class="fa fa-check"></i><b>4.2.2</b> Un script avec RStudio</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="IDE.html"><a href="IDE.html#notepad-avec-npp2r"><i class="fa fa-check"></i><b>4.3</b> Notepad++ avec Npp2R</a><ul>
<li class="chapter" data-level="4.3.1" data-path="IDE.html"><a href="IDE.html#installer-notepad-pour-windows-uniquement"><i class="fa fa-check"></i><b>4.3.1</b> Installer Notepad++ (pour Windows uniquement)</a></li>
<li class="chapter" data-level="4.3.2" data-path="IDE.html"><a href="IDE.html#installer-npp2r"><i class="fa fa-check"></i><b>4.3.2</b> Installer Npp2R</a></li>
<li class="chapter" data-level="4.3.3" data-path="IDE.html"><a href="IDE.html#un-script-avec-notepad"><i class="fa fa-check"></i><b>4.3.3</b> Un script avec Notepad++</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="IDE.html"><a href="IDE.html#geany"><i class="fa fa-check"></i><b>4.4</b> Geany</a><ul>
<li class="chapter" data-level="4.4.1" data-path="IDE.html"><a href="IDE.html#installer-geany"><i class="fa fa-check"></i><b>4.4.1</b> Installer Geany</a></li>
<li class="chapter" data-level="4.4.2" data-path="IDE.html"><a href="IDE.html#un-script-avec-geany"><i class="fa fa-check"></i><b>4.4.2</b> Un script avec Geany</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="IDE.html"><a href="IDE.html#autres-solutions"><i class="fa fa-check"></i><b>4.5</b> Autres solutions</a></li>
<li class="chapter" data-level="4.6" data-path="IDE.html"><a href="IDE.html#conclusion-1"><i class="fa fa-check"></i><b>4.6</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="dataType1.html"><a href="dataType1.html"><i class="fa fa-check"></i><b>5</b> Les types de données</a><ul>
<li class="chapter" data-level="5.1" data-path="dataType1.html"><a href="dataType1.html#le-type-numeric"><i class="fa fa-check"></i><b>5.1</b> Le type <code>numeric</code></a></li>
<li class="chapter" data-level="5.2" data-path="dataType1.html"><a href="dataType1.html#le-type-character"><i class="fa fa-check"></i><b>5.2</b> Le type <code>character</code></a></li>
<li class="chapter" data-level="5.3" data-path="dataType1.html"><a href="dataType1.html#le-type-factor"><i class="fa fa-check"></i><b>5.3</b> Le type <code>factor</code></a></li>
<li class="chapter" data-level="5.4" data-path="dataType1.html"><a href="dataType1.html#l013logi"><i class="fa fa-check"></i><b>5.4</b> Le type <code>logical</code></a></li>
<li class="chapter" data-level="5.5" data-path="dataType1.html"><a href="dataType1.html#a-propos-de-na"><i class="fa fa-check"></i><b>5.5</b> A propos de <code>NA</code></a></li>
<li class="chapter" data-level="5.6" data-path="dataType1.html"><a href="dataType1.html#conclusion-2"><i class="fa fa-check"></i><b>5.6</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="dataType2.html"><a href="dataType2.html"><i class="fa fa-check"></i><b>6</b> Les conteneurs de données</a><ul>
<li class="chapter" data-level="6.1" data-path="dataType2.html"><a href="dataType2.html#l014vector"><i class="fa fa-check"></i><b>6.1</b> Le conteneur <code>vector</code></a><ul>
<li class="chapter" data-level="6.1.1" data-path="dataType2.html"><a href="dataType2.html#créer-un-vector"><i class="fa fa-check"></i><b>6.1.1</b> Créer un <code>vector</code></a></li>
<li class="chapter" data-level="6.1.2" data-path="dataType2.html"><a href="dataType2.html#opérations-sur-un-vector"><i class="fa fa-check"></i><b>6.1.2</b> Opérations sur un <code>vector</code></a></li>
<li class="chapter" data-level="6.1.3" data-path="dataType2.html"><a href="dataType2.html#accéder-aux-valeurs-dun-vector"><i class="fa fa-check"></i><b>6.1.3</b> Accéder aux valeurs d’un <code>vector</code></a></li>
<li class="chapter" data-level="6.1.4" data-path="dataType2.html"><a href="dataType2.html#nommer-les-éléments-dun-vector"><i class="fa fa-check"></i><b>6.1.4</b> Nommer les éléments d’un <code>vector</code></a></li>
<li class="chapter" data-level="6.1.5" data-path="dataType2.html"><a href="dataType2.html#modifier-les-éléments-dun-vector"><i class="fa fa-check"></i><b>6.1.5</b> Modifier les éléments d’un <code>vector</code></a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="dataType2.html"><a href="dataType2.html#l014list"><i class="fa fa-check"></i><b>6.2</b> Le conteneur <code>list</code></a><ul>
<li class="chapter" data-level="6.2.1" data-path="dataType2.html"><a href="dataType2.html#créer-une-list"><i class="fa fa-check"></i><b>6.2.1</b> Créer une <code>list</code></a></li>
<li class="chapter" data-level="6.2.2" data-path="dataType2.html"><a href="dataType2.html#accéder-aux-valeurs-dune-list"><i class="fa fa-check"></i><b>6.2.2</b> Accéder aux valeurs d’une <code>list</code></a></li>
<li class="chapter" data-level="6.2.3" data-path="dataType2.html"><a href="dataType2.html#modification-dune-list"><i class="fa fa-check"></i><b>6.2.3</b> Modification d’une <code>list</code></a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="dataType2.html"><a href="dataType2.html#l014dataframe"><i class="fa fa-check"></i><b>6.3</b> Le conteneur <code>data.frame</code></a><ul>
<li class="chapter" data-level="6.3.1" data-path="dataType2.html"><a href="dataType2.html#créer-un-data.frame"><i class="fa fa-check"></i><b>6.3.1</b> Créer un <code>data.frame</code></a></li>
<li class="chapter" data-level="6.3.2" data-path="dataType2.html"><a href="dataType2.html#accéder-aux-valeurs-dun-data.frame"><i class="fa fa-check"></i><b>6.3.2</b> Accéder aux valeurs d’un <code>data.frame</code></a></li>
<li class="chapter" data-level="6.3.3" data-path="dataType2.html"><a href="dataType2.html#modifier-un-data.frame"><i class="fa fa-check"></i><b>6.3.3</b> Modifier un <code>data.frame</code></a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="dataType2.html"><a href="dataType2.html#l014matrix"><i class="fa fa-check"></i><b>6.4</b> Le conteneur <code>matrix</code></a><ul>
<li class="chapter" data-level="6.4.1" data-path="dataType2.html"><a href="dataType2.html#créer-une-matrix"><i class="fa fa-check"></i><b>6.4.1</b> Créer une <code>matrix</code></a></li>
<li class="chapter" data-level="6.4.2" data-path="dataType2.html"><a href="dataType2.html#manipuler-et-faire-des-opérations-sur-une-matrix"><i class="fa fa-check"></i><b>6.4.2</b> Manipuler et faire des opérations sur une <code>matrix</code></a></li>
<li class="chapter" data-level="6.4.3" data-path="dataType2.html"><a href="dataType2.html#accéder-aux-éléments-dune-matrix"><i class="fa fa-check"></i><b>6.4.3</b> Accéder aux éléments d’une <code>matrix</code></a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="dataType2.html"><a href="dataType2.html#l014array"><i class="fa fa-check"></i><b>6.5</b> Le conteneur <code>array</code></a><ul>
<li class="chapter" data-level="6.5.1" data-path="dataType2.html"><a href="dataType2.html#créer-un-array"><i class="fa fa-check"></i><b>6.5.1</b> Créer un <code>array</code></a></li>
<li class="chapter" data-level="6.5.2" data-path="dataType2.html"><a href="dataType2.html#manipuler-un-array"><i class="fa fa-check"></i><b>6.5.2</b> Manipuler un <code>array</code></a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="dataType2.html"><a href="dataType2.html#conclusion-3"><i class="fa fa-check"></i><b>6.6</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="fonctions.html"><a href="fonctions.html"><i class="fa fa-check"></i><b>7</b> Les fonctions</a><ul>
<li class="chapter" data-level="7.1" data-path="fonctions.html"><a href="fonctions.html#quest-ce-quune-fonction"><i class="fa fa-check"></i><b>7.1</b> Qu’est-ce qu’une fonction</a></li>
<li class="chapter" data-level="7.2" data-path="fonctions.html"><a href="fonctions.html#l015mainfun"><i class="fa fa-check"></i><b>7.2</b> Les fonctions les plus courantes</a><ul>
<li class="chapter" data-level="7.2.1" data-path="fonctions.html"><a href="fonctions.html#laccès-à-la-documentation"><i class="fa fa-check"></i><b>7.2.1</b> L’accès à la documentation</a></li>
<li class="chapter" data-level="7.2.2" data-path="fonctions.html"><a href="fonctions.html#visualiser-les-données"><i class="fa fa-check"></i><b>7.2.2</b> Visualiser les données</a></li>
<li class="chapter" data-level="7.2.3" data-path="fonctions.html"><a href="fonctions.html#manipuler-les-données"><i class="fa fa-check"></i><b>7.2.3</b> Manipuler les données</a></li>
<li class="chapter" data-level="7.2.4" data-path="fonctions.html"><a href="fonctions.html#fonctions-mathématiques"><i class="fa fa-check"></i><b>7.2.4</b> Fonctions mathématiques</a></li>
<li class="chapter" data-level="7.2.5" data-path="fonctions.html"><a href="fonctions.html#statistiques-descriptives"><i class="fa fa-check"></i><b>7.2.5</b> Statistiques descriptives</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="fonctions.html"><a href="fonctions.html#autres-fonctions-utiles"><i class="fa fa-check"></i><b>7.3</b> Autres fonctions utiles</a><ul>
<li class="chapter" data-level="7.3.1" data-path="fonctions.html"><a href="fonctions.html#l015seqalong"><i class="fa fa-check"></i><b>7.3.1</b> <code>seq_along()</code></a></li>
<li class="chapter" data-level="7.3.2" data-path="fonctions.html"><a href="fonctions.html#l0152points"><i class="fa fa-check"></i><b>7.3.2</b> <code>:</code></a></li>
<li class="chapter" data-level="7.3.3" data-path="fonctions.html"><a href="fonctions.html#l015rep"><i class="fa fa-check"></i><b>7.3.3</b> <code>rep()</code></a></li>
<li class="chapter" data-level="7.3.4" data-path="fonctions.html"><a href="fonctions.html#l015seq"><i class="fa fa-check"></i><b>7.3.4</b> <code>seq()</code></a></li>
<li class="chapter" data-level="7.3.5" data-path="fonctions.html"><a href="fonctions.html#l015getwd"><i class="fa fa-check"></i><b>7.3.5</b> <code>getwd()</code></a></li>
<li class="chapter" data-level="7.3.6" data-path="fonctions.html"><a href="fonctions.html#l015setwd"><i class="fa fa-check"></i><b>7.3.6</b> <code>setwd()</code></a></li>
<li class="chapter" data-level="7.3.7" data-path="fonctions.html"><a href="fonctions.html#l015listfiles"><i class="fa fa-check"></i><b>7.3.7</b> <code>list.files()</code></a></li>
<li class="chapter" data-level="7.3.8" data-path="fonctions.html"><a href="fonctions.html#l015ls"><i class="fa fa-check"></i><b>7.3.8</b> <code>ls()</code></a></li>
<li class="chapter" data-level="7.3.9" data-path="fonctions.html"><a href="fonctions.html#l015rm"><i class="fa fa-check"></i><b>7.3.9</b> <code>rm()</code></a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="fonctions.html"><a href="fonctions.html#quelques-exercices"><i class="fa fa-check"></i><b>7.4</b> Quelques exercices</a><ul>
<li class="chapter" data-level="7.4.1" data-path="fonctions.html"><a href="fonctions.html#séquences"><i class="fa fa-check"></i><b>7.4.1</b> Séquences</a></li>
<li class="chapter" data-level="7.4.2" data-path="fonctions.html"><a href="fonctions.html#statistiques-descriptives-1"><i class="fa fa-check"></i><b>7.4.2</b> Statistiques descriptives</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="fonctions.html"><a href="fonctions.html#l015function"><i class="fa fa-check"></i><b>7.5</b> Ecrire une fonction</a></li>
<li class="chapter" data-level="7.6" data-path="fonctions.html"><a href="fonctions.html#autres-fonctions-développées-par-la-communauté-des-utilisateurs-les-packages"><i class="fa fa-check"></i><b>7.6</b> Autres fonctions développées par la communauté des utilisateurs : les packages</a><ul>
<li class="chapter" data-level="7.6.1" data-path="fonctions.html"><a href="fonctions.html#installer-un-package"><i class="fa fa-check"></i><b>7.6.1</b> Installer un package</a></li>
<li class="chapter" data-level="7.6.2" data-path="fonctions.html"><a href="fonctions.html#charger-un-package"><i class="fa fa-check"></i><b>7.6.2</b> Charger un package</a></li>
<li class="chapter" data-level="7.6.3" data-path="fonctions.html"><a href="fonctions.html#portabilité-du-code"><i class="fa fa-check"></i><b>7.6.3</b> Portabilité du code</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="fonctions.html"><a href="fonctions.html#conclusion-4"><i class="fa fa-check"></i><b>7.7</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="import.html"><a href="import.html"><i class="fa fa-check"></i><b>8</b> Importer et exporter des données</a><ul>
<li class="chapter" data-level="8.1" data-path="import.html"><a href="import.html#l016read"><i class="fa fa-check"></i><b>8.1</b> Lire des données depuis un fichier</a><ul>
<li class="chapter" data-level="8.1.1" data-path="import.html"><a href="import.html#l016transfo"><i class="fa fa-check"></i><b>8.1.1</b> Transformer ses données au format TXT ou CSV</a></li>
<li class="chapter" data-level="8.1.2" data-path="import.html"><a href="import.html#l016readCSV"><i class="fa fa-check"></i><b>8.1.2</b> Lire un fichier CSV</a></li>
<li class="chapter" data-level="8.1.3" data-path="import.html"><a href="import.html#l016readTXT"><i class="fa fa-check"></i><b>8.1.3</b> Lire un fichier texte</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="import.html"><a href="import.html#l016save"><i class="fa fa-check"></i><b>8.2</b> Exporter ou charger des données pour R</a></li>
<li class="chapter" data-level="8.3" data-path="import.html"><a href="import.html#l016write"><i class="fa fa-check"></i><b>8.3</b> Exporter des données</a></li>
<li class="chapter" data-level="8.4" data-path="import.html"><a href="import.html#conclusion-5"><i class="fa fa-check"></i><b>8.4</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="algo.html"><a href="algo.html"><i class="fa fa-check"></i><b>9</b> Algorithmique</a><ul>
<li class="chapter" data-level="9.1" data-path="algo.html"><a href="algo.html#l17if"><i class="fa fa-check"></i><b>9.1</b> Tests logiques avec <code>if</code></a></li>
<li class="chapter" data-level="9.2" data-path="algo.html"><a href="algo.html#l17switch"><i class="fa fa-check"></i><b>9.2</b> Tests logiques avec <code>switch</code></a></li>
<li class="chapter" data-level="9.3" data-path="algo.html"><a href="algo.html#l17for"><i class="fa fa-check"></i><b>9.3</b> La boucle <code>for</code></a></li>
<li class="chapter" data-level="9.4" data-path="algo.html"><a href="algo.html#l17while"><i class="fa fa-check"></i><b>9.4</b> La boucle <code>while</code></a></li>
<li class="chapter" data-level="9.5" data-path="algo.html"><a href="algo.html#l17repeat"><i class="fa fa-check"></i><b>9.5</b> La boucle <code>repeat</code></a></li>
<li class="chapter" data-level="9.6" data-path="algo.html"><a href="algo.html#l17spe"><i class="fa fa-check"></i><b>9.6</b> <code>next</code> et <code>break</code></a></li>
<li class="chapter" data-level="9.7" data-path="algo.html"><a href="algo.html#l17applyfamily"><i class="fa fa-check"></i><b>9.7</b> Les boucles de la famille <code>apply</code></a><ul>
<li class="chapter" data-level="9.7.1" data-path="algo.html"><a href="algo.html#l17apply"><i class="fa fa-check"></i><b>9.7.1</b> <code>apply</code></a></li>
<li class="chapter" data-level="9.7.2" data-path="algo.html"><a href="algo.html#l17sapply"><i class="fa fa-check"></i><b>9.7.2</b> <code>lapply</code></a></li>
<li class="chapter" data-level="9.7.3" data-path="algo.html"><a href="algo.html#l17lapply"><i class="fa fa-check"></i><b>9.7.3</b> <code>sapply</code></a></li>
<li class="chapter" data-level="9.7.4" data-path="algo.html"><a href="algo.html#l17tapply"><i class="fa fa-check"></i><b>9.7.4</b> <code>tapply</code></a></li>
<li class="chapter" data-level="9.7.5" data-path="algo.html"><a href="algo.html#l17mapply"><i class="fa fa-check"></i><b>9.7.5</b> <code>mapply</code></a></li>
</ul></li>
<li class="chapter" data-level="9.8" data-path="algo.html"><a href="algo.html#conclusion-6"><i class="fa fa-check"></i><b>9.8</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="project.html"><a href="project.html"><i class="fa fa-check"></i><b>10</b> Gestion d’un projet avec R</a><ul>
<li class="chapter" data-level="10.1" data-path="project.html"><a href="project.html#gestion-des-fichiers-et-des-répertoires-de-travail"><i class="fa fa-check"></i><b>10.1</b> Gestion des fichiers et des répertoires de travail</a></li>
<li class="chapter" data-level="10.2" data-path="project.html"><a href="project.html#gestion-des-versions-de-script"><i class="fa fa-check"></i><b>10.2</b> Gestion des versions de script</a></li>
<li class="chapter" data-level="10.3" data-path="project.html"><a href="project.html#gestion-de-la-documentation"><i class="fa fa-check"></i><b>10.3</b> Gestion de la documentation</a></li>
<li class="chapter" data-level="10.4" data-path="project.html"><a href="project.html#conclusion-7"><i class="fa fa-check"></i><b>10.4</b> Conclusion</a></li>
</ul></li>
<li class="part"><span><b>II Les graphiques</b></span></li>
<li class="chapter" data-level="11" data-path="graph1.html"><a href="graph1.html"><i class="fa fa-check"></i><b>11</b> Graphiques simples</a><ul>
<li class="chapter" data-level="11.1" data-path="graph1.html"><a href="graph1.html#graph1plot"><i class="fa fa-check"></i><b>11.1</b> <code>plot</code></a></li>
<li class="chapter" data-level="11.2" data-path="graph1.html"><a href="graph1.html#graph1hist"><i class="fa fa-check"></i><b>11.2</b> <code>hist</code></a></li>
<li class="chapter" data-level="11.3" data-path="graph1.html"><a href="graph1.html#graph1barplot"><i class="fa fa-check"></i><b>11.3</b> <code>barplot</code></a></li>
<li class="chapter" data-level="11.4" data-path="graph1.html"><a href="graph1.html#graph1boxplot"><i class="fa fa-check"></i><b>11.4</b> <code>boxplot</code></a></li>
<li class="chapter" data-level="11.5" data-path="graph1.html"><a href="graph1.html#autres-graphiques"><i class="fa fa-check"></i><b>11.5</b> Autres graphiques</a></li>
<li class="chapter" data-level="11.6" data-path="graph1.html"><a href="graph1.html#conclusion-8"><i class="fa fa-check"></i><b>11.6</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="graph2.html"><a href="graph2.html"><i class="fa fa-check"></i><b>12</b> La gestion des couleurs</a><ul>
<li class="chapter" data-level="12.1" data-path="graph2.html"><a href="graph2.html#colors"><i class="fa fa-check"></i><b>12.1</b> <code>colors()</code></a></li>
<li class="chapter" data-level="12.2" data-path="graph2.html"><a href="graph2.html#rgb"><i class="fa fa-check"></i><b>12.2</b> <code>rgb()</code></a></li>
<li class="chapter" data-level="12.3" data-path="graph2.html"><a href="graph2.html#palettes"><i class="fa fa-check"></i><b>12.3</b> Palettes</a></li>
<li class="chapter" data-level="12.4" data-path="graph2.html"><a href="graph2.html#conclusion-9"><i class="fa fa-check"></i><b>12.4</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="graph3.html"><a href="graph3.html"><i class="fa fa-check"></i><b>13</b> Les packages graphiques</a><ul>
<li class="chapter" data-level="13.1" data-path="graph3.html"><a href="graph3.html#les-packages-de-palettes"><i class="fa fa-check"></i><b>13.1</b> les packages de palettes</a><ul>
<li class="chapter" data-level="13.1.1" data-path="graph3.html"><a href="graph3.html#rcolorbrewer"><i class="fa fa-check"></i><b>13.1.1</b> <code>RColorBrewer</code></a></li>
<li class="chapter" data-level="13.1.2" data-path="graph3.html"><a href="graph3.html#palettesforr"><i class="fa fa-check"></i><b>13.1.2</b> <code>palettesForR</code></a></li>
<li class="chapter" data-level="13.1.3" data-path="graph3.html"><a href="graph3.html#les-autres-packages"><i class="fa fa-check"></i><b>13.1.3</b> Les autres packages</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="graph3.html"><a href="graph3.html#ggplot2-package"><i class="fa fa-check"></i><b>13.2</b> ggplot2 package</a></li>
<li class="chapter" data-level="13.3" data-path="graph3.html"><a href="graph3.html#les-graphiques-interactifs-et-dynamiques-avec-plotly"><i class="fa fa-check"></i><b>13.3</b> Les graphiques interactifs et dynamiques avec <code>Plotly</code></a></li>
<li class="chapter" data-level="13.4" data-path="graph3.html"><a href="graph3.html#conclusion-10"><i class="fa fa-check"></i><b>13.4</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="graph4.html"><a href="graph4.html"><i class="fa fa-check"></i><b>14</b> Du graphique à la figure dans un article scientifique</a><ul>
<li class="chapter" data-level="14.1" data-path="graph4.html"><a href="graph4.html#inkscape"><i class="fa fa-check"></i><b>14.1</b> Inkscape</a></li>
<li class="chapter" data-level="14.2" data-path="graph4.html"><a href="graph4.html#the-gimp"><i class="fa fa-check"></i><b>14.2</b> The Gimp</a></li>
<li class="chapter" data-level="14.3" data-path="graph4.html"><a href="graph4.html#table-de-référence"><i class="fa fa-check"></i><b>14.3</b> Table de référence</a></li>
</ul></li>
<li class="part"><span><b>III Etude de cas</b></span></li>
<li class="chapter" data-level="15" data-path="studyCase001.html"><a href="studyCase001.html"><i class="fa fa-check"></i><b>15</b> Analyser des données de datalogger de température</a></li>
<li class="chapter" data-level="16" data-path="studyCase002.html"><a href="studyCase002.html"><i class="fa fa-check"></i><b>16</b> Obtenir le numéro WOS d’un article scientifique à partir de son numéro DOI</a></li>
<li class="divider"></li>
<li><a href="http://ird.fr/" target="blank"><img src="myLogos/logo_IRD_2016_LONGUEUR_SP_COUL.png" alt="IRD" width="100"></a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Se former au logiciel R : initiation et perfectionnement</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="algo" class="section level1">
<h1><span class="header-section-number"> 9</span> Algorithmique</h1>
<div id="l17if" class="section level2">
<h2><span class="header-section-number">9.1</span> Tests logiques avec <code>if</code></h2>
<p>Si nous voulons effectuer une opération différente en fonction d’une condition, nous pouvons mettre en place un test logique du type <strong>SI</strong> <em>ceci</em> <strong>ALORS</strong> <em>faire cela</em> <strong>SINON</strong> <em>faire cela</em>. Avec R cela va se traduire par la fonction <code>if(cond) cons.expr else alt.expr</code> comme indiqué dans l’aide de la fonction.</p>
<div class="sourceCode" id="cb991"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb991-1" title="1">myVar &lt;-<span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb991-2" title="2"><span class="cf">if</span>(myVar <span class="op">&lt;</span><span class="st"> </span><span class="dv">3</span>) <span class="kw">print</span>(<span class="st">&quot;myVar &lt; 3&quot;</span>)</a></code></pre></div>
<pre><code>## [1] &quot;myVar &lt; 3&quot;</code></pre>
<div class="sourceCode" id="cb993"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb993-1" title="1"><span class="cf">if</span>(myVar <span class="op">&lt;</span><span class="st"> </span><span class="dv">3</span>) <span class="kw">print</span>(<span class="st">&quot;myVar &lt; 3&quot;</span>) <span class="cf">else</span> <span class="kw">print</span>(<span class="st">&quot;myVar &gt; 3&quot;</span>)</a></code></pre></div>
<pre><code>## [1] &quot;myVar &lt; 3&quot;</code></pre>
<p>Lorsque il y a plusieurs lignes de codes à exécuter en fonction du test logique, ou simplement pour rendre le code plus facile à lire, nous allons utiliser plusieurs lignes avec les acolades <code>{}</code> et en utilisant l’indentation.</p>
<div class="sourceCode" id="cb995"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb995-1" title="1">myVar &lt;-<span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb995-2" title="2">myResult &lt;-<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb995-3" title="3"><span class="cf">if</span>(myVar <span class="op">&lt;</span><span class="st"> </span><span class="dv">3</span>){</a>
<a class="sourceLine" id="cb995-4" title="4">  <span class="kw">print</span>(<span class="st">&quot;myVar &lt; 3&quot;</span>)</a>
<a class="sourceLine" id="cb995-5" title="5">  myResult &lt;-<span class="st"> </span>myVar <span class="op">+</span><span class="st"> </span><span class="dv">10</span></a>
<a class="sourceLine" id="cb995-6" title="6">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb995-7" title="7">  <span class="kw">print</span>(<span class="st">&quot;myVar &gt; 3&quot;</span>)</a>
<a class="sourceLine" id="cb995-8" title="8">  myResult &lt;-<span class="st"> </span>myVar <span class="op">-</span><span class="st"> </span><span class="dv">10</span></a>
<a class="sourceLine" id="cb995-9" title="9">}</a></code></pre></div>
<pre><code>## [1] &quot;myVar &lt; 3&quot;</code></pre>
<div class="sourceCode" id="cb997"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb997-1" title="1"><span class="kw">print</span>(myResult)</a></code></pre></div>
<pre><code>## [1] 12</code></pre>
<p>Dans cet exemple nous définissons une variable <code>myVar</code>. Si cette variable est inférieure à 3 alors la variable <code>myResult</code> prend comme valeur <code>myVar + 10</code>, et dans le cas contraire <code>myResult</code> prend comme valeur <code>myVar - 10</code>.</p>
<p>Nous avions déjà vu l’utilisation du test logique <code>if</code> dans le <a href="fonctions.html#l015function">chapitre sur les fonctions</a>. Nous avions alors testé si la variable entrée comme argument dans notre fonction était bien de type <code>character</code>.</p>
<div class="sourceCode" id="cb999"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb999-1" title="1">myVar &lt;-<span class="st"> &quot;qwerty&quot;</span></a>
<a class="sourceLine" id="cb999-2" title="2"><span class="cf">if</span>(<span class="kw">is.character</span>(myVar)){</a>
<a class="sourceLine" id="cb999-3" title="3">  <span class="kw">print</span>(<span class="st">&quot;ok&quot;</span>)</a>
<a class="sourceLine" id="cb999-4" title="4">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb999-5" title="5">  <span class="kw">print</span>(<span class="st">&quot;error&quot;</span>)</a>
<a class="sourceLine" id="cb999-6" title="6">}</a></code></pre></div>
<pre><code>## [1] &quot;ok&quot;</code></pre>
<p>Nous pouvons aussi imbriquer les tests logiques les uns dans les autres.</p>
<div class="sourceCode" id="cb1001"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1001-1" title="1">myVar &lt;-<span class="st"> </span><span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb1001-2" title="2"><span class="cf">if</span>(<span class="kw">is.character</span>(myVar)){</a>
<a class="sourceLine" id="cb1001-3" title="3">  <span class="kw">print</span>(<span class="st">&quot;myVar: character&quot;</span>)</a>
<a class="sourceLine" id="cb1001-4" title="4">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb1001-5" title="5">  <span class="cf">if</span>(<span class="kw">is.numeric</span>(myVar)){</a>
<a class="sourceLine" id="cb1001-6" title="6">    <span class="kw">print</span>(<span class="st">&quot;myVar: numeric&quot;</span>)</a>
<a class="sourceLine" id="cb1001-7" title="7">  } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb1001-8" title="8">    <span class="cf">if</span>(<span class="kw">is.logical</span>(myVar)){</a>
<a class="sourceLine" id="cb1001-9" title="9">      <span class="kw">print</span>(<span class="st">&quot;myVar: logical&quot;</span>)</a>
<a class="sourceLine" id="cb1001-10" title="10">    } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb1001-11" title="11">      <span class="kw">print</span>(<span class="st">&quot;myVar: ...&quot;</span>)</a>
<a class="sourceLine" id="cb1001-12" title="12">    }</a>
<a class="sourceLine" id="cb1001-13" title="13">  }</a>
<a class="sourceLine" id="cb1001-14" title="14">}</a></code></pre></div>
<pre><code>## [1] &quot;myVar: logical&quot;</code></pre>
<p>Il est aussi possible de stipuler plusieurs conditions, comme nous l’avons vu lors du chapitre sur les <a href="premiersPas.html#l011opcomp">opérateurs de comparaison</a>.</p>
<div class="sourceCode" id="cb1003"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1003-1" title="1">myVar &lt;-<span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb1003-2" title="2"><span class="cf">if</span>(myVar <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>myVar <span class="op">&lt;</span><span class="st"> </span><span class="dv">50</span>){</a>
<a class="sourceLine" id="cb1003-3" title="3">  <span class="kw">print</span>(<span class="st">&quot;ok&quot;</span>)</a>
<a class="sourceLine" id="cb1003-4" title="4">}</a></code></pre></div>
<pre><code>## [1] &quot;ok&quot;</code></pre>
<p>Dans cet exemple <code>myVar</code> est au format <code>numeric</code> donc la première condition (<code>&gt;1</code>), et la seconde condition (<code>&lt;50</code>) sont toutes les deux vérifiables. Par contre si nous affectons une variable de type <code>character</code> à <code>myVar</code> alors R va transformer 0 et 10 en objets de type <code>character</code> et tester si <code>myVar &gt; "1"</code> puis si <code>myVar &lt; "50"</code> en se basant sur un tri par ordre alphabétique. Dans l’exemple suivant <code>"azerty"</code> n’est pas situé par ordre alphabétique entre <code>"1"</code> et <code>"50"</code>, par contre c’est le cas de <code>"2azerty"</code>.</p>
<div class="sourceCode" id="cb1005"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1005-1" title="1">myVar &lt;-<span class="st"> &quot;azerty&quot;</span></a>
<a class="sourceLine" id="cb1005-2" title="2">limInit &lt;-<span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb1005-3" title="3">limEnd &lt;-<span class="st"> </span><span class="dv">50</span></a>
<a class="sourceLine" id="cb1005-4" title="4"><span class="cf">if</span>(myVar <span class="op">&gt;</span><span class="st"> </span>limInit <span class="op">&amp;</span><span class="st"> </span>myVar <span class="op">&lt;</span><span class="st"> </span>limEnd){</a>
<a class="sourceLine" id="cb1005-5" title="5">  <span class="kw">print</span>(<span class="kw">paste0</span>(myVar, <span class="st">&quot; is between &quot;</span>, limInit, <span class="st">&quot; and &quot;</span>, limEnd, <span class="st">&quot;.&quot;</span>))</a>
<a class="sourceLine" id="cb1005-6" title="6">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb1005-7" title="7">  <span class="kw">print</span>(<span class="kw">paste0</span>(myVar, <span class="st">&quot; not between &quot;</span>, limInit, <span class="st">&quot; and &quot;</span>, limEnd, <span class="st">&quot;.&quot;</span>))</a>
<a class="sourceLine" id="cb1005-8" title="8">}</a></code></pre></div>
<pre><code>## [1] &quot;azerty not between 1 and 50.&quot;</code></pre>
<div class="sourceCode" id="cb1007"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1007-1" title="1">myVar &lt;-<span class="st"> &quot;2azerty&quot;</span></a>
<a class="sourceLine" id="cb1007-2" title="2"><span class="cf">if</span>(myVar <span class="op">&gt;</span><span class="st"> </span>limInit <span class="op">&amp;</span><span class="st"> </span>myVar <span class="op">&lt;</span><span class="st"> </span>limEnd){</a>
<a class="sourceLine" id="cb1007-3" title="3">  <span class="kw">print</span>(<span class="kw">paste0</span>(myVar, <span class="st">&quot; is between &quot;</span>, limInit, <span class="st">&quot; and &quot;</span>, limEnd, <span class="st">&quot;.&quot;</span>))</a>
<a class="sourceLine" id="cb1007-4" title="4">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb1007-5" title="5">  <span class="kw">print</span>(<span class="kw">paste0</span>(myVar, <span class="st">&quot; not between &quot;</span>, limInit, <span class="st">&quot; and &quot;</span>, limEnd, <span class="st">&quot;.&quot;</span>))</a>
<a class="sourceLine" id="cb1007-6" title="6">}</a></code></pre></div>
<pre><code>## [1] &quot;2azerty is between 1 and 50.&quot;</code></pre>
<p>Donc ce que nous voudrions faire est de tester si <code>myVar</code> est bien au format <code>numeric</code> puis uniquement si c’est le cas de tester les conditions suivantes.</p>
<div class="sourceCode" id="cb1009"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1009-1" title="1">myVar &lt;-<span class="st"> &quot;2azerty&quot;</span></a>
<a class="sourceLine" id="cb1009-2" title="2"><span class="cf">if</span>(<span class="kw">is.numeric</span>(myVar)){</a>
<a class="sourceLine" id="cb1009-3" title="3">  <span class="cf">if</span>(myVar <span class="op">&gt;</span><span class="st"> </span>limInit <span class="op">&amp;</span><span class="st"> </span>myVar <span class="op">&lt;</span><span class="st"> </span>limEnd){</a>
<a class="sourceLine" id="cb1009-4" title="4">    <span class="kw">print</span>(<span class="kw">paste0</span>(myVar, <span class="st">&quot; is between &quot;</span>, limInit, <span class="st">&quot; and &quot;</span>, limEnd, <span class="st">&quot;.&quot;</span>))</a>
<a class="sourceLine" id="cb1009-5" title="5">  } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb1009-6" title="6">    <span class="kw">print</span>(<span class="kw">paste0</span>(myVar, <span class="st">&quot; not between &quot;</span>, limInit, <span class="st">&quot; and &quot;</span>, limEnd, <span class="st">&quot;.&quot;</span>))</a>
<a class="sourceLine" id="cb1009-7" title="7">  }</a>
<a class="sourceLine" id="cb1009-8" title="8">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb1009-9" title="9">  <span class="kw">print</span>(<span class="kw">paste0</span>(<span class="st">&quot;Object &quot;</span>, myVar, <span class="st">&quot; is not numeric&quot;</span>))</a>
<a class="sourceLine" id="cb1009-10" title="10">}</a></code></pre></div>
<pre><code>## [1] &quot;Object 2azerty is not numeric&quot;</code></pre>
<p>Parfois, nous pouvons avoir besoin de tester une première condition puis une seconde condition uniquement si la première se vérifie dans un même test. Par exemple, pour un site nous voudrions savoir si il y a une seule espèces et tester si son abondance est supérieure à 10. Imaginons un jeu de données avec sous forme de vecteur les abondances. Nous allons tester le nombre d’espèces avec la fonction <a href="fonctions.html#l015length"><code>length()</code></a>.</p>
<div class="sourceCode" id="cb1011"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1011-1" title="1">mySpecies &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">15</span>, <span class="dv">14</span>, <span class="dv">20</span>, <span class="dv">12</span>)</a>
<a class="sourceLine" id="cb1011-2" title="2"><span class="cf">if</span>(<span class="kw">length</span>(mySpecies) <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>mySpecies <span class="op">&gt;</span><span class="st"> </span><span class="dv">10</span>){</a>
<a class="sourceLine" id="cb1011-3" title="3">  <span class="kw">print</span>(<span class="st">&quot;ok!&quot;</span>)</a>
<a class="sourceLine" id="cb1011-4" title="4">}</a>
<a class="sourceLine" id="cb1011-5" title="5"><span class="co">## Warning message:</span></a>
<a class="sourceLine" id="cb1011-6" title="6"><span class="co">## In if (length(mySpecies) == 1 &amp; mySpecies &gt; 10) { :</span></a>
<a class="sourceLine" id="cb1011-7" title="7"><span class="co">##   the condition has length &gt; 1 and only the first element will be used</span></a></code></pre></div>
<p>R renvoie une erreur car il ne peut pas au sein d’un test logique avec <code>if()</code> vérifier la seconde condition. En effet, <code>mySpecies &gt; 10</code> renvoie <code>TRUE TRUE TRUE TRUE TRUE</code>. Nous pouvons séparer le code en deux conditions :</p>
<div class="sourceCode" id="cb1012"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1012-1" title="1">mySpecies &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">15</span>, <span class="dv">14</span>, <span class="dv">20</span>, <span class="dv">12</span>)</a>
<a class="sourceLine" id="cb1012-2" title="2"><span class="cf">if</span>(<span class="kw">length</span>(mySpecies) <span class="op">==</span><span class="st"> </span><span class="dv">1</span>){</a>
<a class="sourceLine" id="cb1012-3" title="3">  <span class="cf">if</span>(mySpecies <span class="op">&gt;</span><span class="st"> </span><span class="dv">10</span>){</a>
<a class="sourceLine" id="cb1012-4" title="4">    <span class="kw">print</span>(<span class="st">&quot;ok!&quot;</span>)</a>
<a class="sourceLine" id="cb1012-5" title="5">  }</a>
<a class="sourceLine" id="cb1012-6" title="6">}</a></code></pre></div>
<p>Une alternative plus élégante consiste à spécifier à R de vérifier la seconde condition uniquement si la première est vraie. Pour cela nous pouvons utiliser <code>&amp;&amp;</code> à la place de <code>&amp;</code>.</p>
<div class="sourceCode" id="cb1013"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1013-1" title="1">mySpecies &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">15</span>, <span class="dv">14</span>, <span class="dv">20</span>, <span class="dv">12</span>)</a>
<a class="sourceLine" id="cb1013-2" title="2"><span class="cf">if</span>(<span class="kw">length</span>(mySpecies) <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">&amp;&amp;</span><span class="st"> </span>mySpecies <span class="op">&gt;</span><span class="st"> </span><span class="dv">10</span>){</a>
<a class="sourceLine" id="cb1013-3" title="3">  <span class="kw">print</span>(<span class="st">&quot;ok!&quot;</span>)</a>
<a class="sourceLine" id="cb1013-4" title="4">}</a>
<a class="sourceLine" id="cb1013-5" title="5">mySpecies &lt;-<span class="st"> </span><span class="dv">15</span></a>
<a class="sourceLine" id="cb1013-6" title="6"><span class="cf">if</span>(<span class="kw">length</span>(mySpecies) <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">&amp;&amp;</span><span class="st"> </span>mySpecies <span class="op">&gt;</span><span class="st"> </span><span class="dv">10</span>){</a>
<a class="sourceLine" id="cb1013-7" title="7">  <span class="kw">print</span>(<span class="st">&quot;ok!&quot;</span>)</a>
<a class="sourceLine" id="cb1013-8" title="8">}</a></code></pre></div>
<pre><code>## [1] &quot;ok!&quot;</code></pre>
<div class="sourceCode" id="cb1015"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1015-1" title="1">mySpecies &lt;-<span class="st"> </span><span class="dv">5</span></a>
<a class="sourceLine" id="cb1015-2" title="2"><span class="cf">if</span>(<span class="kw">length</span>(mySpecies) <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">&amp;&amp;</span><span class="st"> </span>mySpecies <span class="op">&gt;</span><span class="st"> </span><span class="dv">10</span>){</a>
<a class="sourceLine" id="cb1015-3" title="3">  <span class="kw">print</span>(<span class="st">&quot;ok!&quot;</span>)</a>
<a class="sourceLine" id="cb1015-4" title="4">}</a></code></pre></div>
<p>Avec <code>&amp;</code> R va vérifier toutes les conditions, et avec <code>&amp;&amp;</code> R va prendre chaque condition l’une après l’autre et poursuivre uniquement si elle se vérifie. Cela peut paraître anecdotique mais il est bon de connaître la différence entre <code>&amp;</code> et <code>&amp;&amp;</code> car nous les rencontrons souvent dans les codes disponibles sur Internet ou dans les packages.</p>
</div>
<div id="l17switch" class="section level2">
<h2><span class="header-section-number">9.2</span> Tests logiques avec <code>switch</code></h2>
<p>La fonction <code>switch()</code> est une variante de <code>if()</code> qui est utile lorsque nous avons de nombreuses options possibles sur une même expression. L’exemple suivant montre comment transformer un code utilisant <code>if()</code> en <code>switch()</code>.</p>
<div class="sourceCode" id="cb1016"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1016-1" title="1">x &lt;-<span class="st"> &quot;aa&quot;</span></a>
<a class="sourceLine" id="cb1016-2" title="2"><span class="cf">if</span>(x <span class="op">==</span><span class="st"> &quot;a&quot;</span>){</a>
<a class="sourceLine" id="cb1016-3" title="3">  result &lt;-<span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb1016-4" title="4">}</a>
<a class="sourceLine" id="cb1016-5" title="5"><span class="cf">if</span>(x <span class="op">==</span><span class="st"> &quot;aa&quot;</span>){</a>
<a class="sourceLine" id="cb1016-6" title="6">  result &lt;-<span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb1016-7" title="7">}</a>
<a class="sourceLine" id="cb1016-8" title="8"><span class="cf">if</span>(x <span class="op">==</span><span class="st"> &quot;aaa&quot;</span>){</a>
<a class="sourceLine" id="cb1016-9" title="9">  result &lt;-<span class="st"> </span><span class="dv">3</span></a>
<a class="sourceLine" id="cb1016-10" title="10">}</a>
<a class="sourceLine" id="cb1016-11" title="11"><span class="cf">if</span>(x <span class="op">==</span><span class="st"> &quot;aaaa&quot;</span>){</a>
<a class="sourceLine" id="cb1016-12" title="12">  result &lt;-<span class="st"> </span><span class="dv">4</span></a>
<a class="sourceLine" id="cb1016-13" title="13">}</a>
<a class="sourceLine" id="cb1016-14" title="14"><span class="kw">print</span>(result)</a></code></pre></div>
<pre><code>## [1] 2</code></pre>
<div class="sourceCode" id="cb1018"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1018-1" title="1">x &lt;-<span class="st"> &quot;aa&quot;</span></a>
<a class="sourceLine" id="cb1018-2" title="2"><span class="cf">switch</span>(x, </a>
<a class="sourceLine" id="cb1018-3" title="3">  <span class="dt">a =</span> result &lt;-<span class="st"> </span><span class="dv">1</span>,</a>
<a class="sourceLine" id="cb1018-4" title="4">  <span class="dt">aa =</span> result &lt;-<span class="st"> </span><span class="dv">2</span>,</a>
<a class="sourceLine" id="cb1018-5" title="5">  <span class="dt">aaa =</span> result &lt;-<span class="st"> </span><span class="dv">3</span>,</a>
<a class="sourceLine" id="cb1018-6" title="6">  <span class="dt">aaaa =</span> result &lt;-<span class="st"> </span><span class="dv">4</span>)</a>
<a class="sourceLine" id="cb1018-7" title="7"><span class="kw">print</span>(result)</a></code></pre></div>
<pre><code>## [1] 2</code></pre>
</div>
<div id="l17for" class="section level2">
<h2><span class="header-section-number">9.3</span> La boucle <code>for</code></h2>
<p>En programmation, lorsque nous sommes amenés à répéter plusieurs fois la même ligne de code, c’est un signe indiquant qu’il faut utiliser une <strong>boucle</strong>. Une boucle est une manière d’itérer sur un ensemble d’objets (ou sur les éléments d’un objet), et de répéter une opération. Imaginons une <code>data.frame</code> avec des mesures de terrain à deux dates.</p>
<div class="sourceCode" id="cb1020"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1020-1" title="1">bdd &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">date01 =</span> <span class="kw">rnorm</span>(<span class="dt">n =</span> <span class="dv">100</span>, <span class="dt">mean =</span> <span class="dv">10</span>, <span class="dt">sd =</span> <span class="dv">1</span>), </a>
<a class="sourceLine" id="cb1020-2" title="2">                  <span class="dt">date02 =</span> <span class="kw">rnorm</span>(<span class="dt">n =</span> <span class="dv">100</span>, <span class="dt">mean =</span> <span class="dv">10</span>, <span class="dt">sd =</span> <span class="dv">1</span>))</a>
<a class="sourceLine" id="cb1020-3" title="3"><span class="kw">print</span>(<span class="kw">head</span>(bdd))</a></code></pre></div>
<pre><code>##      date01    date02
## 1  8.091658  8.250465
## 2 10.192896  9.854454
## 3 10.331269  9.298481
## 4  9.754415  7.950359
## 5  9.644656 10.451315
## 6 10.427815  8.810766</code></pre>
<p>Nous voudrions quantifier la différence entre la première et la deuxième date, puis mettre un indicateur pour savoir si cette différence est petite ou grande, par exemple avec un seuil arbitraire de 3. Donc pour chaque ligne nous pourrions faire :</p>
<div class="sourceCode" id="cb1022"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1022-1" title="1">bdd<span class="op">$</span>dif &lt;-<span class="st"> </span><span class="ot">NA</span></a>
<a class="sourceLine" id="cb1022-2" title="2">bdd<span class="op">$</span>isDifBig &lt;-<span class="st"> </span><span class="ot">NA</span></a>
<a class="sourceLine" id="cb1022-3" title="3"></a>
<a class="sourceLine" id="cb1022-4" title="4">bdd<span class="op">$</span>dif[<span class="dv">1</span>] &lt;-<span class="st"> </span><span class="kw">sqrt</span>((bdd<span class="op">$</span>date01[<span class="dv">1</span>] <span class="op">-</span><span class="st"> </span>bdd<span class="op">$</span>date02[<span class="dv">1</span>])<span class="op">^</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb1022-5" title="5">bdd<span class="op">$</span>dif[<span class="dv">2</span>] &lt;-<span class="st"> </span><span class="kw">sqrt</span>((bdd<span class="op">$</span>date01[<span class="dv">2</span>] <span class="op">-</span><span class="st"> </span>bdd<span class="op">$</span>date02[<span class="dv">2</span>])<span class="op">^</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb1022-6" title="6">bdd<span class="op">$</span>dif[<span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw">sqrt</span>((bdd<span class="op">$</span>date01[<span class="dv">3</span>] <span class="op">-</span><span class="st"> </span>bdd<span class="op">$</span>date02[<span class="dv">3</span>])<span class="op">^</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb1022-7" title="7"><span class="co"># ...</span></a>
<a class="sourceLine" id="cb1022-8" title="8">bdd<span class="op">$</span>dif[<span class="dv">100</span>] &lt;-<span class="st"> </span><span class="kw">sqrt</span>((bdd<span class="op">$</span>date01[<span class="dv">100</span>] <span class="op">-</span><span class="st"> </span>bdd<span class="op">$</span>date02[<span class="dv">100</span>])<span class="op">^</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb1022-9" title="9"></a>
<a class="sourceLine" id="cb1022-10" title="10"><span class="cf">if</span>(bdd<span class="op">$</span>dif[<span class="dv">1</span>] <span class="op">&gt;</span><span class="st"> </span><span class="dv">3</span>){</a>
<a class="sourceLine" id="cb1022-11" title="11">  bdd<span class="op">$</span>isDifBig[<span class="dv">1</span>] &lt;-<span class="st"> &quot;big&quot;</span></a>
<a class="sourceLine" id="cb1022-12" title="12">}<span class="cf">else</span>{</a>
<a class="sourceLine" id="cb1022-13" title="13">  bdd<span class="op">$</span>isDifBig[<span class="dv">1</span>] &lt;-<span class="st"> &quot;small&quot;</span></a>
<a class="sourceLine" id="cb1022-14" title="14">}</a>
<a class="sourceLine" id="cb1022-15" title="15"><span class="cf">if</span>(bdd<span class="op">$</span>dif[<span class="dv">2</span>] <span class="op">&gt;</span><span class="st"> </span><span class="dv">3</span>){</a>
<a class="sourceLine" id="cb1022-16" title="16">  bdd<span class="op">$</span>isDifBig[<span class="dv">2</span>] &lt;-<span class="st"> &quot;big&quot;</span></a>
<a class="sourceLine" id="cb1022-17" title="17">}<span class="cf">else</span>{</a>
<a class="sourceLine" id="cb1022-18" title="18">  bdd<span class="op">$</span>isDifBig[<span class="dv">2</span>] &lt;-<span class="st"> &quot;small&quot;</span></a>
<a class="sourceLine" id="cb1022-19" title="19">}</a>
<a class="sourceLine" id="cb1022-20" title="20"><span class="cf">if</span>(bdd<span class="op">$</span>dif[<span class="dv">3</span>] <span class="op">&gt;</span><span class="st"> </span><span class="dv">3</span>){</a>
<a class="sourceLine" id="cb1022-21" title="21">  bdd<span class="op">$</span>isDifBig[<span class="dv">3</span>] &lt;-<span class="st"> &quot;big&quot;</span></a>
<a class="sourceLine" id="cb1022-22" title="22">}<span class="cf">else</span>{</a>
<a class="sourceLine" id="cb1022-23" title="23">  bdd<span class="op">$</span>isDifBig[<span class="dv">3</span>] &lt;-<span class="st"> &quot;small&quot;</span></a>
<a class="sourceLine" id="cb1022-24" title="24">}</a>
<a class="sourceLine" id="cb1022-25" title="25"><span class="co"># ...</span></a>
<a class="sourceLine" id="cb1022-26" title="26"><span class="cf">if</span>(bdd<span class="op">$</span>dif[<span class="dv">100</span>] <span class="op">&gt;</span><span class="st"> </span><span class="dv">3</span>){</a>
<a class="sourceLine" id="cb1022-27" title="27">  bdd<span class="op">$</span>isDifBig[<span class="dv">100</span>] &lt;-<span class="st"> &quot;big&quot;</span></a>
<a class="sourceLine" id="cb1022-28" title="28">}<span class="cf">else</span>{</a>
<a class="sourceLine" id="cb1022-29" title="29">  bdd<span class="op">$</span>isDifBig[<span class="dv">100</span>] &lt;-<span class="st"> &quot;small&quot;</span></a>
<a class="sourceLine" id="cb1022-30" title="30">}</a></code></pre></div>
<p>Cette façon de faire serait extrêmement fastidieuse à réaliser, et même presque impossible à réaliser si la table contenait 1000 ou 100000 lignes. Il pourrait sembler logique de vouloir itérer sur les lignes de notre <code>data.frame</code> pour obtenir les nouvelles colonnes. Nous allons le réaliser même si ce n’est pas la solution que nous allons retenir par la suite.</p>
<p>Nous allons utiliser une boucle <code>for()</code>. La boucle <code>for()</code> va itérer sur les éléments d’un objet que nous allons donner en argument. Par exemple voici une boucle qui pour tous les chiffres de 3 à 9 va calculer leur valeur au carré. La valeur courante du chiffre est symbolisé par un objet qui peut prendre le nom que nous souhaitons (ici cela sera <code>i</code>).</p>
<div class="sourceCode" id="cb1023"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1023-1" title="1"><span class="cf">for</span>(i <span class="cf">in</span> <span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>)){</a>
<a class="sourceLine" id="cb1023-2" title="2">  <span class="kw">print</span>(i<span class="op">^</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb1023-3" title="3">}</a></code></pre></div>
<pre><code>## [1] 9
## [1] 16
## [1] 25
## [1] 36
## [1] 49
## [1] 64
## [1] 81</code></pre>
<p>Que nous pouvons améliorer en utilisant <a href="fonctions.html#l0152points">la fonction <code>:</code></a>.</p>
<div class="sourceCode" id="cb1025"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1025-1" title="1"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">3</span><span class="op">:</span><span class="dv">9</span>){</a>
<a class="sourceLine" id="cb1025-2" title="2">  <span class="kw">print</span>(i<span class="op">^</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb1025-3" title="3">}</a></code></pre></div>
<p>Le choix du nom <code>i</code> est ici arbitraire, nous aurions pu choisir <code>myVarFor</code> de la même façon :</p>
<div class="sourceCode" id="cb1026"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1026-1" title="1"><span class="cf">for</span>(myVarFor <span class="cf">in</span> <span class="dv">3</span><span class="op">:</span><span class="dv">9</span>){</a>
<a class="sourceLine" id="cb1026-2" title="2">  <span class="kw">print</span>(myVarFor<span class="op">^</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb1026-3" title="3">}</a></code></pre></div>
<p>La boucle <code>for()</code> peut itérer sur tous les types d’éléments.</p>
<div class="sourceCode" id="cb1027"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1027-1" title="1">nChar &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;z&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;r&quot;</span>, <span class="st">&quot;t&quot;</span>, <span class="st">&quot;y&quot;</span>)</a>
<a class="sourceLine" id="cb1027-2" title="2"><span class="cf">for</span>(i <span class="cf">in</span> nChar){</a>
<a class="sourceLine" id="cb1027-3" title="3">  <span class="kw">print</span>(i)</a>
<a class="sourceLine" id="cb1027-4" title="4">}</a></code></pre></div>
<pre><code>## [1] &quot;a&quot;
## [1] &quot;z&quot;
## [1] &quot;e&quot;
## [1] &quot;r&quot;
## [1] &quot;t&quot;
## [1] &quot;y&quot;</code></pre>
<p>Revenons à notre cas. Nous allons itérer sur le nombre de lignes de notre <code>data.frame</code> <code>bdd</code>. Avant cela nous allons créer les colonnes <code>dif</code> et <code>isDifBig</code> avec les valeurs <code>NA</code>. Ensuite nous allons utiliser <a href="fonctions.html#l015nrow">la fonction <code>nrow()</code></a> pour connaître le nombre de lignes.</p>
<div class="sourceCode" id="cb1029"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1029-1" title="1">bdd<span class="op">$</span>dif &lt;-<span class="st"> </span><span class="ot">NA</span></a>
<a class="sourceLine" id="cb1029-2" title="2">bdd<span class="op">$</span>isDifBig &lt;-<span class="st"> </span><span class="ot">NA</span></a>
<a class="sourceLine" id="cb1029-3" title="3"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(bdd)){</a>
<a class="sourceLine" id="cb1029-4" title="4">  bdd<span class="op">$</span>dif[i] &lt;-<span class="st"> </span><span class="kw">sqrt</span>((bdd<span class="op">$</span>date01[i] <span class="op">-</span><span class="st"> </span>bdd<span class="op">$</span>date02[i])<span class="op">^</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb1029-5" title="5">  <span class="cf">if</span>(bdd<span class="op">$</span>dif[i] <span class="op">&gt;</span><span class="st"> </span><span class="dv">3</span>){</a>
<a class="sourceLine" id="cb1029-6" title="6">    bdd<span class="op">$</span>isDifBig[i] &lt;-<span class="st"> &quot;big&quot;</span></a>
<a class="sourceLine" id="cb1029-7" title="7">  }<span class="cf">else</span>{</a>
<a class="sourceLine" id="cb1029-8" title="8">    bdd<span class="op">$</span>isDifBig[i] &lt;-<span class="st"> &quot;small&quot;</span></a>
<a class="sourceLine" id="cb1029-9" title="9">  }</a>
<a class="sourceLine" id="cb1029-10" title="10">}</a>
<a class="sourceLine" id="cb1029-11" title="11"><span class="kw">print</span>(<span class="kw">head</span>(bdd, <span class="dt">n =</span> <span class="dv">20</span>))</a></code></pre></div>
<pre><code>##       date01    date02       dif isDifBig
## 1   8.091658  8.250465 0.1588070    small
## 2  10.192896  9.854454 0.3384416    small
## 3  10.331269  9.298481 1.0327882    small
## 4   9.754415  7.950359 1.8040552    small
## 5   9.644656 10.451315 0.8066584    small
## 6  10.427815  8.810766 1.6170487    small
## 7  10.824939 10.246224 0.5787141    small
## 8   9.717761  9.026284 0.6914770    small
## 9   9.217568  9.980007 0.7624387    small
## 10  9.613618  8.957643 0.6559745    small
## 11  8.509660  8.659612 0.1499516    small
## 12 10.684786  8.841052 1.8437342    small
## 13 11.112794 10.554979 0.5578151    small
## 14  9.778951 10.452930 0.6739788    small
## 15  9.150197  9.683525 0.5333282    small
## 16  9.707025  9.050856 0.6561687    small
## 17 11.609838 10.460074 1.1497644    small
## 18 12.093377  9.623245 2.4701318    small
## 19 10.280399 10.417391 0.1369915    small
## 20  8.142445  9.783045 1.6405993    small</code></pre>
<p>En pratique ce n’est pas la meilleure façon de réaliser cet exercice car il s’agit ici de simples calculs sur des vecteurs contenus dans une <code>data.frame</code>. R est particulièrement puissant pour effectuer des opérations sur des vecteurs. Lorsque cela est possible il faut donc toujours privilégier les opérations sur les vecteurs. Ici notre code devient :</p>
<div class="sourceCode" id="cb1031"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1031-1" title="1">bdd<span class="op">$</span>dif &lt;-<span class="st"> </span><span class="kw">sqrt</span>((bdd<span class="op">$</span>date01 <span class="op">-</span><span class="st"> </span>bdd<span class="op">$</span>date02)<span class="op">^</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb1031-2" title="2">bdd<span class="op">$</span>isDifBig &lt;-<span class="st"> &quot;small&quot;</span></a>
<a class="sourceLine" id="cb1031-3" title="3">bdd<span class="op">$</span>isDifBig[bdd<span class="op">$</span>dif <span class="op">&gt;</span><span class="st"> </span><span class="dv">3</span>] &lt;-<span class="st"> &quot;big&quot;</span></a>
<a class="sourceLine" id="cb1031-4" title="4"><span class="kw">print</span>(<span class="kw">head</span>(bdd, <span class="dt">n =</span> <span class="dv">20</span>))</a></code></pre></div>
<pre><code>##       date01    date02       dif isDifBig
## 1   8.091658  8.250465 0.1588070    small
## 2  10.192896  9.854454 0.3384416    small
## 3  10.331269  9.298481 1.0327882    small
## 4   9.754415  7.950359 1.8040552    small
## 5   9.644656 10.451315 0.8066584    small
## 6  10.427815  8.810766 1.6170487    small
## 7  10.824939 10.246224 0.5787141    small
## 8   9.717761  9.026284 0.6914770    small
## 9   9.217568  9.980007 0.7624387    small
## 10  9.613618  8.957643 0.6559745    small
## 11  8.509660  8.659612 0.1499516    small
## 12 10.684786  8.841052 1.8437342    small
## 13 11.112794 10.554979 0.5578151    small
## 14  9.778951 10.452930 0.6739788    small
## 15  9.150197  9.683525 0.5333282    small
## 16  9.707025  9.050856 0.6561687    small
## 17 11.609838 10.460074 1.1497644    small
## 18 12.093377  9.623245 2.4701318    small
## 19 10.280399 10.417391 0.1369915    small
## 20  8.142445  9.783045 1.6405993    small</code></pre>
<p>La plupart des exemples que l’on peut trouver sur Internet à propos de la boucle <code>for()</code> peuvent être remplacés par des opérations sur les vecteurs. Voici quelques exemples adaptés de plusieurs sources :</p>
<div class="sourceCode" id="cb1033"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1033-1" title="1"><span class="co"># tester si des nombres sont pairs</span></a>
<a class="sourceLine" id="cb1033-2" title="2"><span class="co"># [1] FOR</span></a>
<a class="sourceLine" id="cb1033-3" title="3">x &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">100</span>, <span class="dt">size =</span> <span class="dv">20</span>)</a>
<a class="sourceLine" id="cb1033-4" title="4">count &lt;-<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb1033-5" title="5"><span class="cf">for</span> (val <span class="cf">in</span> x) {</a>
<a class="sourceLine" id="cb1033-6" title="6">  <span class="cf">if</span>(val <span class="op">%%</span><span class="st"> </span><span class="dv">2</span> <span class="op">==</span><span class="st"> </span><span class="dv">0</span>){</a>
<a class="sourceLine" id="cb1033-7" title="7">    count &lt;-<span class="st"> </span>count <span class="op">+</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb1033-8" title="8">  }</a>
<a class="sourceLine" id="cb1033-9" title="9">}</a>
<a class="sourceLine" id="cb1033-10" title="10"><span class="kw">print</span>(count)</a></code></pre></div>
<pre><code>## [1] 11</code></pre>
<div class="sourceCode" id="cb1035"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1035-1" title="1"><span class="co"># [2] VECTOR</span></a>
<a class="sourceLine" id="cb1035-2" title="2"><span class="kw">sum</span>(x <span class="op">%%</span><span class="st"> </span><span class="dv">2</span> <span class="op">==</span><span class="st"> </span><span class="dv">0</span>)</a></code></pre></div>
<pre><code>## [1] 11</code></pre>
<div class="sourceCode" id="cb1037"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1037-1" title="1"><span class="co"># calculer des carrés</span></a>
<a class="sourceLine" id="cb1037-2" title="2"><span class="co"># [1] FOR</span></a>
<a class="sourceLine" id="cb1037-3" title="3">x &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="dv">0</span>, <span class="dv">20</span>)</a>
<a class="sourceLine" id="cb1037-4" title="4"><span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">20</span>){</a>
<a class="sourceLine" id="cb1037-5" title="5">  x[j] &lt;-<span class="st"> </span>j<span class="op">^</span><span class="dv">2</span></a>
<a class="sourceLine" id="cb1037-6" title="6">}</a>
<a class="sourceLine" id="cb1037-7" title="7"><span class="kw">print</span>(x)</a></code></pre></div>
<pre><code>##  [1]   1   4   9  16  25  36  49  64  81 100 121 144 169 196 225 256 289 324 361
## [20] 400</code></pre>
<div class="sourceCode" id="cb1039"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1039-1" title="1"><span class="co"># [2] VECTOR</span></a>
<a class="sourceLine" id="cb1039-2" title="2">(<span class="dv">1</span><span class="op">:</span><span class="dv">20</span>)<span class="op">^</span><span class="dv">2</span></a></code></pre></div>
<pre><code>##  [1]   1   4   9  16  25  36  49  64  81 100 121 144 169 196 225 256 289 324 361
## [20] 400</code></pre>
<div class="sourceCode" id="cb1041"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1041-1" title="1"><span class="co"># répéter un lancer de dés et faire la moyenne</span></a>
<a class="sourceLine" id="cb1041-2" title="2"><span class="co"># [1] FOR</span></a>
<a class="sourceLine" id="cb1041-3" title="3">ntrials =<span class="st"> </span><span class="dv">1000</span></a>
<a class="sourceLine" id="cb1041-4" title="4">trials =<span class="st"> </span><span class="kw">rep</span>(<span class="dv">0</span>, ntrials)</a>
<a class="sourceLine" id="cb1041-5" title="5"><span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span>ntrials){</a>
<a class="sourceLine" id="cb1041-6" title="6">  trials[j] =<span class="st"> </span><span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>, <span class="dt">size =</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb1041-7" title="7">}</a>
<a class="sourceLine" id="cb1041-8" title="8"><span class="kw">mean</span>(trials)</a></code></pre></div>
<pre><code>## [1] 3.55</code></pre>
<div class="sourceCode" id="cb1043"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1043-1" title="1"><span class="co"># [2] VECTOR</span></a>
<a class="sourceLine" id="cb1043-2" title="2"><span class="kw">mean</span>(<span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>, ntrials, <span class="dt">replace =</span> <span class="ot">TRUE</span>))</a></code></pre></div>
<pre><code>## [1] 3.538</code></pre>
<p>C’est un bon exercice de parcourir les nombreux exemples disponibles sur Internet sur la boucle <code>for()</code> et de tenter de les transformer en opérations vectorielles. Cela nous permet d’acquérir les bons réflexes de programmation avec R. La boucle <code>for()</code> reste très utile pour par exemple lire plusieurs fichiers et traiter l’information qu’ils contiennent de la même façon, faire des graphiques, ou encore lorsque les opérations vectorielles deveinnent fastidieuses. Imaginons une matrice de 10 colonnes et 100 lignes. Nous voulons la somme de chaque ligne (nous verrons plus loin comment faire avec la fonction <code>apply()</code>).</p>
<div class="sourceCode" id="cb1045"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1045-1" title="1">myMat &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">100</span>, <span class="dt">size =</span> <span class="dv">1000</span>, <span class="dt">replace =</span> <span class="ot">TRUE</span>), <span class="dt">ncol =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb1045-2" title="2"><span class="co"># VECTOR</span></a>
<a class="sourceLine" id="cb1045-3" title="3">sumRow &lt;-<span class="st"> </span>myMat[, <span class="dv">1</span>] <span class="op">+</span><span class="st"> </span>myMat[, <span class="dv">2</span>] <span class="op">+</span><span class="st"> </span>myMat[, <span class="dv">3</span>] <span class="op">+</span><span class="st"> </span>myMat[, <span class="dv">4</span>] <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb1045-4" title="4"><span class="st">  </span>myMat[, <span class="dv">5</span>] <span class="op">+</span><span class="st"> </span>myMat[, <span class="dv">6</span>] <span class="op">+</span><span class="st"> </span>myMat[, <span class="dv">7</span>] <span class="op">+</span><span class="st"> </span>myMat[, <span class="dv">8</span>] <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb1045-5" title="5"><span class="st">  </span>myMat[, <span class="dv">9</span>] <span class="op">+</span><span class="st"> </span>myMat[, <span class="dv">10</span>]</a>
<a class="sourceLine" id="cb1045-6" title="6"><span class="kw">print</span>(sumRow)</a></code></pre></div>
<pre><code>##   [1] 415 567 501 543 524 494 413 357 514 492 557 643 525 496 705 578 439 443
##  [19] 698 310 685 585 422 539 424 323 590 545 630 598 589 625 419 334 533 549
##  [37] 407 565 383 532 543 655 520 582 453 415 456 395 650 690 520 465 528 497
##  [55] 467 514 732 479 532 487 535 393 639 511 569 479 580 545 491 531 462 431
##  [73] 443 627 539 507 553 422 696 654 482 526 459 594 617 410 507 489 490 569
##  [91] 555 701 356 456 431 454 461 407 553 375</code></pre>
<div class="sourceCode" id="cb1047"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1047-1" title="1"><span class="co"># FOR</span></a>
<a class="sourceLine" id="cb1047-2" title="2">sumRow &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="ot">NA</span>, <span class="dt">times =</span> <span class="kw">nrow</span>(myMat))</a>
<a class="sourceLine" id="cb1047-3" title="3"><span class="cf">for</span>(j <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(myMat)){</a>
<a class="sourceLine" id="cb1047-4" title="4">  sumRow[j] &lt;-<span class="st"> </span><span class="kw">sum</span>(myMat[j, ])</a>
<a class="sourceLine" id="cb1047-5" title="5">}</a>
<a class="sourceLine" id="cb1047-6" title="6"><span class="kw">print</span>(sumRow)</a></code></pre></div>
<pre><code>##   [1] 415 567 501 543 524 494 413 357 514 492 557 643 525 496 705 578 439 443
##  [19] 698 310 685 585 422 539 424 323 590 545 630 598 589 625 419 334 533 549
##  [37] 407 565 383 532 543 655 520 582 453 415 456 395 650 690 520 465 528 497
##  [55] 467 514 732 479 532 487 535 393 639 511 569 479 580 545 491 531 462 431
##  [73] 443 627 539 507 553 422 696 654 482 526 459 594 617 410 507 489 490 569
##  [91] 555 701 356 456 431 454 461 407 553 375</code></pre>
<p>En conclusion, il est recommandé de ne pas utiliser la boucle <code>for()</code> avec R chaque fois que cela est possible, et nous verrons dans ce chapitre des alternatives commes les boucles de la famille <code>apply()</code>.</p>
</div>
<div id="l17while" class="section level2">
<h2><span class="header-section-number">9.4</span> La boucle <code>while</code></h2>
<p>La boucle <code>while()</code>, contrairement à la boucle <code>for()</code>, signifie <em>TANT QUE</em>. Tant qu’une condition n’est pas remplie, la boucle va continuer à s’exécuter. Attention car en cas d’erreur, nous pouvons facilement programmer des boucles qui ne terminent jamais ! Cette boucle est moins courante que la boucle <code>for()</code>. prenons un exemple :</p>
<div class="sourceCode" id="cb1049"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1049-1" title="1">i &lt;-<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb1049-2" title="2"><span class="cf">while</span>(i <span class="op">&lt;</span><span class="st"> </span><span class="dv">10</span>){</a>
<a class="sourceLine" id="cb1049-3" title="3">  <span class="kw">print</span>(i)</a>
<a class="sourceLine" id="cb1049-4" title="4">  i &lt;-<span class="st"> </span>i <span class="op">+</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb1049-5" title="5">}</a></code></pre></div>
<pre><code>## [1] 0
## [1] 1
## [1] 2
## [1] 3
## [1] 4
## [1] 5
## [1] 6
## [1] 7
## [1] 8
## [1] 9</code></pre>
<p>Dans cet exemple, la variable <code>i</code> a comme valeur 0. TANT QUE <code>i &lt; 10</code>, nous allons afficher <code>i</code>. Pour que cette boucle se termine, il ne faut pas oublier de modifier la valeur de <code>i</code>, c’est ce qui est fait avec la ligne <code>i &lt;- i + 1</code>. Lorsque la condition <code>i &lt; 10</code> ne se vérifie plus, la boucle s’arrête.</p>
<p>La boucle <code>while()</code> est très utile pour créer des scripts qui vont effectuer des calculs sur des variables dont la valeur évoluent dans le temps. Par exemple imaginons un nombre entre 0 et 10000 et un générateur aléatoire qui va essayer de déterminer la valeur de ce nombre. Si nous souhaitons limiter les tentatives de R à 2 secondes, nous pouvons écrire le script suivant (qui devrait marcher à tous les coups sur un ordinateur de bureau classique pouvant facilement effectuer 35000 essais en 2 secondes) :</p>
<div class="sourceCode" id="cb1051"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1051-1" title="1">myNumber &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dt">x =</span> <span class="dv">10000</span>, <span class="dt">size =</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb1051-2" title="2">myGuess &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dt">x =</span> <span class="dv">10000</span>, <span class="dt">size =</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb1051-3" title="3">startTime &lt;-<span class="st"> </span><span class="kw">Sys.time</span>()</a>
<a class="sourceLine" id="cb1051-4" title="4">numberGuess &lt;-<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb1051-5" title="5"><span class="cf">while</span>(<span class="kw">Sys.time</span>() <span class="op">-</span><span class="st"> </span>startTime <span class="op">&lt;</span><span class="st"> </span><span class="dv">2</span>){</a>
<a class="sourceLine" id="cb1051-6" title="6">  <span class="cf">if</span>(myGuess <span class="op">==</span><span class="st"> </span>myNumber){</a>
<a class="sourceLine" id="cb1051-7" title="7">    numberGuess &lt;-<span class="st"> </span>numberGuess <span class="op">+</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb1051-8" title="8">    <span class="kw">print</span>(<span class="st">&quot;Number found !&quot;</span>)</a>
<a class="sourceLine" id="cb1051-9" title="9">    <span class="kw">print</span>(<span class="kw">paste0</span>(<span class="st">&quot;And I have plenty of time left: &quot;</span>, </a>
<a class="sourceLine" id="cb1051-10" title="10">      <span class="kw">round</span>(<span class="dv">2</span> <span class="op">-</span><span class="st"> </span><span class="kw">as.numeric</span>(<span class="kw">Sys.time</span>() <span class="op">-</span><span class="st"> </span>startTime), <span class="dt">digits =</span> <span class="dv">2</span>), </a>
<a class="sourceLine" id="cb1051-11" title="11">      <span class="st">&quot; sec&quot;</span>))</a>
<a class="sourceLine" id="cb1051-12" title="12">    <span class="cf">break</span></a>
<a class="sourceLine" id="cb1051-13" title="13">  }<span class="cf">else</span>{</a>
<a class="sourceLine" id="cb1051-14" title="14">    myGuess &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dt">x =</span> <span class="dv">10000</span>, <span class="dt">size =</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb1051-15" title="15">    numberGuess &lt;-<span class="st"> </span>numberGuess <span class="op">+</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb1051-16" title="16">  }</a>
<a class="sourceLine" id="cb1051-17" title="17">}</a></code></pre></div>
<pre><code>## [1] &quot;Number found !&quot;
## [1] &quot;And I have plenty of time left: 1.92 sec&quot;</code></pre>
<p>Dans ce script nous générons un nombre aléatoire à deviner avec la fonction <code>sample()</code>, et chaque essai avec la même fonction <code>sample()</code>. Ensuite nous utilisons la fonction <code>Sys.time()</code> (avec un S majuscule à <code>Sys</code>), pour connaître l’heure de début de la boucle. Tant que la différence entre chaque itération de la boucle et l’heure de démarrage est inférieur à 2 secondes, la boucle <code>while()</code> va vérifier si le bon nombre a été deviner dans le test logique avec <code>if()</code> puis si c’est le cas nous informer que le nombre a été trouvé, nous dire le temps restant avant les deux secondes, puis terminer la boucle avec le mot clef <code>break</code> sur lequel nous reviendrons. En bref, <code>break</code> permet de sortir d’une boucle. Si le nombre n’a pas été deviné, la boucle fait un autre essai avec la fonction <code>sample()</code>.</p>
<p>Plus concrètement nous pourrions imaginer des algorithmes pour explorer un espace de solutions face à un problème avec un temps limité pour y parvenir. La boucle <code>while()</code> peut aussi être pratique pour qu’un script ne s’exécute que lorsque un fichier issu d’un autre programme devient disponible… En pratique la boucle <code>while()</code> reste peu utilisée avec R.</p>
</div>
<div id="l17repeat" class="section level2">
<h2><span class="header-section-number">9.5</span> La boucle <code>repeat</code></h2>
<p>La boucle <code>repeat()</code> permet de répéter une opération sans condition à vérifier. Pour sortir de cette boucle il faut donc obligatoirement utiliser le mot clef <code>break</code>.</p>
<div class="sourceCode" id="cb1053"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1053-1" title="1">i &lt;-<span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb1053-2" title="2"><span class="cf">repeat</span>{</a>
<a class="sourceLine" id="cb1053-3" title="3">  <span class="kw">print</span>(i<span class="op">^</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb1053-4" title="4">  i &lt;-<span class="st"> </span>i <span class="op">+</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb1053-5" title="5">  <span class="cf">if</span>(i <span class="op">==</span><span class="st"> </span><span class="dv">5</span>){</a>
<a class="sourceLine" id="cb1053-6" title="6">    <span class="cf">break</span></a>
<a class="sourceLine" id="cb1053-7" title="7">  }</a>
<a class="sourceLine" id="cb1053-8" title="8">}</a></code></pre></div>
<pre><code>## [1] 1
## [1] 4
## [1] 9
## [1] 16</code></pre>
<p>Si nous reprenons l’exemple précédent, nous pouvons utiliser une boucle <code>repeat()</code> pour le répéter 5 fois.</p>
<div class="sourceCode" id="cb1055"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1055-1" title="1">numTry &lt;-<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb1055-2" title="2"><span class="cf">repeat</span>{</a>
<a class="sourceLine" id="cb1055-3" title="3">  myNumber &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dt">x =</span> <span class="dv">10000</span>, <span class="dt">size =</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb1055-4" title="4">  myGuess &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dt">x =</span> <span class="dv">10000</span>, <span class="dt">size =</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb1055-5" title="5">  startTime &lt;-<span class="st"> </span><span class="kw">Sys.time</span>()</a>
<a class="sourceLine" id="cb1055-6" title="6">  numberGuess &lt;-<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb1055-7" title="7">  <span class="cf">while</span>(<span class="kw">Sys.time</span>() <span class="op">-</span><span class="st"> </span>startTime <span class="op">&lt;</span><span class="st"> </span><span class="dv">2</span>){</a>
<a class="sourceLine" id="cb1055-8" title="8">    <span class="cf">if</span>(myGuess <span class="op">==</span><span class="st"> </span>myNumber){</a>
<a class="sourceLine" id="cb1055-9" title="9">      numberGuess &lt;-<span class="st"> </span>numberGuess <span class="op">+</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb1055-10" title="10">      <span class="kw">print</span>(<span class="kw">round</span>(<span class="kw">as.numeric</span>(<span class="kw">Sys.time</span>() <span class="op">-</span><span class="st"> </span>startTime), <span class="dt">digits =</span> <span class="dv">3</span>))</a>
<a class="sourceLine" id="cb1055-11" title="11">      <span class="cf">break</span></a>
<a class="sourceLine" id="cb1055-12" title="12">    }<span class="cf">else</span>{</a>
<a class="sourceLine" id="cb1055-13" title="13">      myGuess &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dt">x =</span> <span class="dv">10000</span>, <span class="dt">size =</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb1055-14" title="14">      numberGuess &lt;-<span class="st"> </span>numberGuess <span class="op">+</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb1055-15" title="15">    }</a>
<a class="sourceLine" id="cb1055-16" title="16">  }</a>
<a class="sourceLine" id="cb1055-17" title="17">  numTry &lt;-<span class="st"> </span>numTry <span class="op">+</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb1055-18" title="18">  <span class="cf">if</span>(numTry <span class="op">==</span><span class="st"> </span><span class="dv">5</span>){<span class="cf">break</span>}</a>
<a class="sourceLine" id="cb1055-19" title="19">}</a></code></pre></div>
<pre><code>## [1] 0.011
## [1] 0.4
## [1] 0.367
## [1] 0.31
## [1] 0.062</code></pre>
<p>Comme la boucle <code>while()</code>, la boucle <code>repeat()</code> reste peu utilisée avec R.</p>
</div>
<div id="l17spe" class="section level2">
<h2><span class="header-section-number">9.6</span> <code>next</code> et <code>break</code></h2>
<p>Nous avons déjà vu le mot clef <code>break</code> qui permet de sortir de la boucle en cours. Par exemple si nous cherchons le premier chiffre après 111 qui soit divisible par 32 :</p>
<div class="sourceCode" id="cb1057"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1057-1" title="1">myVars &lt;-<span class="st"> </span><span class="dv">111</span><span class="op">:</span><span class="dv">1000</span></a>
<a class="sourceLine" id="cb1057-2" title="2"><span class="cf">for</span>(myVar <span class="cf">in</span> myVars){</a>
<a class="sourceLine" id="cb1057-3" title="3">  <span class="cf">if</span>(myVar <span class="op">%%</span><span class="st"> </span><span class="dv">32</span> <span class="op">==</span><span class="st"> </span><span class="dv">0</span>){</a>
<a class="sourceLine" id="cb1057-4" title="4">    <span class="kw">print</span>(myVar)</a>
<a class="sourceLine" id="cb1057-5" title="5">    <span class="cf">break</span></a>
<a class="sourceLine" id="cb1057-6" title="6">  }</a>
<a class="sourceLine" id="cb1057-7" title="7">}</a></code></pre></div>
<pre><code>## [1] 128</code></pre>
<p>Même si nous avons vu que dans la pratique nous pouvons éviter la boucle <code>for()</code> avec une opération sur les vecteurs :</p>
<div class="sourceCode" id="cb1059"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1059-1" title="1">(<span class="dv">111</span><span class="op">:</span><span class="dv">1000</span>)[<span class="dv">111</span><span class="op">:</span><span class="dv">1000</span> <span class="op">%%</span><span class="st"> </span><span class="dv">32</span> <span class="op">==</span><span class="st"> </span><span class="dv">0</span>][<span class="dv">1</span>]</a></code></pre></div>
<pre><code>## [1] 128</code></pre>
<p>Le mot clef <code>next</code> permet quant à lui de passer à l’itération suivante d’une boucle si une certaine condition est remplie. Par exemple si nous voulons imprimer les lettre de l’alphabet sans les voyelles :</p>
<div class="sourceCode" id="cb1061"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1061-1" title="1"><span class="cf">for</span>(myLetter <span class="cf">in</span> letters){</a>
<a class="sourceLine" id="cb1061-2" title="2">  <span class="cf">if</span>(myLetter <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;i&quot;</span>, <span class="st">&quot;o&quot;</span>, <span class="st">&quot;u&quot;</span>, <span class="st">&quot;y&quot;</span>)){</a>
<a class="sourceLine" id="cb1061-3" title="3">    <span class="cf">next</span></a>
<a class="sourceLine" id="cb1061-4" title="4">  }</a>
<a class="sourceLine" id="cb1061-5" title="5">  <span class="kw">print</span>(myLetter)</a>
<a class="sourceLine" id="cb1061-6" title="6">}</a></code></pre></div>
<pre><code>## [1] &quot;b&quot;
## [1] &quot;c&quot;
## [1] &quot;d&quot;
## [1] &quot;f&quot;
## [1] &quot;g&quot;
## [1] &quot;h&quot;
## [1] &quot;j&quot;
## [1] &quot;k&quot;
## [1] &quot;l&quot;
## [1] &quot;m&quot;
## [1] &quot;n&quot;
## [1] &quot;p&quot;
## [1] &quot;q&quot;
## [1] &quot;r&quot;
## [1] &quot;s&quot;
## [1] &quot;t&quot;
## [1] &quot;v&quot;
## [1] &quot;w&quot;
## [1] &quot;x&quot;
## [1] &quot;z&quot;</code></pre>
<p>Encore une fois nous pourrions éviter la boucle <code>for()</code> avec :</p>
<div class="sourceCode" id="cb1063"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1063-1" title="1">letters[<span class="op">!</span><span class="st"> </span>letters <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;i&quot;</span>, <span class="st">&quot;o&quot;</span>, <span class="st">&quot;u&quot;</span>, <span class="st">&quot;y&quot;</span>)]</a></code></pre></div>
<pre><code>##  [1] &quot;b&quot; &quot;c&quot; &quot;d&quot; &quot;f&quot; &quot;g&quot; &quot;h&quot; &quot;j&quot; &quot;k&quot; &quot;l&quot; &quot;m&quot; &quot;n&quot; &quot;p&quot; &quot;q&quot; &quot;r&quot; &quot;s&quot; &quot;t&quot; &quot;v&quot; &quot;w&quot; &quot;x&quot;
## [20] &quot;z&quot;</code></pre>
<p>En conclusion, si nous utilisons les boucles, alors les mots clefs <code>next</code> et <code>break</code> sont souvent très utiles, mais chaque fois que cela est possible il vaut mieux avoir recours à des opérations sur les vecteurs. Lorsque cela n’est pas possible de travailler sur les vecteurs, il est préférable d’utiliser les boucles de la famille <code>apply</code> qui sont le sujet de la prochaine section.</p>
</div>
<div id="l17applyfamily" class="section level2">
<h2><span class="header-section-number">9.7</span> Les boucles de la famille <code>apply</code></h2>
<div id="l17apply" class="section level3">
<h3><span class="header-section-number">9.7.1</span> <code>apply</code></h3>
<p>La fonction <code>apply()</code> permet d’appliquer une fonction à tous les éléments d’un <code>array</code> ou d’une <code>matrix</code>. Par exemple si nous souhaitons connaître la somme de chaque ligne d’une <code>matrix</code> de 10 colonnes et 100 lignes :</p>
<div class="sourceCode" id="cb1065"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1065-1" title="1">myMat &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">100</span>, <span class="dt">size =</span> <span class="dv">1000</span>, <span class="dt">replace =</span> <span class="ot">TRUE</span>), <span class="dt">ncol =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb1065-2" title="2"><span class="kw">apply</span>(<span class="dt">X =</span> myMat, <span class="dt">MARGIN =</span> <span class="dv">1</span>, <span class="dt">FUN =</span> sum)</a></code></pre></div>
<pre><code>##   [1] 521 641 525 444 608 557 414 577 650 746 479 507 623 465 484 719 431 486
##  [19] 424 398 640 679 626 368 401 574 551 437 577 447 393 559 533 633 442 628
##  [37] 460 563 599 459 674 470 505 461 589 528 641 469 378 470 397 508 612 493
##  [55] 454 542 518 347 442 448 482 614 606 540 474 516 456 416 634 517 570 501
##  [73] 431 441 593 314 418 602 440 572 639 401 469 638 384 350 437 586 476 474
##  [91] 602 444 537 426 587 385 366 504 594 473</code></pre>
<p>Si nous souhaitons connaître la médiane de chaque colonne, l’expression devient :</p>
<div class="sourceCode" id="cb1067"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1067-1" title="1"><span class="kw">apply</span>(<span class="dt">X =</span> myMat, <span class="dt">MARGIN =</span> <span class="dv">2</span>, <span class="dt">FUN =</span> median)</a></code></pre></div>
<pre><code>##  [1] 47.5 55.0 57.0 42.0 50.0 43.5 48.0 62.5 56.5 54.5</code></pre>
<p>L’argument <code>X</code> correspond à l’objet sur lequel la boucle <code>apply</code> va itérer. L’argument <code>MARGIN</code> correspond à la dimension à prendre en compte (1 pour les lignes, et 2 pour les colonnes). L’argument <code>FUN</code> correspond à la fonction à appliquer. Sur un objet de type <code>array</code>, l’argument <code>MARGIN</code> peut prendre autant de valeurs que de dimensions. Dans cet exemple <code>MARGIN = 1</code> correspond à la moyenne de chaque ligne - dimension 1 - (toutes dimensions confondues), <code>MARGIN = 2</code> correspond à la moyenne de chaque colonne - dimension 2 - (toutes dimensions confondues), et <code>MARGIN = 3</code> correspond à la moyenne de chaque dimension 3. Ci-dessous chaque calcul est réalisé de deux manières différentes pour en expliciter le fonctionnement.</p>
<div class="sourceCode" id="cb1069"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1069-1" title="1">myArr &lt;-<span class="st"> </span><span class="kw">array</span>(<span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">100</span>, <span class="dt">size =</span> <span class="dv">1000</span>, <span class="dt">replace =</span> <span class="ot">TRUE</span>), <span class="dt">dim =</span> <span class="kw">c</span>(<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">5</span>))</a>
<a class="sourceLine" id="cb1069-2" title="2"><span class="kw">apply</span>(<span class="dt">X =</span> myArr, <span class="dt">MARGIN =</span> <span class="dv">1</span>, <span class="dt">FUN =</span> mean)</a></code></pre></div>
<pre><code>##  [1] 54.69 51.28 50.16 48.69 46.35 49.49 47.14 50.27 50.58 51.07</code></pre>
<div class="sourceCode" id="cb1071"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1071-1" title="1">(<span class="kw">apply</span>(myArr[,,<span class="dv">1</span>], <span class="dv">1</span>, mean) <span class="op">+</span><span class="st"> </span><span class="kw">apply</span>(myArr[,,<span class="dv">2</span>], <span class="dv">1</span>, mean) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb1071-2" title="2"><span class="st">  </span><span class="kw">apply</span>(myArr[,,<span class="dv">3</span>], <span class="dv">1</span>, mean) <span class="op">+</span><span class="st"> </span><span class="kw">apply</span>(myArr[,,<span class="dv">4</span>], <span class="dv">1</span>, mean) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb1071-3" title="3"><span class="st">  </span><span class="kw">apply</span>(myArr[,,<span class="dv">5</span>], <span class="dv">1</span>, mean))<span class="op">/</span><span class="dv">5</span></a></code></pre></div>
<pre><code>##  [1] 54.69 51.28 50.16 48.69 46.35 49.49 47.14 50.27 50.58 51.07</code></pre>
<div class="sourceCode" id="cb1073"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1073-1" title="1"><span class="kw">apply</span>(<span class="dt">X =</span> myArr, <span class="dt">MARGIN =</span> <span class="dv">2</span>, <span class="dt">FUN =</span> mean)</a></code></pre></div>
<pre><code>##  [1] 51.52 54.16 47.16 57.66 53.10 47.18 48.36 53.80 52.48 48.92 49.48 47.38
## [13] 53.84 43.46 52.66 44.84 47.42 46.72 52.38 46.92</code></pre>
<div class="sourceCode" id="cb1075"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1075-1" title="1">(<span class="kw">apply</span>(myArr[,,<span class="dv">1</span>], <span class="dv">2</span>, mean) <span class="op">+</span><span class="st"> </span><span class="kw">apply</span>(myArr[,,<span class="dv">2</span>], <span class="dv">2</span>, mean) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb1075-2" title="2"><span class="st">  </span><span class="kw">apply</span>(myArr[,,<span class="dv">3</span>], <span class="dv">2</span>, mean) <span class="op">+</span><span class="st"> </span><span class="kw">apply</span>(myArr[,,<span class="dv">4</span>], <span class="dv">2</span>, mean) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb1075-3" title="3"><span class="st">  </span><span class="kw">apply</span>(myArr[,,<span class="dv">5</span>], <span class="dv">2</span>, mean))<span class="op">/</span><span class="dv">5</span></a></code></pre></div>
<pre><code>##  [1] 51.52 54.16 47.16 57.66 53.10 47.18 48.36 53.80 52.48 48.92 49.48 47.38
## [13] 53.84 43.46 52.66 44.84 47.42 46.72 52.38 46.92</code></pre>
<div class="sourceCode" id="cb1077"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1077-1" title="1"><span class="kw">apply</span>(<span class="dt">X =</span> myArr, <span class="dt">MARGIN =</span> <span class="dv">3</span>, <span class="dt">FUN =</span> mean)</a></code></pre></div>
<pre><code>## [1] 47.455 48.945 49.565 52.515 51.380</code></pre>
<div class="sourceCode" id="cb1079"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1079-1" title="1"><span class="kw">c</span>(<span class="kw">mean</span>(myArr[,,<span class="dv">1</span>]), <span class="kw">mean</span>(myArr[,,<span class="dv">2</span>]), <span class="kw">mean</span>(myArr[,,<span class="dv">3</span>]), </a>
<a class="sourceLine" id="cb1079-2" title="2">  <span class="kw">mean</span>(myArr[,,<span class="dv">4</span>]), <span class="kw">mean</span>(myArr[,,<span class="dv">5</span>]))</a></code></pre></div>
<pre><code>## [1] 47.455 48.945 49.565 52.515 51.380</code></pre>
<p>Nous pouvons aussi calculer la moyenne pour chaque valeur de ligne et de colonne (la fonction itère alors sur la dimension 3) :</p>
<div class="sourceCode" id="cb1081"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1081-1" title="1"><span class="kw">apply</span>(<span class="dt">X =</span> myArr, <span class="dt">MARGIN =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>), <span class="dt">FUN =</span> mean)</a></code></pre></div>
<pre><code>##       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13]
##  [1,] 58.2 63.8 48.2 63.2 62.8 55.6 48.6 51.8 61.6  52.8  83.4  71.2  64.0
##  [2,] 59.8 61.4 64.8 67.0 69.2 46.0 48.2 50.2 65.0  34.2  67.2  15.8  60.6
##  [3,] 29.4 48.8 66.2 48.6 50.6 49.2 47.0 53.4 63.4  54.4  66.6  23.2  71.4
##  [4,] 82.6 49.0 25.4 59.2 50.6 35.8 52.6 33.0 57.0  49.4  34.0  49.4  59.0
##  [5,] 44.4 51.6 44.2 57.0 48.8 55.6 42.4 74.4 29.0  49.8  34.0  53.2  69.6
##  [6,] 43.0 39.8 46.8 66.0 65.4 35.0 39.8 51.6 36.4  51.0  39.6  64.4  34.4
##  [7,] 56.0 35.4 44.8 55.6 27.2 60.8 53.0 51.8 57.6  40.4  49.0  32.6  33.2
##  [8,] 33.6 65.8 47.2 50.4 47.0 49.6 43.2 57.2 66.4  58.6  44.0  49.6  45.8
##  [9,] 66.6 54.0 62.2 58.4 42.4 41.0 51.8 61.4 37.0  52.4  29.4  40.8  52.6
## [10,] 41.6 72.0 21.8 51.2 67.0 43.2 57.0 53.2 51.4  46.2  47.6  73.6  47.8
##       [,14] [,15] [,16] [,17] [,18] [,19] [,20]
##  [1,]  60.4  57.8  25.4  48.8  30.4  55.2  30.6
##  [2,]  43.2  64.0  50.4  33.8  32.6  40.6  51.6
##  [3,]  40.8  53.2  49.2  45.2  43.2  40.4  59.0
##  [4,]  30.6  61.8  45.6  42.8  51.0  63.8  41.2
##  [5,]  46.0  29.6  50.4  25.4  35.6  57.2  28.8
##  [6,]  44.2  34.8  40.4  81.6  37.6  64.0  74.0
##  [7,]  38.4  54.6  44.4  60.4  61.2  41.6  44.8
##  [8,]  49.4  56.4  54.0  49.4  52.2  52.6  33.0
##  [9,]  50.0  67.2  49.0  44.8  56.8  46.2  47.6
## [10,]  31.6  47.2  39.6  42.0  66.6  62.2  58.6</code></pre>
</div>
<div id="l17sapply" class="section level3">
<h3><span class="header-section-number">9.7.2</span> <code>lapply</code></h3>
<p>Comme indiqué dans la documentation, <code>lapply()</code> renvoie une liste de même longueur que <code>X</code>, chaque élément résultant de l’application de <code>FUN</code> à l’élément correspondant de <code>X</code>. Si <code>X</code> est une <code>list</code> contenant des <code>vector</code> et que nous cherchons à obtenir la moyenne de chacun des éléments de la <code>list</code>, nous pouvons utiliser la fonction <code>lapply()</code> :</p>
<div class="sourceCode" id="cb1083"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1083-1" title="1">myList &lt;-<span class="st"> </span><span class="kw">list</span>(</a>
<a class="sourceLine" id="cb1083-2" title="2">  <span class="dt">a =</span> <span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">100</span>, <span class="dt">size =</span> <span class="dv">10</span>), </a>
<a class="sourceLine" id="cb1083-3" title="3">  <span class="dt">b =</span> <span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">100</span>, <span class="dt">size =</span> <span class="dv">10</span>), </a>
<a class="sourceLine" id="cb1083-4" title="4">  <span class="dt">c =</span> <span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">100</span>, <span class="dt">size =</span> <span class="dv">10</span>), </a>
<a class="sourceLine" id="cb1083-5" title="5">  <span class="dt">d =</span> <span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">100</span>, <span class="dt">size =</span> <span class="dv">10</span>), </a>
<a class="sourceLine" id="cb1083-6" title="6">  <span class="dt">e =</span> <span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">100</span>, <span class="dt">size =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb1083-7" title="7">)</a>
<a class="sourceLine" id="cb1083-8" title="8"><span class="kw">print</span>(myList)</a></code></pre></div>
<pre><code>## $a
##  [1] 54 31 53 50 41 20 18 58 32 75
## 
## $b
##  [1] 49 71 57 59  3 16 83 63 62 31
## 
## $c
##  [1] 13 39  6 12 95 88 21 18 27 20
## 
## $d
##  [1]  6 84 96 91 98 97 16 23 25 90
## 
## $e
##  [1] 44 79 81 25 40 99  7 46 28 18</code></pre>
<div class="sourceCode" id="cb1085"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1085-1" title="1"><span class="kw">lapply</span>(myList, <span class="dt">FUN =</span> mean)</a></code></pre></div>
<pre><code>## $a
## [1] 43.2
## 
## $b
## [1] 49.4
## 
## $c
## [1] 33.9
## 
## $d
## [1] 62.6
## 
## $e
## [1] 46.7</code></pre>
<p>Comme pour la fonction <code>apply()</code>, nous pouvons passer des arguments supplémentaires à la fonction <code>lapply()</code> en les ajoutant à la suite de la fonction. C’est par exemple utile si notre <code>list</code> contient ces valeurs manquantes <code>NA</code> et que nous voulons les ignorer pour le calcul des moyennes (avec l’arguement <code>na.rm = TRUE</code>).</p>
<div class="sourceCode" id="cb1087"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1087-1" title="1">myList &lt;-<span class="st"> </span><span class="kw">list</span>(</a>
<a class="sourceLine" id="cb1087-2" title="2">  <span class="dt">a =</span> <span class="kw">sample</span>(<span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="ot">NA</span>), <span class="dt">size =</span> <span class="dv">10</span>, <span class="dt">replace =</span> <span class="ot">TRUE</span>), </a>
<a class="sourceLine" id="cb1087-3" title="3">  <span class="dt">b =</span> <span class="kw">sample</span>(<span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="ot">NA</span>), <span class="dt">size =</span> <span class="dv">10</span>, <span class="dt">replace =</span> <span class="ot">TRUE</span>), </a>
<a class="sourceLine" id="cb1087-4" title="4">  <span class="dt">c =</span> <span class="kw">sample</span>(<span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="ot">NA</span>), <span class="dt">size =</span> <span class="dv">10</span>, <span class="dt">replace =</span> <span class="ot">TRUE</span>), </a>
<a class="sourceLine" id="cb1087-5" title="5">  <span class="dt">d =</span> <span class="kw">sample</span>(<span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="ot">NA</span>), <span class="dt">size =</span> <span class="dv">10</span>, <span class="dt">replace =</span> <span class="ot">TRUE</span>), </a>
<a class="sourceLine" id="cb1087-6" title="6">  <span class="dt">e =</span> <span class="kw">sample</span>(<span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="ot">NA</span>), <span class="dt">size =</span> <span class="dv">10</span>, <span class="dt">replace =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb1087-7" title="7">)</a>
<a class="sourceLine" id="cb1087-8" title="8"><span class="kw">print</span>(myList)</a></code></pre></div>
<pre><code>## $a
##  [1]  4  1  5  3 NA  3  5  3 NA  1
## 
## $b
##  [1]  5  1  3  1  3  1 NA  5  5  2
## 
## $c
##  [1]  1  4 NA  1  3  4  4  1  3 NA
## 
## $d
##  [1]  5  1  2 NA  2  3 NA  5  3  4
## 
## $e
##  [1] NA  3  1  5 NA  2  1  3  4 NA</code></pre>
<div class="sourceCode" id="cb1089"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1089-1" title="1"><span class="kw">lapply</span>(myList, <span class="dt">FUN =</span> mean)</a></code></pre></div>
<pre><code>## $a
## [1] NA
## 
## $b
## [1] NA
## 
## $c
## [1] NA
## 
## $d
## [1] NA
## 
## $e
## [1] NA</code></pre>
<div class="sourceCode" id="cb1091"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1091-1" title="1"><span class="kw">lapply</span>(myList, <span class="dt">FUN =</span> mean, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<pre><code>## $a
## [1] 3.125
## 
## $b
## [1] 2.888889
## 
## $c
## [1] 2.625
## 
## $d
## [1] 3.125
## 
## $e
## [1] 2.714286</code></pre>
<p>Pour plus de lisibilité ou si plusieurs opérations sont à réaliser au sein de l’argument <code>FUN</code>, nous pouvons utiliser l’écriture suivante :</p>
<div class="sourceCode" id="cb1093"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1093-1" title="1"><span class="kw">lapply</span>(myList, <span class="dt">FUN =</span> <span class="cf">function</span>(i){</a>
<a class="sourceLine" id="cb1093-2" title="2">  <span class="kw">mean</span>(i, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb1093-3" title="3">})</a></code></pre></div>
<pre><code>## $a
## [1] 3.125
## 
## $b
## [1] 2.888889
## 
## $c
## [1] 2.625
## 
## $d
## [1] 3.125
## 
## $e
## [1] 2.714286</code></pre>
<p>Par exemple si nous souhaitons obtenir <code>i^2</code> si la moyenne est supérieure à 3, et <code>i^3</code> sinon :</p>
<div class="sourceCode" id="cb1095"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1095-1" title="1"><span class="kw">lapply</span>(myList, <span class="dt">FUN =</span> <span class="cf">function</span>(i){</a>
<a class="sourceLine" id="cb1095-2" title="2">  m &lt;-<span class="st"> </span><span class="kw">mean</span>(i, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb1095-3" title="3">  <span class="cf">if</span>(m <span class="op">&gt;</span><span class="st"> </span><span class="dv">3</span>){</a>
<a class="sourceLine" id="cb1095-4" title="4">    <span class="kw">return</span>(i<span class="op">^</span><span class="dv">2</span>)  </a>
<a class="sourceLine" id="cb1095-5" title="5">  }<span class="cf">else</span>{</a>
<a class="sourceLine" id="cb1095-6" title="6">    <span class="kw">return</span>(i<span class="op">^</span><span class="dv">3</span>)</a>
<a class="sourceLine" id="cb1095-7" title="7">  }</a>
<a class="sourceLine" id="cb1095-8" title="8">})</a></code></pre></div>
<pre><code>## $a
##  [1] 16  1 25  9 NA  9 25  9 NA  1
## 
## $b
##  [1] 125   1  27   1  27   1  NA 125 125   8
## 
## $c
##  [1]  1 64 NA  1 27 64 64  1 27 NA
## 
## $d
##  [1] 25  1  4 NA  4  9 NA 25  9 16
## 
## $e
##  [1]  NA  27   1 125  NA   8   1  27  64  NA</code></pre>
</div>
<div id="l17lapply" class="section level3">
<h3><span class="header-section-number">9.7.3</span> <code>sapply</code></h3>
<p>La fonction <code>sapply()</code> est une version modifiée de la fonction <code>lapply()</code> qui effectue la même opération mais en renvoyant le résultat sous un format simplifié lorsque c’est possible.</p>
<div class="sourceCode" id="cb1097"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1097-1" title="1"><span class="kw">lapply</span>(myList, <span class="dt">FUN =</span> <span class="cf">function</span>(i){</a>
<a class="sourceLine" id="cb1097-2" title="2">  <span class="kw">mean</span>(i, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb1097-3" title="3">})</a></code></pre></div>
<pre><code>## $a
## [1] 3.125
## 
## $b
## [1] 2.888889
## 
## $c
## [1] 2.625
## 
## $d
## [1] 3.125
## 
## $e
## [1] 2.714286</code></pre>
<div class="sourceCode" id="cb1099"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1099-1" title="1"><span class="kw">sapply</span>(myList, <span class="dt">FUN =</span> <span class="cf">function</span>(i){</a>
<a class="sourceLine" id="cb1099-2" title="2">  <span class="kw">mean</span>(i, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb1099-3" title="3">})</a></code></pre></div>
<pre><code>##        a        b        c        d        e 
## 3.125000 2.888889 2.625000 3.125000 2.714286</code></pre>
<p>La fonction <code>sapply()</code> est intéressante pour récupérer par exemple le nième élément de chacun des éléments d’une <code>list</code>. La fonction qui est appelée pour faire cela est <code>'[['</code>.</p>
<div class="sourceCode" id="cb1101"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1101-1" title="1"><span class="kw">sapply</span>(myList, <span class="dt">FUN =</span> <span class="st">&#39;[[&#39;</span>, <span class="dv">2</span>)</a></code></pre></div>
<pre><code>## a b c d e 
## 1 1 4 1 3</code></pre>
</div>
<div id="l17tapply" class="section level3">
<h3><span class="header-section-number">9.7.4</span> <code>tapply</code></h3>
<p>La fonction<code>tapply()</code> permet d’appliquer une fonction en prenant comme élément à itérer une variable existante. Imaginons des informations sur des espèces représentées par des lettres majuscules (e.g., A, B, C) et des valeurs de performances à différentes localisations.</p>
<div class="sourceCode" id="cb1103"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1103-1" title="1">species &lt;-<span class="st"> </span><span class="kw">sample</span>(LETTERS[<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>], <span class="dt">size =</span> <span class="dv">1000</span>, <span class="dt">replace =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb1103-2" title="2">perf1 &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dt">n =</span> <span class="dv">1000</span>, <span class="dt">mean =</span> <span class="dv">10</span>, <span class="dt">sd =</span> <span class="fl">0.5</span>)</a>
<a class="sourceLine" id="cb1103-3" title="3">perf2 &lt;-<span class="st"> </span><span class="kw">rlnorm</span>(<span class="dt">n =</span> <span class="dv">1000</span>, <span class="dt">meanlog =</span> <span class="dv">10</span>, <span class="dt">sdlog =</span> <span class="fl">0.5</span>)</a>
<a class="sourceLine" id="cb1103-4" title="4">perf3 &lt;-<span class="st"> </span><span class="kw">rgamma</span>(<span class="dt">n =</span> <span class="dv">1000</span>, <span class="dt">shape =</span> <span class="dv">10</span>, <span class="dt">rate =</span> <span class="fl">0.5</span>)</a>
<a class="sourceLine" id="cb1103-5" title="5">dfSpecies &lt;-<span class="st"> </span><span class="kw">data.frame</span>(species, perf1, perf2, perf3)</a>
<a class="sourceLine" id="cb1103-6" title="6"><span class="kw">print</span>(<span class="kw">head</span>(dfSpecies, <span class="dt">n =</span> <span class="dv">10</span>))</a></code></pre></div>
<pre><code>##    species     perf1    perf2     perf3
## 1        G 10.222624 13022.74  8.621002
## 2        D  9.876610 35200.39 29.168023
## 3        E  9.410793 48407.39 20.085624
## 4        J 10.245361 17225.00 13.731359
## 5        B  9.320677 11545.58  9.073383
## 6        A 10.088620  6124.32 32.035541
## 7        F 10.287354 29890.83 13.832635
## 8        E  9.508805 30855.45 18.108082
## 9        E  9.113406 30126.77 25.927293
## 10       C 10.233835 24497.17 14.195026</code></pre>
<p>Nous pouvons facilement obtenir un résumé des performances pour chaque espèce avec la fonction <code>tapply()</code> et la fonction <code>summary()</code>.</p>
<div class="sourceCode" id="cb1105"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1105-1" title="1"><span class="kw">tapply</span>(dfSpecies<span class="op">$</span>perf1, <span class="dt">INDEX =</span> dfSpecies<span class="op">$</span>species, <span class="dt">FUN =</span> summary)</a></code></pre></div>
<pre><code>## $A
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   8.915   9.674   9.957   9.985  10.330  11.080 
## 
## $B
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   8.695   9.664  10.018  10.035  10.441  11.242 
## 
## $C
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   9.233   9.689  10.012  10.048  10.321  11.091 
## 
## $D
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   9.051   9.707  10.009  10.017  10.232  11.222 
## 
## $E
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   8.234   9.533   9.935   9.879  10.253  10.859 
## 
## $F
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   8.864   9.566   9.963   9.988  10.387  11.106 
## 
## $G
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   8.654   9.776  10.094  10.028  10.343  10.941 
## 
## $H
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   9.008   9.689   9.976   9.990  10.330  11.302 
## 
## $I
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   8.927   9.721   9.930   9.977  10.228  11.165 
## 
## $J
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   8.705   9.687  10.036  10.024  10.343  11.015</code></pre>
<p>Nous pouvons aussi obtenir la valeur moyenne de chacune des performances en combinant une fonction <code>sapply()</code> avec la fonction <code>tapply()</code>et en utilisant la fonction <code>mean()</code>.</p>
<div class="sourceCode" id="cb1107"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1107-1" title="1"><span class="kw">sapply</span>(<span class="dv">2</span><span class="op">:</span><span class="dv">4</span>, <span class="dt">FUN =</span> <span class="cf">function</span>(i){</a>
<a class="sourceLine" id="cb1107-2" title="2">  <span class="kw">tapply</span>(dfSpecies[,i], <span class="dt">INDEX =</span> dfSpecies<span class="op">$</span>species, <span class="dt">FUN =</span> mean)</a>
<a class="sourceLine" id="cb1107-3" title="3">})</a></code></pre></div>
<pre><code>##        [,1]     [,2]     [,3]
## A  9.984736 24042.50 21.00470
## B 10.034538 25676.69 20.40560
## C 10.048465 27255.94 19.64347
## D 10.016784 24705.06 20.31313
## E  9.879300 25533.60 20.16334
## F  9.988243 25967.29 20.41106
## G 10.028441 26004.04 19.99912
## H  9.989823 21845.19 19.37374
## I  9.976857 26229.17 19.20210
## J 10.024146 23706.97 18.91837</code></pre>
</div>
<div id="l17mapply" class="section level3">
<h3><span class="header-section-number">9.7.5</span> <code>mapply</code></h3>
<p>La fonction <code>mapply()</code> est une version de la fonction <code>sapply()</code>qui utilise de multiples arguments. Par exemple si nous avons une liste de deux éléments <code>1:5</code> et <code>5:1</code> et que nous souhaitons ajouter <code>10</code> au premier élément et <code>100</code> au deuxième élément :</p>
<div class="sourceCode" id="cb1109"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1109-1" title="1"><span class="kw">mapply</span>(<span class="dt">FUN =</span> <span class="cf">function</span>(i, j){i<span class="op">+</span>j}, <span class="dt">i =</span> <span class="kw">list</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dv">5</span><span class="op">:</span><span class="dv">1</span>), <span class="dt">j =</span> <span class="kw">c</span>(<span class="dv">10</span>, <span class="dv">100</span>))</a></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]   11  105
## [2,]   12  104
## [3,]   13  103
## [4,]   14  102
## [5,]   15  101</code></pre>
</div>
</div>
<div id="conclusion-6" class="section level2">
<h2><span class="header-section-number">9.8</span> Conclusion</h2>
<p>Félicitations, nous sommes arrivés au bout de ce chapitre sur l’algorithmique. Retenons ce message clef : dès qu’une opération doit être réalisée plus de deux fois dans un script en répétant du code qui a été déjà écrit, c’est un signe qui doit nous conduire à l’utilisation d’une boucle. Pour autant, chaque fois que cela est possible, il est recommandé de ne pas utiliser les boucles traditionnelles <code>for()</code>, <code>while()</code>, et <code>repeat()</code>, mais de préférer les opérations sur les vecteurs ou encore les boucles de la famille <code>apply</code>. Cela peut être assez difficile à intégrer au début mais nous verrons que nos scripts seront plus faciles à maintenir et à lire, et beaucoup plus performants si nous suivons ces habitudes.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="import.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="project.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/frareb/myRBook_FR/edit/master/017_boucles.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": [["myRBook_FR.pdf", "PDF"], ["myRBook_FR.epub", "EPUB"], ["myRBook_FR.docx", "DOCX"]],
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
