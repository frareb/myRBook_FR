<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title> 17 R et Internet, manipuler des URLs : WOS d’un article à partir de son numéro DOI | Se former au logiciel R : initiation et perfectionnement</title>
  <meta name="description" content="Un guide pour acquérir les bases de la programmation avec R et conduire efficacement la gestion et l’analyse de ses données." />
  <meta name="generator" content="bookdown 0.16 and GitBook 2.6.7" />

  <meta property="og:title" content=" 17 R et Internet, manipuler des URLs : WOS d’un article à partir de son numéro DOI | Se former au logiciel R : initiation et perfectionnement" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="myFigures/cover.png" />
  <meta property="og:description" content="Un guide pour acquérir les bases de la programmation avec R et conduire efficacement la gestion et l’analyse de ses données." />
  <meta name="github-repo" content="frareb/myRBook_FR" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content=" 17 R et Internet, manipuler des URLs : WOS d’un article à partir de son numéro DOI | Se former au logiciel R : initiation et perfectionnement" />
  
  <meta name="twitter:description" content="Un guide pour acquérir les bases de la programmation avec R et conduire efficacement la gestion et l’analyse de ses données." />
  <meta name="twitter:image" content="myFigures/cover.png" />

<meta name="author" content="François Rebaudo" />


<meta name="date" content="2020-01-03" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="studyCase001.html"/>

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.9.1/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.49.4/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.49.4/plotly-latest.min.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-124666641-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-124666641-2');
</script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="myStyle.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Se former au logiciel R : initiation et perfectionnement</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Préambule</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#remerciements"><i class="fa fa-check"></i><b>1.1</b> Remerciements</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#licence"><i class="fa fa-check"></i><b>1.2</b> Licence</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>2</b> Introduction</a><ul>
<li class="chapter" data-level="2.1" data-path="intro.html"><a href="intro.html#pourquoi-se-former-à-r"><i class="fa fa-check"></i><b>2.1</b> Pourquoi se former à R</a></li>
<li class="chapter" data-level="2.2" data-path="intro.html"><a href="intro.html#ce-livre"><i class="fa fa-check"></i><b>2.2</b> Ce livre</a></li>
<li class="chapter" data-level="2.3" data-path="intro.html"><a href="intro.html#lectures-complémentaires-en-français"><i class="fa fa-check"></i><b>2.3</b> Lectures complémentaires en français</a></li>
</ul></li>
<li class="part"><span><b>I Concepts de base</b></span></li>
<li class="chapter" data-level="3" data-path="premiersPas.html"><a href="premiersPas.html"><i class="fa fa-check"></i><b>3</b> Premiers pas</a><ul>
<li class="chapter" data-level="3.1" data-path="premiersPas.html"><a href="premiersPas.html#installation-de-r"><i class="fa fa-check"></i><b>3.1</b> Installation de R</a></li>
<li class="chapter" data-level="3.2" data-path="premiersPas.html"><a href="premiersPas.html#r-comme-calculatrice"><i class="fa fa-check"></i><b>3.2</b> R comme calculatrice</a><ul>
<li class="chapter" data-level="3.2.1" data-path="premiersPas.html"><a href="premiersPas.html#l011opari"><i class="fa fa-check"></i><b>3.2.1</b> Les opérateurs arithmétiques</a></li>
<li class="chapter" data-level="3.2.2" data-path="premiersPas.html"><a href="premiersPas.html#l011opcomp"><i class="fa fa-check"></i><b>3.2.2</b> Les opérateurs de comparaison</a></li>
<li class="chapter" data-level="3.2.3" data-path="premiersPas.html"><a href="premiersPas.html#l011oplog"><i class="fa fa-check"></i><b>3.2.3</b> Les opérateurs logiques</a></li>
<li class="chapter" data-level="3.2.4" data-path="premiersPas.html"><a href="premiersPas.html#aide-sur-les-opérateurs"><i class="fa fa-check"></i><b>3.2.4</b> Aide sur les opérateurs</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="premiersPas.html"><a href="premiersPas.html#l011object"><i class="fa fa-check"></i><b>3.3</b> La notion d’objet</a></li>
<li class="chapter" data-level="3.4" data-path="premiersPas.html"><a href="premiersPas.html#les-scripts"><i class="fa fa-check"></i><b>3.4</b> Les scripts</a><ul>
<li class="chapter" data-level="3.4.1" data-path="premiersPas.html"><a href="premiersPas.html#créer-un-script-et-le-documenter"><i class="fa fa-check"></i><b>3.4.1</b> Créer un script et le documenter</a></li>
<li class="chapter" data-level="3.4.2" data-path="premiersPas.html"><a href="premiersPas.html#exécuter-un-script"><i class="fa fa-check"></i><b>3.4.2</b> Exécuter un script</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="premiersPas.html"><a href="premiersPas.html#conclusion"><i class="fa fa-check"></i><b>3.5</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="IDE.html"><a href="IDE.html"><i class="fa fa-check"></i><b>4</b> Choisir un environnement de développement</a><ul>
<li class="chapter" data-level="4.1" data-path="IDE.html"><a href="IDE.html#editeurs-de-texte-et-environnement-de-développement"><i class="fa fa-check"></i><b>4.1</b> Editeurs de texte et environnement de développement</a></li>
<li class="chapter" data-level="4.2" data-path="IDE.html"><a href="IDE.html#rstudio"><i class="fa fa-check"></i><b>4.2</b> RStudio</a><ul>
<li class="chapter" data-level="4.2.1" data-path="IDE.html"><a href="IDE.html#installer-rstudio"><i class="fa fa-check"></i><b>4.2.1</b> Installer RStudio</a></li>
<li class="chapter" data-level="4.2.2" data-path="IDE.html"><a href="IDE.html#un-script-avec-rstudio"><i class="fa fa-check"></i><b>4.2.2</b> Un script avec RStudio</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="IDE.html"><a href="IDE.html#notepad-avec-npp2r"><i class="fa fa-check"></i><b>4.3</b> Notepad++ avec Npp2R</a><ul>
<li class="chapter" data-level="4.3.1" data-path="IDE.html"><a href="IDE.html#installer-notepad-pour-windows-uniquement"><i class="fa fa-check"></i><b>4.3.1</b> Installer Notepad++ (pour Windows uniquement)</a></li>
<li class="chapter" data-level="4.3.2" data-path="IDE.html"><a href="IDE.html#installer-npp2r"><i class="fa fa-check"></i><b>4.3.2</b> Installer Npp2R</a></li>
<li class="chapter" data-level="4.3.3" data-path="IDE.html"><a href="IDE.html#un-script-avec-notepad"><i class="fa fa-check"></i><b>4.3.3</b> Un script avec Notepad++</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="IDE.html"><a href="IDE.html#geany"><i class="fa fa-check"></i><b>4.4</b> Geany</a><ul>
<li class="chapter" data-level="4.4.1" data-path="IDE.html"><a href="IDE.html#installer-geany"><i class="fa fa-check"></i><b>4.4.1</b> Installer Geany</a></li>
<li class="chapter" data-level="4.4.2" data-path="IDE.html"><a href="IDE.html#un-script-avec-geany"><i class="fa fa-check"></i><b>4.4.2</b> Un script avec Geany</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="IDE.html"><a href="IDE.html#autres-solutions"><i class="fa fa-check"></i><b>4.5</b> Autres solutions</a></li>
<li class="chapter" data-level="4.6" data-path="IDE.html"><a href="IDE.html#conclusion-1"><i class="fa fa-check"></i><b>4.6</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="dataType1.html"><a href="dataType1.html"><i class="fa fa-check"></i><b>5</b> Les types de données</a><ul>
<li class="chapter" data-level="5.1" data-path="dataType1.html"><a href="dataType1.html#le-type-numeric"><i class="fa fa-check"></i><b>5.1</b> Le type <code>numeric</code></a></li>
<li class="chapter" data-level="5.2" data-path="dataType1.html"><a href="dataType1.html#le-type-character"><i class="fa fa-check"></i><b>5.2</b> Le type <code>character</code></a></li>
<li class="chapter" data-level="5.3" data-path="dataType1.html"><a href="dataType1.html#le-type-factor"><i class="fa fa-check"></i><b>5.3</b> Le type <code>factor</code></a></li>
<li class="chapter" data-level="5.4" data-path="dataType1.html"><a href="dataType1.html#l013logi"><i class="fa fa-check"></i><b>5.4</b> Le type <code>logical</code></a></li>
<li class="chapter" data-level="5.5" data-path="dataType1.html"><a href="dataType1.html#a-propos-de-na"><i class="fa fa-check"></i><b>5.5</b> A propos de <code>NA</code></a></li>
<li class="chapter" data-level="5.6" data-path="dataType1.html"><a href="dataType1.html#conclusion-2"><i class="fa fa-check"></i><b>5.6</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="dataType2.html"><a href="dataType2.html"><i class="fa fa-check"></i><b>6</b> Les conteneurs de données</a><ul>
<li class="chapter" data-level="6.1" data-path="dataType2.html"><a href="dataType2.html#l014vector"><i class="fa fa-check"></i><b>6.1</b> Le conteneur <code>vector</code></a><ul>
<li class="chapter" data-level="6.1.1" data-path="dataType2.html"><a href="dataType2.html#créer-un-vector"><i class="fa fa-check"></i><b>6.1.1</b> Créer un <code>vector</code></a></li>
<li class="chapter" data-level="6.1.2" data-path="dataType2.html"><a href="dataType2.html#opérations-sur-un-vector"><i class="fa fa-check"></i><b>6.1.2</b> Opérations sur un <code>vector</code></a></li>
<li class="chapter" data-level="6.1.3" data-path="dataType2.html"><a href="dataType2.html#accéder-aux-valeurs-dun-vector"><i class="fa fa-check"></i><b>6.1.3</b> Accéder aux valeurs d’un <code>vector</code></a></li>
<li class="chapter" data-level="6.1.4" data-path="dataType2.html"><a href="dataType2.html#nommer-les-éléments-dun-vector"><i class="fa fa-check"></i><b>6.1.4</b> Nommer les éléments d’un <code>vector</code></a></li>
<li class="chapter" data-level="6.1.5" data-path="dataType2.html"><a href="dataType2.html#modifier-les-éléments-dun-vector"><i class="fa fa-check"></i><b>6.1.5</b> Modifier les éléments d’un <code>vector</code></a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="dataType2.html"><a href="dataType2.html#l014list"><i class="fa fa-check"></i><b>6.2</b> Le conteneur <code>list</code></a><ul>
<li class="chapter" data-level="6.2.1" data-path="dataType2.html"><a href="dataType2.html#créer-une-list"><i class="fa fa-check"></i><b>6.2.1</b> Créer une <code>list</code></a></li>
<li class="chapter" data-level="6.2.2" data-path="dataType2.html"><a href="dataType2.html#accéder-aux-valeurs-dune-list"><i class="fa fa-check"></i><b>6.2.2</b> Accéder aux valeurs d’une <code>list</code></a></li>
<li class="chapter" data-level="6.2.3" data-path="dataType2.html"><a href="dataType2.html#modification-dune-list"><i class="fa fa-check"></i><b>6.2.3</b> Modification d’une <code>list</code></a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="dataType2.html"><a href="dataType2.html#l014dataframe"><i class="fa fa-check"></i><b>6.3</b> Le conteneur <code>data.frame</code></a><ul>
<li class="chapter" data-level="6.3.1" data-path="dataType2.html"><a href="dataType2.html#créer-un-data.frame"><i class="fa fa-check"></i><b>6.3.1</b> Créer un <code>data.frame</code></a></li>
<li class="chapter" data-level="6.3.2" data-path="dataType2.html"><a href="dataType2.html#accéder-aux-valeurs-dun-data.frame"><i class="fa fa-check"></i><b>6.3.2</b> Accéder aux valeurs d’un <code>data.frame</code></a></li>
<li class="chapter" data-level="6.3.3" data-path="dataType2.html"><a href="dataType2.html#modifier-un-data.frame"><i class="fa fa-check"></i><b>6.3.3</b> Modifier un <code>data.frame</code></a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="dataType2.html"><a href="dataType2.html#l014matrix"><i class="fa fa-check"></i><b>6.4</b> Le conteneur <code>matrix</code></a><ul>
<li class="chapter" data-level="6.4.1" data-path="dataType2.html"><a href="dataType2.html#créer-une-matrix"><i class="fa fa-check"></i><b>6.4.1</b> Créer une <code>matrix</code></a></li>
<li class="chapter" data-level="6.4.2" data-path="dataType2.html"><a href="dataType2.html#manipuler-et-faire-des-opérations-sur-une-matrix"><i class="fa fa-check"></i><b>6.4.2</b> Manipuler et faire des opérations sur une <code>matrix</code></a></li>
<li class="chapter" data-level="6.4.3" data-path="dataType2.html"><a href="dataType2.html#accéder-aux-éléments-dune-matrix"><i class="fa fa-check"></i><b>6.4.3</b> Accéder aux éléments d’une <code>matrix</code></a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="dataType2.html"><a href="dataType2.html#l014array"><i class="fa fa-check"></i><b>6.5</b> Le conteneur <code>array</code></a><ul>
<li class="chapter" data-level="6.5.1" data-path="dataType2.html"><a href="dataType2.html#créer-un-array"><i class="fa fa-check"></i><b>6.5.1</b> Créer un <code>array</code></a></li>
<li class="chapter" data-level="6.5.2" data-path="dataType2.html"><a href="dataType2.html#manipuler-un-array"><i class="fa fa-check"></i><b>6.5.2</b> Manipuler un <code>array</code></a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="dataType2.html"><a href="dataType2.html#conclusion-3"><i class="fa fa-check"></i><b>6.6</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="fonctions.html"><a href="fonctions.html"><i class="fa fa-check"></i><b>7</b> Les fonctions</a><ul>
<li class="chapter" data-level="7.1" data-path="fonctions.html"><a href="fonctions.html#quest-ce-quune-fonction"><i class="fa fa-check"></i><b>7.1</b> Qu’est-ce qu’une fonction</a></li>
<li class="chapter" data-level="7.2" data-path="fonctions.html"><a href="fonctions.html#l015mainfun"><i class="fa fa-check"></i><b>7.2</b> Les fonctions les plus courantes</a><ul>
<li class="chapter" data-level="7.2.1" data-path="fonctions.html"><a href="fonctions.html#laccès-à-la-documentation"><i class="fa fa-check"></i><b>7.2.1</b> L’accès à la documentation</a></li>
<li class="chapter" data-level="7.2.2" data-path="fonctions.html"><a href="fonctions.html#visualiser-les-données"><i class="fa fa-check"></i><b>7.2.2</b> Visualiser les données</a></li>
<li class="chapter" data-level="7.2.3" data-path="fonctions.html"><a href="fonctions.html#manipuler-les-données"><i class="fa fa-check"></i><b>7.2.3</b> Manipuler les données</a></li>
<li class="chapter" data-level="7.2.4" data-path="fonctions.html"><a href="fonctions.html#fonctions-mathématiques"><i class="fa fa-check"></i><b>7.2.4</b> Fonctions mathématiques</a></li>
<li class="chapter" data-level="7.2.5" data-path="fonctions.html"><a href="fonctions.html#statistiques-descriptives"><i class="fa fa-check"></i><b>7.2.5</b> Statistiques descriptives</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="fonctions.html"><a href="fonctions.html#autres-fonctions-utiles"><i class="fa fa-check"></i><b>7.3</b> Autres fonctions utiles</a><ul>
<li class="chapter" data-level="7.3.1" data-path="fonctions.html"><a href="fonctions.html#l015seqalong"><i class="fa fa-check"></i><b>7.3.1</b> <code>seq_along()</code></a></li>
<li class="chapter" data-level="7.3.2" data-path="fonctions.html"><a href="fonctions.html#l0152points"><i class="fa fa-check"></i><b>7.3.2</b> <code>:</code></a></li>
<li class="chapter" data-level="7.3.3" data-path="fonctions.html"><a href="fonctions.html#l015rep"><i class="fa fa-check"></i><b>7.3.3</b> <code>rep()</code></a></li>
<li class="chapter" data-level="7.3.4" data-path="fonctions.html"><a href="fonctions.html#l015seq"><i class="fa fa-check"></i><b>7.3.4</b> <code>seq()</code></a></li>
<li class="chapter" data-level="7.3.5" data-path="fonctions.html"><a href="fonctions.html#l015getwd"><i class="fa fa-check"></i><b>7.3.5</b> <code>getwd()</code></a></li>
<li class="chapter" data-level="7.3.6" data-path="fonctions.html"><a href="fonctions.html#l015setwd"><i class="fa fa-check"></i><b>7.3.6</b> <code>setwd()</code></a></li>
<li class="chapter" data-level="7.3.7" data-path="fonctions.html"><a href="fonctions.html#l015listfiles"><i class="fa fa-check"></i><b>7.3.7</b> <code>list.files()</code></a></li>
<li class="chapter" data-level="7.3.8" data-path="fonctions.html"><a href="fonctions.html#l015ls"><i class="fa fa-check"></i><b>7.3.8</b> <code>ls()</code></a></li>
<li class="chapter" data-level="7.3.9" data-path="fonctions.html"><a href="fonctions.html#l015rm"><i class="fa fa-check"></i><b>7.3.9</b> <code>rm()</code></a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="fonctions.html"><a href="fonctions.html#quelques-exercices"><i class="fa fa-check"></i><b>7.4</b> Quelques exercices</a><ul>
<li class="chapter" data-level="7.4.1" data-path="fonctions.html"><a href="fonctions.html#séquences"><i class="fa fa-check"></i><b>7.4.1</b> Séquences</a></li>
<li class="chapter" data-level="7.4.2" data-path="fonctions.html"><a href="fonctions.html#statistiques-descriptives-1"><i class="fa fa-check"></i><b>7.4.2</b> Statistiques descriptives</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="fonctions.html"><a href="fonctions.html#l015function"><i class="fa fa-check"></i><b>7.5</b> Ecrire une fonction</a></li>
<li class="chapter" data-level="7.6" data-path="fonctions.html"><a href="fonctions.html#autres-fonctions-développées-par-la-communauté-des-utilisateurs-les-packages"><i class="fa fa-check"></i><b>7.6</b> Autres fonctions développées par la communauté des utilisateurs : les packages</a><ul>
<li class="chapter" data-level="7.6.1" data-path="fonctions.html"><a href="fonctions.html#installer-un-package"><i class="fa fa-check"></i><b>7.6.1</b> Installer un package</a></li>
<li class="chapter" data-level="7.6.2" data-path="fonctions.html"><a href="fonctions.html#charger-un-package"><i class="fa fa-check"></i><b>7.6.2</b> Charger un package</a></li>
<li class="chapter" data-level="7.6.3" data-path="fonctions.html"><a href="fonctions.html#portabilité-du-code"><i class="fa fa-check"></i><b>7.6.3</b> Portabilité du code</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="fonctions.html"><a href="fonctions.html#conclusion-4"><i class="fa fa-check"></i><b>7.7</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="import.html"><a href="import.html"><i class="fa fa-check"></i><b>8</b> Importer et exporter des données</a><ul>
<li class="chapter" data-level="8.1" data-path="import.html"><a href="import.html#l016read"><i class="fa fa-check"></i><b>8.1</b> Lire des données depuis un fichier</a><ul>
<li class="chapter" data-level="8.1.1" data-path="import.html"><a href="import.html#l016transfo"><i class="fa fa-check"></i><b>8.1.1</b> Transformer ses données au format TXT ou CSV</a></li>
<li class="chapter" data-level="8.1.2" data-path="import.html"><a href="import.html#l016readCSV"><i class="fa fa-check"></i><b>8.1.2</b> Lire un fichier CSV</a></li>
<li class="chapter" data-level="8.1.3" data-path="import.html"><a href="import.html#l016readTXT"><i class="fa fa-check"></i><b>8.1.3</b> Lire un fichier texte</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="import.html"><a href="import.html#l016save"><i class="fa fa-check"></i><b>8.2</b> Exporter ou charger des données pour R</a></li>
<li class="chapter" data-level="8.3" data-path="import.html"><a href="import.html#l016write"><i class="fa fa-check"></i><b>8.3</b> Exporter des données</a></li>
<li class="chapter" data-level="8.4" data-path="import.html"><a href="import.html#conclusion-5"><i class="fa fa-check"></i><b>8.4</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="algo.html"><a href="algo.html"><i class="fa fa-check"></i><b>9</b> Algorithmique</a><ul>
<li class="chapter" data-level="9.1" data-path="algo.html"><a href="algo.html#l17if"><i class="fa fa-check"></i><b>9.1</b> Tests logiques avec <code>if</code></a></li>
<li class="chapter" data-level="9.2" data-path="algo.html"><a href="algo.html#l17switch"><i class="fa fa-check"></i><b>9.2</b> Tests logiques avec <code>switch</code></a></li>
<li class="chapter" data-level="9.3" data-path="algo.html"><a href="algo.html#l17for"><i class="fa fa-check"></i><b>9.3</b> La boucle <code>for</code></a></li>
<li class="chapter" data-level="9.4" data-path="algo.html"><a href="algo.html#l17while"><i class="fa fa-check"></i><b>9.4</b> La boucle <code>while</code></a></li>
<li class="chapter" data-level="9.5" data-path="algo.html"><a href="algo.html#l17repeat"><i class="fa fa-check"></i><b>9.5</b> La boucle <code>repeat</code></a></li>
<li class="chapter" data-level="9.6" data-path="algo.html"><a href="algo.html#l17spe"><i class="fa fa-check"></i><b>9.6</b> <code>next</code> et <code>break</code></a></li>
<li class="chapter" data-level="9.7" data-path="algo.html"><a href="algo.html#l17applyfamily"><i class="fa fa-check"></i><b>9.7</b> Les boucles de la famille <code>apply</code></a><ul>
<li class="chapter" data-level="9.7.1" data-path="algo.html"><a href="algo.html#l17apply"><i class="fa fa-check"></i><b>9.7.1</b> <code>apply</code></a></li>
<li class="chapter" data-level="9.7.2" data-path="algo.html"><a href="algo.html#l17sapply"><i class="fa fa-check"></i><b>9.7.2</b> <code>lapply</code></a></li>
<li class="chapter" data-level="9.7.3" data-path="algo.html"><a href="algo.html#l17lapply"><i class="fa fa-check"></i><b>9.7.3</b> <code>sapply</code></a></li>
<li class="chapter" data-level="9.7.4" data-path="algo.html"><a href="algo.html#l17tapply"><i class="fa fa-check"></i><b>9.7.4</b> <code>tapply</code></a></li>
<li class="chapter" data-level="9.7.5" data-path="algo.html"><a href="algo.html#l17mapply"><i class="fa fa-check"></i><b>9.7.5</b> <code>mapply</code></a></li>
</ul></li>
<li class="chapter" data-level="9.8" data-path="algo.html"><a href="algo.html#conclusion-6"><i class="fa fa-check"></i><b>9.8</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="project.html"><a href="project.html"><i class="fa fa-check"></i><b>10</b> Gestion d’un projet avec R</a><ul>
<li class="chapter" data-level="10.1" data-path="project.html"><a href="project.html#gestion-des-fichiers-et-des-répertoires-de-travail"><i class="fa fa-check"></i><b>10.1</b> Gestion des fichiers et des répertoires de travail</a></li>
<li class="chapter" data-level="10.2" data-path="project.html"><a href="project.html#gestion-des-versions-de-script"><i class="fa fa-check"></i><b>10.2</b> Gestion des versions de script</a></li>
<li class="chapter" data-level="10.3" data-path="project.html"><a href="project.html#gestion-de-la-documentation"><i class="fa fa-check"></i><b>10.3</b> Gestion de la documentation</a></li>
<li class="chapter" data-level="10.4" data-path="project.html"><a href="project.html#communiquer-avec-rmarkdown"><i class="fa fa-check"></i><b>10.4</b> Communiquer avec rmarkdown</a></li>
<li class="chapter" data-level="10.5" data-path="project.html"><a href="project.html#conclusion-7"><i class="fa fa-check"></i><b>10.5</b> Conclusion</a></li>
</ul></li>
<li class="part"><span><b>II Les graphiques</b></span></li>
<li class="chapter" data-level="11" data-path="graph1.html"><a href="graph1.html"><i class="fa fa-check"></i><b>11</b> Graphiques simples</a><ul>
<li class="chapter" data-level="11.1" data-path="graph1.html"><a href="graph1.html#graph1plot"><i class="fa fa-check"></i><b>11.1</b> <code>plot</code></a></li>
<li class="chapter" data-level="11.2" data-path="graph1.html"><a href="graph1.html#graph1hist"><i class="fa fa-check"></i><b>11.2</b> <code>hist</code></a></li>
<li class="chapter" data-level="11.3" data-path="graph1.html"><a href="graph1.html#graph1barplot"><i class="fa fa-check"></i><b>11.3</b> <code>barplot</code></a></li>
<li class="chapter" data-level="11.4" data-path="graph1.html"><a href="graph1.html#graph1boxplot"><i class="fa fa-check"></i><b>11.4</b> <code>boxplot</code></a></li>
<li class="chapter" data-level="11.5" data-path="graph1.html"><a href="graph1.html#autres-graphiques"><i class="fa fa-check"></i><b>11.5</b> Autres graphiques</a></li>
<li class="chapter" data-level="11.6" data-path="graph1.html"><a href="graph1.html#conclusion-8"><i class="fa fa-check"></i><b>11.6</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="graph2.html"><a href="graph2.html"><i class="fa fa-check"></i><b>12</b> La gestion des couleurs</a><ul>
<li class="chapter" data-level="12.1" data-path="graph2.html"><a href="graph2.html#colors"><i class="fa fa-check"></i><b>12.1</b> <code>colors()</code></a></li>
<li class="chapter" data-level="12.2" data-path="graph2.html"><a href="graph2.html#rgb"><i class="fa fa-check"></i><b>12.2</b> <code>rgb()</code></a></li>
<li class="chapter" data-level="12.3" data-path="graph2.html"><a href="graph2.html#palettes"><i class="fa fa-check"></i><b>12.3</b> Palettes</a></li>
<li class="chapter" data-level="12.4" data-path="graph2.html"><a href="graph2.html#conclusion-9"><i class="fa fa-check"></i><b>12.4</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="graph3.html"><a href="graph3.html"><i class="fa fa-check"></i><b>13</b> Les packages graphiques</a><ul>
<li class="chapter" data-level="13.1" data-path="graph3.html"><a href="graph3.html#les-packages-de-palettes"><i class="fa fa-check"></i><b>13.1</b> les packages de palettes</a><ul>
<li class="chapter" data-level="13.1.1" data-path="graph3.html"><a href="graph3.html#rcolorbrewer"><i class="fa fa-check"></i><b>13.1.1</b> <code>RColorBrewer</code></a></li>
<li class="chapter" data-level="13.1.2" data-path="graph3.html"><a href="graph3.html#palettesforr"><i class="fa fa-check"></i><b>13.1.2</b> <code>palettesForR</code></a></li>
<li class="chapter" data-level="13.1.3" data-path="graph3.html"><a href="graph3.html#les-autres-packages"><i class="fa fa-check"></i><b>13.1.3</b> Les autres packages</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="graph3.html"><a href="graph3.html#ggplot2-package"><i class="fa fa-check"></i><b>13.2</b> ggplot2 package</a></li>
<li class="chapter" data-level="13.3" data-path="graph3.html"><a href="graph3.html#les-graphiques-interactifs-et-dynamiques-avec-plotly"><i class="fa fa-check"></i><b>13.3</b> Les graphiques interactifs et dynamiques avec <code>Plotly</code></a></li>
<li class="chapter" data-level="13.4" data-path="graph3.html"><a href="graph3.html#conclusion-10"><i class="fa fa-check"></i><b>13.4</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="graph4.html"><a href="graph4.html"><i class="fa fa-check"></i><b>14</b> Du graphique à la figure dans un article scientifique</a><ul>
<li class="chapter" data-level="14.1" data-path="graph4.html"><a href="graph4.html#inkscape"><i class="fa fa-check"></i><b>14.1</b> Inkscape</a></li>
<li class="chapter" data-level="14.2" data-path="graph4.html"><a href="graph4.html#the-gimp"><i class="fa fa-check"></i><b>14.2</b> The Gimp</a></li>
<li class="chapter" data-level="14.3" data-path="graph4.html"><a href="graph4.html#table-de-référence"><i class="fa fa-check"></i><b>14.3</b> Table de référence</a></li>
<li class="chapter" data-level="14.4" data-path="graph4.html"><a href="graph4.html#conclusion-11"><i class="fa fa-check"></i><b>14.4</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="index.html"><a href="index.html#index"><i class="fa fa-check"></i><b>15</b> Index</a></li>
<li class="part"><span><b>III Annexes</b></span></li>
<li class="chapter" data-level="16" data-path="studyCase001.html"><a href="studyCase001.html"><i class="fa fa-check"></i><b>16</b> Manipuler des dates et des heures : données de datalogger de température</a></li>
<li class="chapter" data-level="17" data-path="studyCase002.html"><a href="studyCase002.html"><i class="fa fa-check"></i><b>17</b> R et Internet, manipuler des URLs : WOS d’un article à partir de son numéro DOI</a></li>
<li class="divider"></li>
<li><a href="http://ird.fr/" target="blank"><img src="myLogos/logo_IRD_2016_LONGUEUR_SP_COUL.png" alt="IRD" width="100"></a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Se former au logiciel R : initiation et perfectionnement</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="studyCase002" class="section level1">
<h1><span class="header-section-number"> 17</span> R et Internet, manipuler des URLs : WOS d’un article à partir de son numéro DOI</h1>
<p>Il peut être intéressant d’obtenir le numéro WOS d’un article scientifique. Ce numéro est cependant fastidieux à obtenir, d’autant plus si nous souhaitons le récupérer pour une liste d’articles ! Par chance <em>The Kitchin Research Group</em> dans leur blog de juin 2015 (<a href="http://kitchingroup.cheme.cmu.edu/blog/2015/06/08/Getting-a-WOS-Accession-number-from-a-DOI/" class="uri">http://kitchingroup.cheme.cmu.edu/blog/2015/06/08/Getting-a-WOS-Accession-number-from-a-DOI/</a>) propose une méthode pour récupérer le numéro WOS à partir du numéro DOI. C’est cette méthode que nous allons utiliser avec R et le package <code>httr</code>. En bref, cette méthode consite à interroger le site web du WOS à partir du numéro DOI. Le site web du WOS va répondre en spécifiant qu’il faut se connecter pour accéder à l’article. Il y a pour cela une redirection vers une page web dont l’URL contient le numéro WOS. Il suffit alors d’extraire le numéro WOS de l’URL de la page web. <strong>Si nous utilisons un proxy pour accéder au site web du WOS, il faut donc le désactiver pour que la méthode fonctionne</strong>.</p>
<p>Tout d’abord si cela n’est pas déjà fait il faut installer le package <code>httr</code> avec <code>install.packages("httr")</code>, puis le charger avec <code>library("httr")</code>. Une autre solution consiste à utiliser la fonction suivante qui va vérifier si le package est installé puis le charger (il existe de nombreuses déclinaisons de cette fonction sur internet, il s’agit ici d’un mélange de multiples sources).</p>
<div class="sourceCode" id="cb1246"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1246-1" title="1">pkgCheck &lt;-<span class="st"> </span><span class="cf">function</span>(packages){</a>
<a class="sourceLine" id="cb1246-2" title="2">    <span class="cf">for</span>(x <span class="cf">in</span> packages){</a>
<a class="sourceLine" id="cb1246-3" title="3">        <span class="kw">try</span>(<span class="cf">if</span> (<span class="op">!</span><span class="kw">require</span>(x, <span class="dt">character.only =</span> <span class="ot">TRUE</span>)){</a>
<a class="sourceLine" id="cb1246-4" title="4">            <span class="kw">install.packages</span>(x, <span class="dt">dependencies =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb1246-5" title="5">            <span class="cf">if</span>(<span class="op">!</span><span class="kw">require</span>(x, <span class="dt">character.only =</span> <span class="ot">TRUE</span>)) {</a>
<a class="sourceLine" id="cb1246-6" title="6">                <span class="kw">stop</span>()</a>
<a class="sourceLine" id="cb1246-7" title="7">            }</a>
<a class="sourceLine" id="cb1246-8" title="8">        })</a>
<a class="sourceLine" id="cb1246-9" title="9">    }</a>
<a class="sourceLine" id="cb1246-10" title="10">}</a>
<a class="sourceLine" id="cb1246-11" title="11"><span class="kw">pkgCheck</span>(<span class="st">&quot;httr&quot;</span>)</a></code></pre></div>
<p>La liste des numéros DOI est la suivante (contenu dans un <code>vector</code>) :</p>
<div class="sourceCode" id="cb1247"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1247-1" title="1">myDOIs &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;10.1111/2041-210X.12935&quot;</span>, <span class="st">&quot;10.1007/s13355-017-0480-5&quot;</span>)</a>
<a class="sourceLine" id="cb1247-2" title="2"><span class="kw">print</span>(myDOIs)</a></code></pre></div>
<pre><code>## [1] &quot;10.1111/2041-210X.12935&quot;   &quot;10.1007/s13355-017-0480-5&quot;</code></pre>
<p>Pour chaque DOI, nous allons interroger le site web du WOS, récupérer l’URL de redirection, puis récupérer le numéro WOS. Nous allons donc faire une boucle sur notre <code>vector</code> contenant les DOI. Nous utilisons la fonction <code>seq_along()</code> qui va prendre comme valeurs les éléments d’une séquence de 1 à la taille de l’objet <code>myDOIs</code>, soit : <code>i = 1</code>, puis <code>i = 2</code>.</p>
<div class="sourceCode" id="cb1249"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1249-1" title="1"><span class="cf">for</span>(i <span class="cf">in</span> <span class="kw">seq_along</span>(myDOIs)){</a>
<a class="sourceLine" id="cb1249-2" title="2">  <span class="co"># ...</span></a>
<a class="sourceLine" id="cb1249-3" title="3">}</a></code></pre></div>
<p>Dans la boucle, le DOI que nous allons traiter est donc <code>myDOIs[i]</code> que nous allons appeler <code>myDOI</code>. La page d’interrogation du WOS correspond à la concaténation de l’URL du WOS avec le numéro WOS (l’URL est présentée sur plusieurs lignes pour respecter la largeur de page de ce livre).</p>
<div class="sourceCode" id="cb1250"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1250-1" title="1"><span class="cf">for</span>(i <span class="cf">in</span> <span class="kw">seq_along</span>(myDOIs)){</a>
<a class="sourceLine" id="cb1250-2" title="2">  myDOI &lt;-<span class="st"> </span>myDOIs[i]</a>
<a class="sourceLine" id="cb1250-3" title="3">  myWebPage &lt;-<span class="st"> </span><span class="kw">paste0</span>(</a>
<a class="sourceLine" id="cb1250-4" title="4">    <span class="st">&quot;http://ws.isiknowledge.com/&quot;</span>, </a>
<a class="sourceLine" id="cb1250-5" title="5">    <span class="st">&quot;cps/openurl/service?url_ver=Z39.88-2004&quot;</span>, </a>
<a class="sourceLine" id="cb1250-6" title="6">    <span class="st">&quot;&amp;rft_id=info:doi/&quot;</span>, myDOI)</a>
<a class="sourceLine" id="cb1250-7" title="7">}</a></code></pre></div>
<p>Maintenant nous allons utiliser la fonction <code>GET()</code> du package <code>httr</code> pour récupérer l’URL.</p>
<div class="sourceCode" id="cb1251"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1251-1" title="1"><span class="cf">for</span>(i <span class="cf">in</span> <span class="kw">seq_along</span>(myDOIs)){</a>
<a class="sourceLine" id="cb1251-2" title="2">  myDOI &lt;-<span class="st"> </span>myDOIs[i]</a>
<a class="sourceLine" id="cb1251-3" title="3">  myWebPage &lt;-<span class="st"> </span><span class="kw">paste0</span>(</a>
<a class="sourceLine" id="cb1251-4" title="4">    <span class="st">&quot;http://ws.isiknowledge.com/&quot;</span>, </a>
<a class="sourceLine" id="cb1251-5" title="5">    <span class="st">&quot;cps/openurl/service?url_ver=Z39.88-2004&quot;</span>, </a>
<a class="sourceLine" id="cb1251-6" title="6">    <span class="st">&quot;&amp;rft_id=info:doi/&quot;</span>, myDOI)</a>
<a class="sourceLine" id="cb1251-7" title="7">  r &lt;-<span class="st"> </span><span class="kw">GET</span>(myWebPage)</a>
<a class="sourceLine" id="cb1251-8" title="8">  urlWOS &lt;-<span class="st"> </span>r[[<span class="dv">1</span>]]</a>
<a class="sourceLine" id="cb1251-9" title="9">}</a></code></pre></div>
<p>Il se peut que pour un article, il n’y ait pas de numéro WOS correspondant. Pour que notre script ne soit pas arrêté en cas d’erreur il faut donc <strong>gérer cette exception</strong>. Nous allons créer un objet <code>tryExtract</code> qui va prendre comme valeur une chaîne de caractères vide <code>""</code>. Ensuite nous allons essayer avec la fonction <code>try()</code> d’extraire le numéro WOS avec la fonction <code>substr()</code>. Le numéro WOS se situe depuis le caractère numéro 117 jusqu’au caractère numéro 131 de l’URL.</p>
<div class="sourceCode" id="cb1252"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1252-1" title="1"><span class="cf">for</span>(i <span class="cf">in</span> <span class="kw">seq_along</span>(myDOIs)){</a>
<a class="sourceLine" id="cb1252-2" title="2">  myDOI &lt;-<span class="st"> </span>myDOIs[i]</a>
<a class="sourceLine" id="cb1252-3" title="3">  myWebPage &lt;-<span class="st"> </span><span class="kw">paste0</span>(</a>
<a class="sourceLine" id="cb1252-4" title="4">    <span class="st">&quot;http://ws.isiknowledge.com/&quot;</span>, </a>
<a class="sourceLine" id="cb1252-5" title="5">    <span class="st">&quot;cps/openurl/service?url_ver=Z39.88-2004&quot;</span>, </a>
<a class="sourceLine" id="cb1252-6" title="6">    <span class="st">&quot;&amp;rft_id=info:doi/&quot;</span>, myDOI)</a>
<a class="sourceLine" id="cb1252-7" title="7">  r &lt;-<span class="st"> </span><span class="kw">GET</span>(myWebPage)</a>
<a class="sourceLine" id="cb1252-8" title="8">  urlWOS &lt;-<span class="st"> </span>r[[<span class="dv">1</span>]]</a>
<a class="sourceLine" id="cb1252-9" title="9">  tryExtract &lt;-<span class="st"> &quot;&quot;</span></a>
<a class="sourceLine" id="cb1252-10" title="10">  <span class="kw">try</span>(tryExtract &lt;-<span class="st"> </span><span class="kw">substr</span>(<span class="dt">x =</span> urlWOS, <span class="dt">start =</span> <span class="dv">117</span>, <span class="dt">stop =</span> <span class="dv">131</span>), <span class="dt">silent =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb1252-11" title="11">}</a></code></pre></div>
<p>Nous pouvons ensuite vérifier que l’extraction correspond bien à un numéro en utilisant une <strong>expression régulière</strong>. Ici nous allons simplement vérifier que l’extraction ne contient que des chiffres. Dans le cas contraire <code>tryExtract</code> reprendra sa valeur initiale <code>""</code>.</p>
<div class="sourceCode" id="cb1253"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1253-1" title="1"><span class="cf">for</span>(i <span class="cf">in</span> <span class="kw">seq_along</span>(myDOIs)){</a>
<a class="sourceLine" id="cb1253-2" title="2">  myDOI &lt;-<span class="st"> </span>myDOIs[i]</a>
<a class="sourceLine" id="cb1253-3" title="3">  myWebPage &lt;-<span class="st"> </span><span class="kw">paste0</span>(</a>
<a class="sourceLine" id="cb1253-4" title="4">    <span class="st">&quot;http://ws.isiknowledge.com/&quot;</span>, </a>
<a class="sourceLine" id="cb1253-5" title="5">    <span class="st">&quot;cps/openurl/service?url_ver=Z39.88-2004&quot;</span>, </a>
<a class="sourceLine" id="cb1253-6" title="6">    <span class="st">&quot;&amp;rft_id=info:doi/&quot;</span>, myDOI)</a>
<a class="sourceLine" id="cb1253-7" title="7">  r &lt;-<span class="st"> </span><span class="kw">GET</span>(myWebPage)</a>
<a class="sourceLine" id="cb1253-8" title="8">  urlWOS &lt;-<span class="st"> </span>r[[<span class="dv">1</span>]]</a>
<a class="sourceLine" id="cb1253-9" title="9">  tryExtract &lt;-<span class="st"> &quot;&quot;</span></a>
<a class="sourceLine" id="cb1253-10" title="10">  <span class="kw">try</span>(tryExtract &lt;-<span class="st"> </span><span class="kw">substr</span>(<span class="dt">x =</span> urlWOS, <span class="dt">start =</span> <span class="dv">117</span>, <span class="dt">stop =</span> <span class="dv">131</span>), <span class="dt">silent =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb1253-11" title="11">  <span class="cf">if</span>(<span class="op">!</span><span class="kw">grepl</span>(<span class="dt">pattern =</span> <span class="st">&#39;^[0-9]*$&#39;</span>, <span class="dt">x =</span> tryExtract)){tryExtract &lt;-<span class="st"> &quot;&quot;</span>}</a>
<a class="sourceLine" id="cb1253-12" title="12">}</a></code></pre></div>
<p>Le résultat est ensuite stocké dans un <code>vector</code> créé au préalable et appelé <code>vecWOS</code>.</p>
<div class="sourceCode" id="cb1254"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1254-1" title="1">vecWOS &lt;-<span class="st"> </span><span class="kw">vector</span>()</a>
<a class="sourceLine" id="cb1254-2" title="2"><span class="cf">for</span>(i <span class="cf">in</span> <span class="kw">seq_along</span>(myDOIs)){</a>
<a class="sourceLine" id="cb1254-3" title="3">  myDOI &lt;-<span class="st"> </span>myDOIs[i]</a>
<a class="sourceLine" id="cb1254-4" title="4">  myWebPage &lt;-<span class="st"> </span><span class="kw">paste0</span>(</a>
<a class="sourceLine" id="cb1254-5" title="5">    <span class="st">&quot;http://ws.isiknowledge.com/&quot;</span>, </a>
<a class="sourceLine" id="cb1254-6" title="6">    <span class="st">&quot;cps/openurl/service?url_ver=Z39.88-2004&quot;</span>, </a>
<a class="sourceLine" id="cb1254-7" title="7">    <span class="st">&quot;&amp;rft_id=info:doi/&quot;</span>, myDOI)</a>
<a class="sourceLine" id="cb1254-8" title="8">  r &lt;-<span class="st"> </span><span class="kw">GET</span>(myWebPage)</a>
<a class="sourceLine" id="cb1254-9" title="9">  urlWOS &lt;-<span class="st"> </span>r[[<span class="dv">1</span>]]</a>
<a class="sourceLine" id="cb1254-10" title="10">  tryExtract &lt;-<span class="st"> &quot;&quot;</span></a>
<a class="sourceLine" id="cb1254-11" title="11">  <span class="kw">try</span>(tryExtract &lt;-<span class="st"> </span><span class="kw">substr</span>(<span class="dt">x =</span> urlWOS, <span class="dt">start =</span> <span class="dv">117</span>, <span class="dt">stop =</span> <span class="dv">131</span>), <span class="dt">silent =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb1254-12" title="12">  <span class="cf">if</span>(<span class="op">!</span><span class="kw">grepl</span>(<span class="dt">pattern =</span> <span class="st">&#39;^[0-9]*$&#39;</span>, <span class="dt">x =</span> tryExtract)){tryExtract &lt;-<span class="st"> &quot;&quot;</span>}</a>
<a class="sourceLine" id="cb1254-13" title="13">  vecWOS &lt;-<span class="st"> </span><span class="kw">append</span>(vecWOS, tryExtract)</a>
<a class="sourceLine" id="cb1254-14" title="14">}</a></code></pre></div>
<p>Nous pouvons alors créer un objet de type <code>data.frame</code> qui va contenir les numéros DOI et les numéros WOS, et éventuellement l’exporter dans un fichier CSV.</p>
<div class="sourceCode" id="cb1255"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1255-1" title="1">dfDOIWOS &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">DOI =</span> myDOIs, <span class="dt">WOS =</span> vecWOS)</a>
<a class="sourceLine" id="cb1255-2" title="2"><span class="kw">write.csv</span>(dfDOIWOS, <span class="dt">file =</span> <span class="st">&quot;dfDOIWOS.csv&quot;</span>, <span class="dt">row.names =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<p>Le résultat est le suivant (non exécuté car la procédure d’interrogation avec la fonction <code>GET()</code> est très lente : <strong>si nous souhaitons travailler sur un liste de plusieurs dizaines ou centaines d’articles, plusieurs heures seront nécessaires</strong> avant d’obtenir le résultat).</p>
<div class="sourceCode" id="cb1256"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1256-1" title="1"><span class="co">#                         DOI             WOS</span></a>
<a class="sourceLine" id="cb1256-2" title="2"><span class="co"># 1   10.1111/2041-210X.12935 000429421800031</span></a>
<a class="sourceLine" id="cb1256-3" title="3"><span class="co"># 2 10.1007/s13355-017-0480-5 000400381400016</span></a></code></pre></div>
<p>Voici le code complet :</p>
<div class="sourceCode" id="cb1257"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1257-1" title="1">pkgCheck &lt;-<span class="st"> </span><span class="cf">function</span>(packages){</a>
<a class="sourceLine" id="cb1257-2" title="2">    <span class="cf">for</span>(x <span class="cf">in</span> packages){</a>
<a class="sourceLine" id="cb1257-3" title="3">        <span class="kw">try</span>(<span class="cf">if</span> (<span class="op">!</span><span class="kw">require</span>(x, <span class="dt">character.only =</span> <span class="ot">TRUE</span>)){</a>
<a class="sourceLine" id="cb1257-4" title="4">            <span class="kw">install.packages</span>(x, <span class="dt">dependencies =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb1257-5" title="5">            <span class="cf">if</span>(<span class="op">!</span><span class="kw">require</span>(x, <span class="dt">character.only =</span> <span class="ot">TRUE</span>)) {</a>
<a class="sourceLine" id="cb1257-6" title="6">                <span class="kw">stop</span>()</a>
<a class="sourceLine" id="cb1257-7" title="7">            }</a>
<a class="sourceLine" id="cb1257-8" title="8">        })</a>
<a class="sourceLine" id="cb1257-9" title="9">    }</a>
<a class="sourceLine" id="cb1257-10" title="10">}</a>
<a class="sourceLine" id="cb1257-11" title="11"><span class="kw">pkgCheck</span>(<span class="st">&quot;httr&quot;</span>)</a>
<a class="sourceLine" id="cb1257-12" title="12"></a>
<a class="sourceLine" id="cb1257-13" title="13">myDOIs &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;10.1111/2041-210X.12935&quot;</span>, <span class="st">&quot;10.1007/s13355-017-0480-5&quot;</span>)</a>
<a class="sourceLine" id="cb1257-14" title="14"></a>
<a class="sourceLine" id="cb1257-15" title="15">vecWOS &lt;-<span class="st"> </span><span class="kw">vector</span>()</a>
<a class="sourceLine" id="cb1257-16" title="16"><span class="cf">for</span>(i <span class="cf">in</span> <span class="kw">seq_along</span>(myDOIs)){</a>
<a class="sourceLine" id="cb1257-17" title="17">  myDOI &lt;-<span class="st"> </span>myDOIs[i]</a>
<a class="sourceLine" id="cb1257-18" title="18">  myWebPage &lt;-<span class="st"> </span><span class="kw">paste0</span>(</a>
<a class="sourceLine" id="cb1257-19" title="19">    <span class="st">&quot;http://ws.isiknowledge.com/&quot;</span>, </a>
<a class="sourceLine" id="cb1257-20" title="20">    <span class="st">&quot;cps/openurl/service?url_ver=Z39.88-2004&quot;</span>, </a>
<a class="sourceLine" id="cb1257-21" title="21">    <span class="st">&quot;&amp;rft_id=info:doi/&quot;</span>, myDOI)</a>
<a class="sourceLine" id="cb1257-22" title="22">  r &lt;-<span class="st"> </span><span class="kw">GET</span>(myWebPage)</a>
<a class="sourceLine" id="cb1257-23" title="23">  urlWOS &lt;-<span class="st"> </span>r[[<span class="dv">1</span>]]</a>
<a class="sourceLine" id="cb1257-24" title="24">  tryExtract &lt;-<span class="st"> &quot;&quot;</span></a>
<a class="sourceLine" id="cb1257-25" title="25">  <span class="kw">try</span>(tryExtract &lt;-<span class="st"> </span><span class="kw">substr</span>(<span class="dt">x =</span> urlWOS, <span class="dt">start =</span> <span class="dv">117</span>, <span class="dt">stop =</span> <span class="dv">131</span>), <span class="dt">silent =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb1257-26" title="26">  <span class="cf">if</span>(<span class="op">!</span><span class="kw">grepl</span>(<span class="dt">pattern =</span> <span class="st">&#39;^[0-9]*$&#39;</span>, <span class="dt">x =</span> tryExtract)){tryExtract &lt;-<span class="st"> &quot;&quot;</span>}</a>
<a class="sourceLine" id="cb1257-27" title="27">  vecWOS &lt;-<span class="st"> </span><span class="kw">append</span>(vecWOS, tryExtract)</a>
<a class="sourceLine" id="cb1257-28" title="28">}</a>
<a class="sourceLine" id="cb1257-29" title="29"></a>
<a class="sourceLine" id="cb1257-30" title="30">dfDOIWOS &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">DOI =</span> myDOIs, <span class="dt">WOS =</span> vecWOS)</a>
<a class="sourceLine" id="cb1257-31" title="31"><span class="kw">write.csv</span>(dfDOIWOS, <span class="dt">file =</span> <span class="st">&quot;dfDOIWOS.csv&quot;</span>, <span class="dt">row.names =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<p>La boucle <code>for()</code> pourrait être remplacée par une boucle <code>sapply()</code> pour gagner en temps d’exécution. Un gain serait également possible en effectuant une parallélisation sur cette boucle. Pour information, voici un exemple de temps d’exécution renvoyé par la fonction <code>system.time()</code> et <code>microbenchmark::microbenchmark()</code> :</p>
<div class="sourceCode" id="cb1258"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1258-1" title="1"><span class="co"># system.time()</span></a>
<a class="sourceLine" id="cb1258-2" title="2"><span class="co">#   user  system elapsed</span></a>
<a class="sourceLine" id="cb1258-3" title="3"><span class="co">#   0.10    0.01   35.00</span></a>
<a class="sourceLine" id="cb1258-4" title="4"></a>
<a class="sourceLine" id="cb1258-5" title="5"><span class="co"># microbenchmark()</span></a>
<a class="sourceLine" id="cb1258-6" title="6"><span class="co"># Unit: seconds</span></a>
<a class="sourceLine" id="cb1258-7" title="7"><span class="co">#     expr      min       lq     mean   median       uq      max neval</span></a>
<a class="sourceLine" id="cb1258-8" title="8"><span class="co">#  myFun() 36.58966 36.58966 36.58966 36.58966 36.58966 36.58966     1</span></a></code></pre></div>
<p>Nous venons de faire un script qui permet à partir d’une liste de numéros DOI d’obtenir automatiquement les numéros WOS.</p>

</div>
            </section>

          </div>
        </div>
      </div>
<a href="studyCase001.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/frareb/myRBook_FR/edit/master/042_studyCase.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": [["myRBook_FR.pdf", "PDF"], ["myRBook_FR.epub", "EPUB"], ["myRBook_FR.docx", "DOCX"]],
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
